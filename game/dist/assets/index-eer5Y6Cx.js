var oo=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);import{r as g,a as ao,R as Gs,L as Ps,u as qe,b as lo,O as co,B as uo,c as ho,d as Te}from"./react-vendor-RGTUMA6Z.js";import{l as Hs,c as fo}from"./game-vendor-B_MNHd1B.js";var qu=oo((Ju,kt)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function s(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=s(i);fetch(i.href,o)}})();var Ar={exports:{}},Qt={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mo=g,po=Symbol.for("react.element"),go=Symbol.for("react.fragment"),xo=Object.prototype.hasOwnProperty,yo=mo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,bo={key:!0,ref:!0,__self:!0,__source:!0};function Vr(e,t,s){var n,i={},o=null,a=null;s!==void 0&&(o=""+s),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(a=t.ref);for(n in t)xo.call(t,n)&&!bo.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:po,type:e,key:o,ref:a,props:i,_owner:yo.current}}Qt.Fragment=go;Qt.jsx=Vr;Qt.jsxs=Vr;Ar.exports=Qt;var r=Ar.exports,ks={},gn=ao;ks.createRoot=gn.createRoot,ks.hydrateRoot=gn.hydrateRoot;const Dr=g.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),es=g.createContext({}),ts=g.createContext(null),ss=typeof document<"u",_s=ss?g.useLayoutEffect:g.useEffect,Er=g.createContext({strict:!1}),Ws=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),vo="framerAppearId",Lr="data-"+Ws(vo);function wo(e,t,s,n){const{visualElement:i}=g.useContext(es),o=g.useContext(Er),a=g.useContext(ts),l=g.useContext(Dr).reducedMotion,c=g.useRef();n=n||o.renderer,!c.current&&n&&(c.current=n(e,{visualState:t,parent:i,props:s,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const d=c.current;g.useInsertionEffect(()=>{d&&d.update(s,a)});const u=g.useRef(!!(s[Lr]&&!window.HandoffComplete));return _s(()=>{d&&(d.render(),u.current&&d.animationState&&d.animationState.animateChanges())}),g.useEffect(()=>{d&&(d.updateFeatures(),!u.current&&d.animationState&&d.animationState.animateChanges(),u.current&&(u.current=!1,window.HandoffComplete=!0))}),d}function st(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function jo(e,t,s){return g.useCallback(n=>{n&&e.mount&&e.mount(n),t&&(n?t.mount(n):t.unmount()),s&&(typeof s=="function"?s(n):st(s)&&(s.current=n))},[t])}function wt(e){return typeof e=="string"||Array.isArray(e)}function ns(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const qs=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Xs=["initial",...qs];function rs(e){return ns(e.animate)||Xs.some(t=>wt(e[t]))}function Fr(e){return!!(rs(e)||e.variants)}function No(e,t){if(rs(e)){const{initial:s,animate:n}=e;return{initial:s===!1||wt(s)?s:void 0,animate:wt(n)?n:void 0}}return e.inherit!==!1?t:{}}function So(e){const{initial:t,animate:s}=No(e,g.useContext(es));return g.useMemo(()=>({initial:t,animate:s}),[xn(t),xn(s)])}function xn(e){return Array.isArray(e)?e.join(" "):e}const yn={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},jt={};for(const e in yn)jt[e]={isEnabled:t=>yn[e].some(s=>!!t[s])};function Co(e){for(const t in e)jt[t]={...jt[t],...e[t]}}const Ks=g.createContext({}),Ir=g.createContext({}),To=Symbol.for("motionComponentSymbol");function Po({preloadedFeatures:e,createVisualElement:t,useRender:s,useVisualState:n,Component:i}){e&&Co(e);function o(l,c){let d;const u={...g.useContext(Dr),...l,layoutId:ko(l)},{isStatic:h}=u,p=So(l),x=n(l,h);if(!h&&ss){p.visualElement=wo(i,x,u,t);const C=g.useContext(Ir),b=g.useContext(Er).strict;p.visualElement&&(d=p.visualElement.loadFeatures(u,b,e,C))}return g.createElement(es.Provider,{value:p},d&&p.visualElement?g.createElement(d,{visualElement:p.visualElement,...u}):null,s(i,l,jo(x,p.visualElement,c),x,h,p.visualElement))}const a=g.forwardRef(o);return a[To]=i,a}function ko({layoutId:e}){const t=g.useContext(Ks).id;return t&&e!==void 0?t+"-"+e:e}function Mo(e){function t(n,i={}){return Po(e(n,i))}if(typeof Proxy>"u")return t;const s=new Map;return new Proxy(t,{get:(n,i)=>(s.has(i)||s.set(i,t(i)),s.get(i))})}const Ro=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Ys(e){return typeof e!="string"||e.includes("-")?!1:!!(Ro.indexOf(e)>-1||/[A-Z]/.test(e))}const _t={};function Ao(e){Object.assign(_t,e)}const St=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Xe=new Set(St);function Br(e,{layout:t,layoutId:s}){return Xe.has(e)||e.startsWith("origin")||(t||s!==void 0)&&(!!_t[e]||e==="opacity")}const ye=e=>!!(e&&e.getVelocity),Vo={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Do=St.length;function Eo(e,{enableHardwareAcceleration:t=!0,allowTransformNone:s=!0},n,i){let o="";for(let a=0;a<Do;a++){const l=St[a];if(e[l]!==void 0){const c=Vo[l]||l;o+=`${c}(${e[l]}) `}}return t&&!e.z&&(o+="translateZ(0)"),o=o.trim(),i?o=i(e,n?"":o):s&&n&&(o="none"),o}const Or=e=>t=>typeof t=="string"&&t.startsWith(e),zr=Or("--"),Ms=Or("var(--"),Lo=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,Fo=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Ie=(e,t,s)=>Math.min(Math.max(s,e),t),Ke={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},xt={...Ke,transform:e=>Ie(0,1,e)},Ft={...Ke,default:1},yt=e=>Math.round(e*1e5)/1e5,is=/(-)?([\d]*\.?[\d])+/g,$r=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,Io=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Ct(e){return typeof e=="string"}const Tt=e=>({test:t=>Ct(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Ee=Tt("deg"),ke=Tt("%"),J=Tt("px"),Bo=Tt("vh"),Oo=Tt("vw"),bn={...ke,parse:e=>ke.parse(e)/100,transform:e=>ke.transform(e*100)},vn={...Ke,transform:Math.round},Ur={borderWidth:J,borderTopWidth:J,borderRightWidth:J,borderBottomWidth:J,borderLeftWidth:J,borderRadius:J,radius:J,borderTopLeftRadius:J,borderTopRightRadius:J,borderBottomRightRadius:J,borderBottomLeftRadius:J,width:J,maxWidth:J,height:J,maxHeight:J,size:J,top:J,right:J,bottom:J,left:J,padding:J,paddingTop:J,paddingRight:J,paddingBottom:J,paddingLeft:J,margin:J,marginTop:J,marginRight:J,marginBottom:J,marginLeft:J,rotate:Ee,rotateX:Ee,rotateY:Ee,rotateZ:Ee,scale:Ft,scaleX:Ft,scaleY:Ft,scaleZ:Ft,skew:Ee,skewX:Ee,skewY:Ee,distance:J,translateX:J,translateY:J,translateZ:J,x:J,y:J,z:J,perspective:J,transformPerspective:J,opacity:xt,originX:bn,originY:bn,originZ:J,zIndex:vn,fillOpacity:xt,strokeOpacity:xt,numOctaves:vn};function Zs(e,t,s,n){const{style:i,vars:o,transform:a,transformOrigin:l}=e;let c=!1,d=!1,u=!0;for(const h in t){const p=t[h];if(zr(h)){o[h]=p;continue}const x=Ur[h],C=Fo(p,x);if(Xe.has(h)){if(c=!0,a[h]=C,!u)continue;p!==(x.default||0)&&(u=!1)}else h.startsWith("origin")?(d=!0,l[h]=C):i[h]=C}if(t.transform||(c||n?i.transform=Eo(e.transform,s,u,n):i.transform&&(i.transform="none")),d){const{originX:h="50%",originY:p="50%",originZ:x=0}=l;i.transformOrigin=`${h} ${p} ${x}`}}const Js=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Gr(e,t,s){for(const n in t)!ye(t[n])&&!Br(n,s)&&(e[n]=t[n])}function zo({transformTemplate:e},t,s){return g.useMemo(()=>{const n=Js();return Zs(n,t,{enableHardwareAcceleration:!s},e),Object.assign({},n.vars,n.style)},[t])}function $o(e,t,s){const n=e.style||{},i={};return Gr(i,n,e),Object.assign(i,zo(e,t,s)),e.transformValues?e.transformValues(i):i}function Uo(e,t,s){const n={},i=$o(e,t,s);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=i,n}const Go=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Wt(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Go.has(e)}let Hr=e=>!Wt(e);function Ho(e){e&&(Hr=t=>t.startsWith("on")?!Wt(t):e(t))}try{Ho(require("@emotion/is-prop-valid").default)}catch{}function _o(e,t,s){const n={};for(const i in e)i==="values"&&typeof e.values=="object"||(Hr(i)||s===!0&&Wt(i)||!t&&!Wt(i)||e.draggable&&i.startsWith("onDrag"))&&(n[i]=e[i]);return n}function wn(e,t,s){return typeof e=="string"?e:J.transform(t+s*e)}function Wo(e,t,s){const n=wn(t,e.x,e.width),i=wn(s,e.y,e.height);return`${n} ${i}`}const qo={offset:"stroke-dashoffset",array:"stroke-dasharray"},Xo={offset:"strokeDashoffset",array:"strokeDasharray"};function Ko(e,t,s=1,n=0,i=!0){e.pathLength=1;const o=i?qo:Xo;e[o.offset]=J.transform(-n);const a=J.transform(t),l=J.transform(s);e[o.array]=`${a} ${l}`}function Qs(e,{attrX:t,attrY:s,attrScale:n,originX:i,originY:o,pathLength:a,pathSpacing:l=1,pathOffset:c=0,...d},u,h,p){if(Zs(e,d,u,p),h){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:x,style:C,dimensions:b}=e;x.transform&&(b&&(C.transform=x.transform),delete x.transform),b&&(i!==void 0||o!==void 0||C.transform)&&(C.transformOrigin=Wo(b,i!==void 0?i:.5,o!==void 0?o:.5)),t!==void 0&&(x.x=t),s!==void 0&&(x.y=s),n!==void 0&&(x.scale=n),a!==void 0&&Ko(x,a,l,c,!1)}const _r=()=>({...Js(),attrs:{}}),en=e=>typeof e=="string"&&e.toLowerCase()==="svg";function Yo(e,t,s,n){const i=g.useMemo(()=>{const o=_r();return Qs(o,t,{enableHardwareAcceleration:!1},en(n),e.transformTemplate),{...o.attrs,style:{...o.style}}},[t]);if(e.style){const o={};Gr(o,e.style,e),i.style={...o,...i.style}}return i}function Zo(e=!1){return(s,n,i,{latestValues:o},a)=>{const c=(Ys(s)?Yo:Uo)(n,o,a,s),u={..._o(n,typeof s=="string",e),...c,ref:i},{children:h}=n,p=g.useMemo(()=>ye(h)?h.get():h,[h]);return g.createElement(s,{...u,children:p})}}function Wr(e,{style:t,vars:s},n,i){Object.assign(e.style,t,i&&i.getProjectionStyles(n));for(const o in s)e.style.setProperty(o,s[o])}const qr=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Xr(e,t,s,n){Wr(e,t,void 0,n);for(const i in t.attrs)e.setAttribute(qr.has(i)?i:Ws(i),t.attrs[i])}function tn(e,t){const{style:s}=e,n={};for(const i in s)(ye(s[i])||t.style&&ye(t.style[i])||Br(i,e))&&(n[i]=s[i]);return n}function Kr(e,t){const s=tn(e,t);for(const n in e)if(ye(e[n])||ye(t[n])){const i=St.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;s[i]=e[n]}return s}function sn(e,t,s,n={},i={}){return typeof t=="function"&&(t=t(s!==void 0?s:e.custom,n,i)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(s!==void 0?s:e.custom,n,i)),t}function Yr(e){const t=g.useRef(null);return t.current===null&&(t.current=e()),t.current}const qt=e=>Array.isArray(e),Jo=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),Qo=e=>qt(e)?e[e.length-1]||0:e;function Gt(e){const t=ye(e)?e.get():e;return Jo(t)?t.toValue():t}function ea({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:s},n,i,o){const a={latestValues:ta(n,i,o,e),renderState:t()};return s&&(a.mount=l=>s(n,l,a)),a}const Zr=e=>(t,s)=>{const n=g.useContext(es),i=g.useContext(ts),o=()=>ea(e,t,n,i);return s?o():Yr(o)};function ta(e,t,s,n){const i={},o=n(e,{});for(const p in o)i[p]=Gt(o[p]);let{initial:a,animate:l}=e;const c=rs(e),d=Fr(e);t&&d&&!c&&e.inherit!==!1&&(a===void 0&&(a=t.initial),l===void 0&&(l=t.animate));let u=s?s.initial===!1:!1;u=u||a===!1;const h=u?l:a;return h&&typeof h!="boolean"&&!ns(h)&&(Array.isArray(h)?h:[h]).forEach(x=>{const C=sn(e,x);if(!C)return;const{transitionEnd:b,transition:P,...A}=C;for(const S in A){let w=A[S];if(Array.isArray(w)){const O=u?w.length-1:0;w=w[O]}w!==null&&(i[S]=w)}for(const S in b)i[S]=b[S]}),i}const oe=e=>e;class jn{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const s=this.order.indexOf(t);s!==-1&&(this.order.splice(s,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function sa(e){let t=new jn,s=new jn,n=0,i=!1,o=!1;const a=new WeakSet,l={schedule:(c,d=!1,u=!1)=>{const h=u&&i,p=h?t:s;return d&&a.add(c),p.add(c)&&h&&i&&(n=t.order.length),c},cancel:c=>{s.remove(c),a.delete(c)},process:c=>{if(i){o=!0;return}if(i=!0,[t,s]=[s,t],s.clear(),n=t.order.length,n)for(let d=0;d<n;d++){const u=t.order[d];u(c),a.has(u)&&(l.schedule(u),e())}i=!1,o&&(o=!1,l.process(c))}};return l}const It=["prepare","read","update","preRender","render","postRender"],na=40;function ra(e,t){let s=!1,n=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=It.reduce((h,p)=>(h[p]=sa(()=>s=!0),h),{}),a=h=>o[h].process(i),l=()=>{const h=performance.now();s=!1,i.delta=n?1e3/60:Math.max(Math.min(h-i.timestamp,na),1),i.timestamp=h,i.isProcessing=!0,It.forEach(a),i.isProcessing=!1,s&&t&&(n=!1,e(l))},c=()=>{s=!0,n=!0,i.isProcessing||e(l)};return{schedule:It.reduce((h,p)=>{const x=o[p];return h[p]=(C,b=!1,P=!1)=>(s||c(),x.schedule(C,b,P)),h},{}),cancel:h=>It.forEach(p=>o[p].cancel(h)),state:i,steps:o}}const{schedule:ne,cancel:Ve,state:he,steps:cs}=ra(typeof requestAnimationFrame<"u"?requestAnimationFrame:oe,!0),ia={useVisualState:Zr({scrapeMotionValuesFromProps:Kr,createRenderState:_r,onMount:(e,t,{renderState:s,latestValues:n})=>{ne.read(()=>{try{s.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{s.dimensions={x:0,y:0,width:0,height:0}}}),ne.render(()=>{Qs(s,n,{enableHardwareAcceleration:!1},en(t.tagName),e.transformTemplate),Xr(t,s)})}})},oa={useVisualState:Zr({scrapeMotionValuesFromProps:tn,createRenderState:Js})};function aa(e,{forwardMotionProps:t=!1},s,n){return{...Ys(e)?ia:oa,preloadedFeatures:s,useRender:Zo(t),createVisualElement:n,Component:e}}function Me(e,t,s,n={passive:!0}){return e.addEventListener(t,s,n),()=>e.removeEventListener(t,s)}const Jr=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function os(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const la=e=>t=>Jr(t)&&e(t,os(t));function Re(e,t,s,n){return Me(e,t,la(s),n)}const ca=(e,t)=>s=>t(e(s)),Fe=(...e)=>e.reduce(ca);function Qr(e){let t=null;return()=>{const s=()=>{t=null};return t===null?(t=e,s):!1}}const Nn=Qr("dragHorizontal"),Sn=Qr("dragVertical");function ei(e){let t=!1;if(e==="y")t=Sn();else if(e==="x")t=Nn();else{const s=Nn(),n=Sn();s&&n?t=()=>{s(),n()}:(s&&s(),n&&n())}return t}function ti(){const e=ei(!0);return e?(e(),!1):!0}class Oe{constructor(t){this.isMounted=!1,this.node=t}update(){}}function Cn(e,t){const s="pointer"+(t?"enter":"leave"),n="onHover"+(t?"Start":"End"),i=(o,a)=>{if(o.pointerType==="touch"||ti())return;const l=e.getProps();e.animationState&&l.whileHover&&e.animationState.setActive("whileHover",t),l[n]&&ne.update(()=>l[n](o,a))};return Re(e.current,s,i,{passive:!e.getProps()[n]})}class da extends Oe{mount(){this.unmount=Fe(Cn(this.node,!0),Cn(this.node,!1))}unmount(){}}class ua extends Oe{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Fe(Me(this.node.current,"focus",()=>this.onFocus()),Me(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const si=(e,t)=>t?e===t?!0:si(e,t.parentElement):!1;function ds(e,t){if(!t)return;const s=new PointerEvent("pointer"+e);t(s,os(s))}class ha extends Oe{constructor(){super(...arguments),this.removeStartListeners=oe,this.removeEndListeners=oe,this.removeAccessibleListeners=oe,this.startPointerPress=(t,s)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),o=Re(window,"pointerup",(l,c)=>{if(!this.checkPressEnd())return;const{onTap:d,onTapCancel:u,globalTapTarget:h}=this.node.getProps();ne.update(()=>{!h&&!si(this.node.current,l.target)?u&&u(l,c):d&&d(l,c)})},{passive:!(n.onTap||n.onPointerUp)}),a=Re(window,"pointercancel",(l,c)=>this.cancelPress(l,c),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=Fe(o,a),this.startPress(t,s)},this.startAccessiblePress=()=>{const t=o=>{if(o.key!=="Enter"||this.isPressing)return;const a=l=>{l.key!=="Enter"||!this.checkPressEnd()||ds("up",(c,d)=>{const{onTap:u}=this.node.getProps();u&&ne.update(()=>u(c,d))})};this.removeEndListeners(),this.removeEndListeners=Me(this.node.current,"keyup",a),ds("down",(l,c)=>{this.startPress(l,c)})},s=Me(this.node.current,"keydown",t),n=()=>{this.isPressing&&ds("cancel",(o,a)=>this.cancelPress(o,a))},i=Me(this.node.current,"blur",n);this.removeAccessibleListeners=Fe(s,i)}}startPress(t,s){this.isPressing=!0;const{onTapStart:n,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&ne.update(()=>n(t,s))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!ti()}cancelPress(t,s){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&ne.update(()=>n(t,s))}mount(){const t=this.node.getProps(),s=Re(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),n=Me(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Fe(s,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Rs=new WeakMap,us=new WeakMap,fa=e=>{const t=Rs.get(e.target);t&&t(e)},ma=e=>{e.forEach(fa)};function pa({root:e,...t}){const s=e||document;us.has(s)||us.set(s,{});const n=us.get(s),i=JSON.stringify(t);return n[i]||(n[i]=new IntersectionObserver(ma,{root:e,...t})),n[i]}function ga(e,t,s){const n=pa(t);return Rs.set(e,s),n.observe(e),()=>{Rs.delete(e),n.unobserve(e)}}const xa={some:0,all:1};class ya extends Oe{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:s,margin:n,amount:i="some",once:o}=t,a={root:s?s.current:void 0,rootMargin:n,threshold:typeof i=="number"?i:xa[i]},l=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,o&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),p=d?u:h;p&&p(c)};return ga(this.node.current,a,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:s}=this.node;["amount","margin","root"].some(ba(t,s))&&this.startObserver()}unmount(){}}function ba({viewport:e={}},{viewport:t={}}={}){return s=>e[s]!==t[s]}const va={inView:{Feature:ya},tap:{Feature:ha},focus:{Feature:ua},hover:{Feature:da}};function ni(e,t){if(!Array.isArray(t))return!1;const s=t.length;if(s!==e.length)return!1;for(let n=0;n<s;n++)if(t[n]!==e[n])return!1;return!0}function wa(e){const t={};return e.values.forEach((s,n)=>t[n]=s.get()),t}function ja(e){const t={};return e.values.forEach((s,n)=>t[n]=s.getVelocity()),t}function as(e,t,s){const n=e.getProps();return sn(n,t,s!==void 0?s:n.custom,wa(e),ja(e))}let nn=oe;const We=e=>e*1e3,Ae=e=>e/1e3,Na={current:!1},ri=e=>Array.isArray(e)&&typeof e[0]=="number";function ii(e){return!!(!e||typeof e=="string"&&oi[e]||ri(e)||Array.isArray(e)&&e.every(ii))}const pt=([e,t,s,n])=>`cubic-bezier(${e}, ${t}, ${s}, ${n})`,oi={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:pt([0,.65,.55,1]),circOut:pt([.55,0,1,.45]),backIn:pt([.31,.01,.66,-.59]),backOut:pt([.33,1.53,.69,.99])};function ai(e){if(e)return ri(e)?pt(e):Array.isArray(e)?e.map(ai):oi[e]}function Sa(e,t,s,{delay:n=0,duration:i,repeat:o=0,repeatType:a="loop",ease:l,times:c}={}){const d={[t]:s};c&&(d.offset=c);const u=ai(l);return Array.isArray(u)&&(d.easing=u),e.animate(d,{delay:n,duration:i,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:o+1,direction:a==="reverse"?"alternate":"normal"})}function Ca(e,{repeat:t,repeatType:s="loop"}){const n=t&&s!=="loop"&&t%2===1?0:e.length-1;return e[n]}const li=(e,t,s)=>(((1-3*s+3*t)*e+(3*s-6*t))*e+3*t)*e,Ta=1e-7,Pa=12;function ka(e,t,s,n,i){let o,a,l=0;do a=t+(s-t)/2,o=li(a,n,i)-e,o>0?s=a:t=a;while(Math.abs(o)>Ta&&++l<Pa);return a}function Pt(e,t,s,n){if(e===t&&s===n)return oe;const i=o=>ka(o,0,1,e,s);return o=>o===0||o===1?o:li(i(o),t,n)}const Ma=Pt(.42,0,1,1),Ra=Pt(0,0,.58,1),ci=Pt(.42,0,.58,1),Aa=e=>Array.isArray(e)&&typeof e[0]!="number",di=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,ui=e=>t=>1-e(1-t),rn=e=>1-Math.sin(Math.acos(e)),hi=ui(rn),Va=di(rn),fi=Pt(.33,1.53,.69,.99),on=ui(fi),Da=di(on),Ea=e=>(e*=2)<1?.5*on(e):.5*(2-Math.pow(2,-10*(e-1))),La={linear:oe,easeIn:Ma,easeInOut:ci,easeOut:Ra,circIn:rn,circInOut:Va,circOut:hi,backIn:on,backInOut:Da,backOut:fi,anticipate:Ea},Tn=e=>{if(Array.isArray(e)){nn(e.length===4);const[t,s,n,i]=e;return Pt(t,s,n,i)}else if(typeof e=="string")return La[e];return e},an=(e,t)=>s=>!!(Ct(s)&&Io.test(s)&&s.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(s,t)),mi=(e,t,s)=>n=>{if(!Ct(n))return n;const[i,o,a,l]=n.match(is);return{[e]:parseFloat(i),[t]:parseFloat(o),[s]:parseFloat(a),alpha:l!==void 0?parseFloat(l):1}},Fa=e=>Ie(0,255,e),hs={...Ke,transform:e=>Math.round(Fa(e))},_e={test:an("rgb","red"),parse:mi("red","green","blue"),transform:({red:e,green:t,blue:s,alpha:n=1})=>"rgba("+hs.transform(e)+", "+hs.transform(t)+", "+hs.transform(s)+", "+yt(xt.transform(n))+")"};function Ia(e){let t="",s="",n="",i="";return e.length>5?(t=e.substring(1,3),s=e.substring(3,5),n=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),s=e.substring(2,3),n=e.substring(3,4),i=e.substring(4,5),t+=t,s+=s,n+=n,i+=i),{red:parseInt(t,16),green:parseInt(s,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}}const As={test:an("#"),parse:Ia,transform:_e.transform},nt={test:an("hsl","hue"),parse:mi("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:s,alpha:n=1})=>"hsla("+Math.round(e)+", "+ke.transform(yt(t))+", "+ke.transform(yt(s))+", "+yt(xt.transform(n))+")"},me={test:e=>_e.test(e)||As.test(e)||nt.test(e),parse:e=>_e.test(e)?_e.parse(e):nt.test(e)?nt.parse(e):As.parse(e),transform:e=>Ct(e)?e:e.hasOwnProperty("red")?_e.transform(e):nt.transform(e)},ie=(e,t,s)=>-s*e+s*t+e;function fs(e,t,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?e+(t-e)*6*s:s<1/2?t:s<2/3?e+(t-e)*(2/3-s)*6:e}function Ba({hue:e,saturation:t,lightness:s,alpha:n}){e/=360,t/=100,s/=100;let i=0,o=0,a=0;if(!t)i=o=a=s;else{const l=s<.5?s*(1+t):s+t-s*t,c=2*s-l;i=fs(c,l,e+1/3),o=fs(c,l,e),a=fs(c,l,e-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(a*255),alpha:n}}const ms=(e,t,s)=>{const n=e*e;return Math.sqrt(Math.max(0,s*(t*t-n)+n))},Oa=[As,_e,nt],za=e=>Oa.find(t=>t.test(e));function Pn(e){const t=za(e);let s=t.parse(e);return t===nt&&(s=Ba(s)),s}const pi=(e,t)=>{const s=Pn(e),n=Pn(t),i={...s};return o=>(i.red=ms(s.red,n.red,o),i.green=ms(s.green,n.green,o),i.blue=ms(s.blue,n.blue,o),i.alpha=ie(s.alpha,n.alpha,o),_e.transform(i))};function $a(e){var t,s;return isNaN(e)&&Ct(e)&&(((t=e.match(is))===null||t===void 0?void 0:t.length)||0)+(((s=e.match($r))===null||s===void 0?void 0:s.length)||0)>0}const gi={regex:Lo,countKey:"Vars",token:"${v}",parse:oe},xi={regex:$r,countKey:"Colors",token:"${c}",parse:me.parse},yi={regex:is,countKey:"Numbers",token:"${n}",parse:Ke.parse};function ps(e,{regex:t,countKey:s,token:n,parse:i}){const o=e.tokenised.match(t);o&&(e["num"+s]=o.length,e.tokenised=e.tokenised.replace(t,n),e.values.push(...o.map(i)))}function Xt(e){const t=e.toString(),s={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return s.value.includes("var(--")&&ps(s,gi),ps(s,xi),ps(s,yi),s}function bi(e){return Xt(e).values}function vi(e){const{values:t,numColors:s,numVars:n,tokenised:i}=Xt(e),o=t.length;return a=>{let l=i;for(let c=0;c<o;c++)c<n?l=l.replace(gi.token,a[c]):c<n+s?l=l.replace(xi.token,me.transform(a[c])):l=l.replace(yi.token,yt(a[c]));return l}}const Ua=e=>typeof e=="number"?0:e;function Ga(e){const t=bi(e);return vi(e)(t.map(Ua))}const Be={test:$a,parse:bi,createTransformer:vi,getAnimatableNone:Ga},wi=(e,t)=>s=>`${s>0?t:e}`;function ji(e,t){return typeof e=="number"?s=>ie(e,t,s):me.test(e)?pi(e,t):e.startsWith("var(")?wi(e,t):Si(e,t)}const Ni=(e,t)=>{const s=[...e],n=s.length,i=e.map((o,a)=>ji(o,t[a]));return o=>{for(let a=0;a<n;a++)s[a]=i[a](o);return s}},Ha=(e,t)=>{const s={...e,...t},n={};for(const i in s)e[i]!==void 0&&t[i]!==void 0&&(n[i]=ji(e[i],t[i]));return i=>{for(const o in n)s[o]=n[o](i);return s}},Si=(e,t)=>{const s=Be.createTransformer(t),n=Xt(e),i=Xt(t);return n.numVars===i.numVars&&n.numColors===i.numColors&&n.numNumbers>=i.numNumbers?Fe(Ni(n.values,i.values),s):wi(e,t)},Nt=(e,t,s)=>{const n=t-e;return n===0?1:(s-e)/n},kn=(e,t)=>s=>ie(e,t,s);function _a(e){return typeof e=="number"?kn:typeof e=="string"?me.test(e)?pi:Si:Array.isArray(e)?Ni:typeof e=="object"?Ha:kn}function Wa(e,t,s){const n=[],i=s||_a(e[0]),o=e.length-1;for(let a=0;a<o;a++){let l=i(e[a],e[a+1]);if(t){const c=Array.isArray(t)?t[a]||oe:t;l=Fe(c,l)}n.push(l)}return n}function Ci(e,t,{clamp:s=!0,ease:n,mixer:i}={}){const o=e.length;if(nn(o===t.length),o===1)return()=>t[0];e[0]>e[o-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=Wa(t,n,i),l=a.length,c=d=>{let u=0;if(l>1)for(;u<e.length-2&&!(d<e[u+1]);u++);const h=Nt(e[u],e[u+1],d);return a[u](h)};return s?d=>c(Ie(e[0],e[o-1],d)):c}function qa(e,t){const s=e[e.length-1];for(let n=1;n<=t;n++){const i=Nt(0,t,n);e.push(ie(s,1,i))}}function Xa(e){const t=[0];return qa(t,e.length-1),t}function Ka(e,t){return e.map(s=>s*t)}function Ya(e,t){return e.map(()=>t||ci).splice(0,e.length-1)}function Kt({duration:e=300,keyframes:t,times:s,ease:n="easeInOut"}){const i=Aa(n)?n.map(Tn):Tn(n),o={done:!1,value:t[0]},a=Ka(s&&s.length===t.length?s:Xa(t),e),l=Ci(a,t,{ease:Array.isArray(i)?i:Ya(t,i)});return{calculatedDuration:e,next:c=>(o.value=l(c),o.done=c>=e,o)}}function Ti(e,t){return t?e*(1e3/t):0}const Za=5;function Pi(e,t,s){const n=Math.max(t-Za,0);return Ti(s-e(n),t-n)}const gs=.001,Ja=.01,Qa=10,el=.05,tl=1;function sl({duration:e=800,bounce:t=.25,velocity:s=0,mass:n=1}){let i,o,a=1-t;a=Ie(el,tl,a),e=Ie(Ja,Qa,Ae(e)),a<1?(i=d=>{const u=d*a,h=u*e,p=u-s,x=Vs(d,a),C=Math.exp(-h);return gs-p/x*C},o=d=>{const h=d*a*e,p=h*s+s,x=Math.pow(a,2)*Math.pow(d,2)*e,C=Math.exp(-h),b=Vs(Math.pow(d,2),a);return(-i(d)+gs>0?-1:1)*((p-x)*C)/b}):(i=d=>{const u=Math.exp(-d*e),h=(d-s)*e+1;return-gs+u*h},o=d=>{const u=Math.exp(-d*e),h=(s-d)*(e*e);return u*h});const l=5/e,c=rl(i,o,l);if(e=We(e),isNaN(c))return{stiffness:100,damping:10,duration:e};{const d=Math.pow(c,2)*n;return{stiffness:d,damping:a*2*Math.sqrt(n*d),duration:e}}}const nl=12;function rl(e,t,s){let n=s;for(let i=1;i<nl;i++)n=n-e(n)/t(n);return n}function Vs(e,t){return e*Math.sqrt(1-t*t)}const il=["duration","bounce"],ol=["stiffness","damping","mass"];function Mn(e,t){return t.some(s=>e[s]!==void 0)}function al(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!Mn(e,ol)&&Mn(e,il)){const s=sl(e);t={...t,...s,mass:1},t.isResolvedFromDuration=!0}return t}function ki({keyframes:e,restDelta:t,restSpeed:s,...n}){const i=e[0],o=e[e.length-1],a={done:!1,value:i},{stiffness:l,damping:c,mass:d,duration:u,velocity:h,isResolvedFromDuration:p}=al({...n,velocity:-Ae(n.velocity||0)}),x=h||0,C=c/(2*Math.sqrt(l*d)),b=o-i,P=Ae(Math.sqrt(l/d)),A=Math.abs(b)<5;s||(s=A?.01:2),t||(t=A?.005:.5);let S;if(C<1){const w=Vs(P,C);S=O=>{const B=Math.exp(-C*P*O);return o-B*((x+C*P*b)/w*Math.sin(w*O)+b*Math.cos(w*O))}}else if(C===1)S=w=>o-Math.exp(-P*w)*(b+(x+P*b)*w);else{const w=P*Math.sqrt(C*C-1);S=O=>{const B=Math.exp(-C*P*O),V=Math.min(w*O,300);return o-B*((x+C*P*b)*Math.sinh(V)+w*b*Math.cosh(V))/w}}return{calculatedDuration:p&&u||null,next:w=>{const O=S(w);if(p)a.done=w>=u;else{let B=x;w!==0&&(C<1?B=Pi(S,w,O):B=0);const V=Math.abs(B)<=s,U=Math.abs(o-O)<=t;a.done=V&&U}return a.value=a.done?o:O,a}}}function Rn({keyframes:e,velocity:t=0,power:s=.8,timeConstant:n=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:a,min:l,max:c,restDelta:d=.5,restSpeed:u}){const h=e[0],p={done:!1,value:h},x=D=>l!==void 0&&D<l||c!==void 0&&D>c,C=D=>l===void 0?c:c===void 0||Math.abs(l-D)<Math.abs(c-D)?l:c;let b=s*t;const P=h+b,A=a===void 0?P:a(P);A!==P&&(b=A-h);const S=D=>-b*Math.exp(-D/n),w=D=>A+S(D),O=D=>{const v=S(D),N=w(D);p.done=Math.abs(v)<=d,p.value=p.done?A:N};let B,V;const U=D=>{x(p.value)&&(B=D,V=ki({keyframes:[p.value,C(p.value)],velocity:Pi(w,D,p.value),damping:i,stiffness:o,restDelta:d,restSpeed:u}))};return U(0),{calculatedDuration:null,next:D=>{let v=!1;return!V&&B===void 0&&(v=!0,O(D),U(D)),B!==void 0&&D>B?V.next(D-B):(!v&&O(D),p)}}}const ll=e=>{const t=({timestamp:s})=>e(s);return{start:()=>ne.update(t,!0),stop:()=>Ve(t),now:()=>he.isProcessing?he.timestamp:performance.now()}},An=2e4;function Vn(e){let t=0;const s=50;let n=e.next(t);for(;!n.done&&t<An;)t+=s,n=e.next(t);return t>=An?1/0:t}const cl={decay:Rn,inertia:Rn,tween:Kt,keyframes:Kt,spring:ki};function Yt({autoplay:e=!0,delay:t=0,driver:s=ll,keyframes:n,type:i="keyframes",repeat:o=0,repeatDelay:a=0,repeatType:l="loop",onPlay:c,onStop:d,onComplete:u,onUpdate:h,...p}){let x=1,C=!1,b,P;const A=()=>{P=new Promise(f=>{b=f})};A();let S;const w=cl[i]||Kt;let O;w!==Kt&&typeof n[0]!="number"&&(O=Ci([0,100],n,{clamp:!1}),n=[0,100]);const B=w({...p,keyframes:n});let V;l==="mirror"&&(V=w({...p,keyframes:[...n].reverse(),velocity:-(p.velocity||0)}));let U="idle",D=null,v=null,N=null;B.calculatedDuration===null&&o&&(B.calculatedDuration=Vn(B));const{calculatedDuration:z}=B;let M=1/0,j=1/0;z!==null&&(M=z+a,j=M*(o+1)-a);let k=0;const m=f=>{if(v===null)return;x>0&&(v=Math.min(v,f)),x<0&&(v=Math.min(f-j/x,v)),D!==null?k=D:k=Math.round(f-v)*x;const T=k-t*(x>=0?1:-1),R=x>=0?T<0:T>j;k=Math.max(T,0),U==="finished"&&D===null&&(k=j);let E=k,F=B;if(o){const te=Math.min(k,j)/M;let L=Math.floor(te),W=te%1;!W&&te>=1&&(W=1),W===1&&L--,L=Math.min(L,o+1),!!(L%2)&&(l==="reverse"?(W=1-W,a&&(W-=a/M)):l==="mirror"&&(F=V)),E=Ie(0,1,W)*M}const $=R?{done:!1,value:n[0]}:F.next(E);O&&($.value=O($.value));let{done:X}=$;!R&&z!==null&&(X=x>=0?k>=j:k<=0);const Y=D===null&&(U==="finished"||U==="running"&&X);return h&&h($.value),Y&&K(),$},I=()=>{S&&S.stop(),S=void 0},H=()=>{U="idle",I(),b(),A(),v=N=null},K=()=>{U="finished",u&&u(),I(),b()},q=()=>{if(C)return;S||(S=s(m));const f=S.now();c&&c(),D!==null?v=f-D:(!v||U==="finished")&&(v=f),U==="finished"&&A(),N=v,D=null,U="running",S.start()};e&&q();const y={then(f,T){return P.then(f,T)},get time(){return Ae(k)},set time(f){f=We(f),k=f,D!==null||!S||x===0?D=f:v=S.now()-f/x},get duration(){const f=B.calculatedDuration===null?Vn(B):B.calculatedDuration;return Ae(f)},get speed(){return x},set speed(f){f===x||!S||(x=f,y.time=Ae(k))},get state(){return U},play:q,pause:()=>{U="paused",D=k},stop:()=>{C=!0,U!=="idle"&&(U="idle",d&&d(),H())},cancel:()=>{N!==null&&m(N),H()},complete:()=>{U="finished"},sample:f=>(v=0,m(f))};return y}function dl(e){let t;return()=>(t===void 0&&(t=e()),t)}const ul=dl(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),hl=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Bt=10,fl=2e4,ml=(e,t)=>t.type==="spring"||e==="backgroundColor"||!ii(t.ease);function pl(e,t,{onUpdate:s,onComplete:n,...i}){if(!(ul()&&hl.has(t)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let a=!1,l,c,d=!1;const u=()=>{c=new Promise(w=>{l=w})};u();let{keyframes:h,duration:p=300,ease:x,times:C}=i;if(ml(t,i)){const w=Yt({...i,repeat:0,delay:0});let O={done:!1,value:h[0]};const B=[];let V=0;for(;!O.done&&V<fl;)O=w.sample(V),B.push(O.value),V+=Bt;C=void 0,h=B,p=V-Bt,x="linear"}const b=Sa(e.owner.current,t,h,{...i,duration:p,ease:x,times:C}),P=()=>{d=!1,b.cancel()},A=()=>{d=!0,ne.update(P),l(),u()};return b.onfinish=()=>{d||(e.set(Ca(h,i)),n&&n(),A())},{then(w,O){return c.then(w,O)},attachTimeline(w){return b.timeline=w,b.onfinish=null,oe},get time(){return Ae(b.currentTime||0)},set time(w){b.currentTime=We(w)},get speed(){return b.playbackRate},set speed(w){b.playbackRate=w},get duration(){return Ae(p)},play:()=>{a||(b.play(),Ve(P))},pause:()=>b.pause(),stop:()=>{if(a=!0,b.playState==="idle")return;const{currentTime:w}=b;if(w){const O=Yt({...i,autoplay:!1});e.setWithVelocity(O.sample(w-Bt).value,O.sample(w).value,Bt)}A()},complete:()=>{d||b.finish()},cancel:A}}function gl({keyframes:e,delay:t,onUpdate:s,onComplete:n}){const i=()=>(s&&s(e[e.length-1]),n&&n(),{time:0,speed:1,duration:0,play:oe,pause:oe,stop:oe,then:o=>(o(),Promise.resolve()),cancel:oe,complete:oe});return t?Yt({keyframes:[0,1],duration:0,delay:t,onComplete:i}):i()}const xl={type:"spring",stiffness:500,damping:25,restSpeed:10},yl=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),bl={type:"keyframes",duration:.8},vl={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},wl=(e,{keyframes:t})=>t.length>2?bl:Xe.has(e)?e.startsWith("scale")?yl(t[1]):xl:vl,Ds=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Be.test(t)||t==="0")&&!t.startsWith("url(")),jl=new Set(["brightness","contrast","saturate","opacity"]);function Nl(e){const[t,s]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=s.match(is)||[];if(!n)return e;const i=s.replace(n,"");let o=jl.has(t)?1:0;return n!==s&&(o*=100),t+"("+o+i+")"}const Sl=/([a-z-]*)\(.*?\)/g,Es={...Be,getAnimatableNone:e=>{const t=e.match(Sl);return t?t.map(Nl).join(" "):e}},Cl={...Ur,color:me,backgroundColor:me,outlineColor:me,fill:me,stroke:me,borderColor:me,borderTopColor:me,borderRightColor:me,borderBottomColor:me,borderLeftColor:me,filter:Es,WebkitFilter:Es},ln=e=>Cl[e];function Mi(e,t){let s=ln(e);return s!==Es&&(s=Be),s.getAnimatableNone?s.getAnimatableNone(t):void 0}const Ri=e=>/^0[^.\s]+$/.test(e);function Tl(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||Ri(e)}function Pl(e,t,s,n){const i=Ds(t,s);let o;Array.isArray(s)?o=[...s]:o=[null,s];const a=n.from!==void 0?n.from:e.get();let l;const c=[];for(let d=0;d<o.length;d++)o[d]===null&&(o[d]=d===0?a:o[d-1]),Tl(o[d])&&c.push(d),typeof o[d]=="string"&&o[d]!=="none"&&o[d]!=="0"&&(l=o[d]);if(i&&c.length&&l)for(let d=0;d<c.length;d++){const u=c[d];o[u]=Mi(t,l)}return o}function kl({when:e,delay:t,delayChildren:s,staggerChildren:n,staggerDirection:i,repeat:o,repeatType:a,repeatDelay:l,from:c,elapsed:d,...u}){return!!Object.keys(u).length}function cn(e,t){return e[t]||e.default||e}const Ml={skipAnimations:!1},dn=(e,t,s,n={})=>i=>{const o=cn(n,e)||{},a=o.delay||n.delay||0;let{elapsed:l=0}=n;l=l-We(a);const c=Pl(t,e,s,o),d=c[0],u=c[c.length-1],h=Ds(e,d),p=Ds(e,u);let x={keyframes:c,velocity:t.getVelocity(),ease:"easeOut",...o,delay:-l,onUpdate:C=>{t.set(C),o.onUpdate&&o.onUpdate(C)},onComplete:()=>{i(),o.onComplete&&o.onComplete()}};if(kl(o)||(x={...x,...wl(e,x)}),x.duration&&(x.duration=We(x.duration)),x.repeatDelay&&(x.repeatDelay=We(x.repeatDelay)),!h||!p||Na.current||o.type===!1||Ml.skipAnimations)return gl(x);if(!n.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const C=pl(t,e,x);if(C)return C}return Yt(x)};function Zt(e){return!!(ye(e)&&e.add)}const Ai=e=>/^\-?\d*\.?\d+$/.test(e);function un(e,t){e.indexOf(t)===-1&&e.push(t)}function hn(e,t){const s=e.indexOf(t);s>-1&&e.splice(s,1)}class fn{constructor(){this.subscriptions=[]}add(t){return un(this.subscriptions,t),()=>hn(this.subscriptions,t)}notify(t,s,n){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,s,n);else for(let o=0;o<i;o++){const a=this.subscriptions[o];a&&a(t,s,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Rl=e=>!isNaN(parseFloat(e));class Al{constructor(t,s={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(n,i=!0)=>{this.prev=this.current,this.current=n;const{delta:o,timestamp:a}=he;this.lastUpdated!==a&&(this.timeDelta=o,this.lastUpdated=a,ne.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>ne.postRender(this.velocityCheck),this.velocityCheck=({timestamp:n})=>{n!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=Rl(this.current),this.owner=s.owner}onChange(t){return this.on("change",t)}on(t,s){this.events[t]||(this.events[t]=new fn);const n=this.events[t].add(s);return t==="change"?()=>{n(),ne.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,s){this.passiveEffect=t,this.stopPassiveEffect=s}set(t,s=!0){!s||!this.passiveEffect?this.updateAndNotify(t,s):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,s,n){this.set(s),this.prev=t,this.timeDelta=n}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?Ti(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=t(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ot(e,t){return new Al(e,t)}const Vi=e=>t=>t.test(e),Vl={test:e=>e==="auto",parse:e=>e},Di=[Ke,J,ke,Ee,Oo,Bo,Vl],ut=e=>Di.find(Vi(e)),Dl=[...Di,me,Be],El=e=>Dl.find(Vi(e));function Ll(e,t,s){e.hasValue(t)?e.getValue(t).set(s):e.addValue(t,ot(s))}function Fl(e,t){const s=as(e,t);let{transitionEnd:n={},transition:i={},...o}=s?e.makeTargetAnimatable(s,!1):{};o={...o,...n};for(const a in o){const l=Qo(o[a]);Ll(e,a,l)}}function Il(e,t,s){var n,i;const o=Object.keys(t).filter(l=>!e.hasValue(l)),a=o.length;if(a)for(let l=0;l<a;l++){const c=o[l],d=t[c];let u=null;Array.isArray(d)&&(u=d[0]),u===null&&(u=(i=(n=s[c])!==null&&n!==void 0?n:e.readValue(c))!==null&&i!==void 0?i:t[c]),u!=null&&(typeof u=="string"&&(Ai(u)||Ri(u))?u=parseFloat(u):!El(u)&&Be.test(d)&&(u=Mi(c,d)),e.addValue(c,ot(u,{owner:e})),s[c]===void 0&&(s[c]=u),u!==null&&e.setBaseTarget(c,u))}}function Bl(e,t){return t?(t[e]||t.default||t).from:void 0}function Ol(e,t,s){const n={};for(const i in e){const o=Bl(i,t);if(o!==void 0)n[i]=o;else{const a=s.getValue(i);a&&(n[i]=a.get())}}return n}function zl({protectedKeys:e,needsAnimating:t},s){const n=e.hasOwnProperty(s)&&t[s]!==!0;return t[s]=!1,n}function $l(e,t){const s=e.get();if(Array.isArray(t)){for(let n=0;n<t.length;n++)if(t[n]!==s)return!0}else return s!==t}function Ei(e,t,{delay:s=0,transitionOverride:n,type:i}={}){let{transition:o=e.getDefaultTransition(),transitionEnd:a,...l}=e.makeTargetAnimatable(t);const c=e.getValue("willChange");n&&(o=n);const d=[],u=i&&e.animationState&&e.animationState.getState()[i];for(const h in l){const p=e.getValue(h),x=l[h];if(!p||x===void 0||u&&zl(u,h))continue;const C={delay:s,elapsed:0,...cn(o||{},h)};if(window.HandoffAppearAnimations){const A=e.getProps()[Lr];if(A){const S=window.HandoffAppearAnimations(A,h,p,ne);S!==null&&(C.elapsed=S,C.isHandoff=!0)}}let b=!C.isHandoff&&!$l(p,x);if(C.type==="spring"&&(p.getVelocity()||C.velocity)&&(b=!1),p.animation&&(b=!1),b)continue;p.start(dn(h,p,x,e.shouldReduceMotion&&Xe.has(h)?{type:!1}:C));const P=p.animation;Zt(c)&&(c.add(h),P.then(()=>c.remove(h))),d.push(P)}return a&&Promise.all(d).then(()=>{a&&Fl(e,a)}),d}function Ls(e,t,s={}){const n=as(e,t,s.custom);let{transition:i=e.getDefaultTransition()||{}}=n||{};s.transitionOverride&&(i=s.transitionOverride);const o=n?()=>Promise.all(Ei(e,n,s)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:d=0,staggerChildren:u,staggerDirection:h}=i;return Ul(e,t,d+c,u,h,s)}:()=>Promise.resolve(),{when:l}=i;if(l){const[c,d]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>d())}else return Promise.all([o(),a(s.delay)])}function Ul(e,t,s=0,n=0,i=1,o){const a=[],l=(e.variantChildren.size-1)*n,c=i===1?(d=0)=>d*n:(d=0)=>l-d*n;return Array.from(e.variantChildren).sort(Gl).forEach((d,u)=>{d.notify("AnimationStart",t),a.push(Ls(d,t,{...o,delay:s+c(u)}).then(()=>d.notify("AnimationComplete",t)))}),Promise.all(a)}function Gl(e,t){return e.sortNodePosition(t)}function Hl(e,t,s={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const i=t.map(o=>Ls(e,o,s));n=Promise.all(i)}else if(typeof t=="string")n=Ls(e,t,s);else{const i=typeof t=="function"?as(e,t,s.custom):t;n=Promise.all(Ei(e,i,s))}return n.then(()=>e.notify("AnimationComplete",t))}const _l=[...qs].reverse(),Wl=qs.length;function ql(e){return t=>Promise.all(t.map(({animation:s,options:n})=>Hl(e,s,n)))}function Xl(e){let t=ql(e);const s=Yl();let n=!0;const i=(c,d)=>{const u=as(e,d);if(u){const{transition:h,transitionEnd:p,...x}=u;c={...c,...x,...p}}return c};function o(c){t=c(e)}function a(c,d){const u=e.getProps(),h=e.getVariantContext(!0)||{},p=[],x=new Set;let C={},b=1/0;for(let A=0;A<Wl;A++){const S=_l[A],w=s[S],O=u[S]!==void 0?u[S]:h[S],B=wt(O),V=S===d?w.isActive:null;V===!1&&(b=A);let U=O===h[S]&&O!==u[S]&&B;if(U&&n&&e.manuallyAnimateOnMount&&(U=!1),w.protectedKeys={...C},!w.isActive&&V===null||!O&&!w.prevProp||ns(O)||typeof O=="boolean")continue;let v=Kl(w.prevProp,O)||S===d&&w.isActive&&!U&&B||A>b&&B,N=!1;const z=Array.isArray(O)?O:[O];let M=z.reduce(i,{});V===!1&&(M={});const{prevResolvedValues:j={}}=w,k={...j,...M},m=I=>{v=!0,x.has(I)&&(N=!0,x.delete(I)),w.needsAnimating[I]=!0};for(const I in k){const H=M[I],K=j[I];if(C.hasOwnProperty(I))continue;let q=!1;qt(H)&&qt(K)?q=!ni(H,K):q=H!==K,q?H!==void 0?m(I):x.add(I):H!==void 0&&x.has(I)?m(I):w.protectedKeys[I]=!0}w.prevProp=O,w.prevResolvedValues=M,w.isActive&&(C={...C,...M}),n&&e.blockInitialAnimation&&(v=!1),v&&(!U||N)&&p.push(...z.map(I=>({animation:I,options:{type:S,...c}})))}if(x.size){const A={};x.forEach(S=>{const w=e.getBaseTarget(S);w!==void 0&&(A[S]=w)}),p.push({animation:A})}let P=!!p.length;return n&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(P=!1),n=!1,P?t(p):Promise.resolve()}function l(c,d,u){var h;if(s[c].isActive===d)return Promise.resolve();(h=e.variantChildren)===null||h===void 0||h.forEach(x=>{var C;return(C=x.animationState)===null||C===void 0?void 0:C.setActive(c,d)}),s[c].isActive=d;const p=a(u,c);for(const x in s)s[x].protectedKeys={};return p}return{animateChanges:a,setActive:l,setAnimateFunction:o,getState:()=>s}}function Kl(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!ni(t,e):!1}function ze(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Yl(){return{animate:ze(!0),whileInView:ze(),whileHover:ze(),whileTap:ze(),whileDrag:ze(),whileFocus:ze(),exit:ze()}}class Zl extends Oe{constructor(t){super(t),t.animationState||(t.animationState=Xl(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),ns(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:s}=this.node.prevProps||{};t!==s&&this.updateAnimationControlsSubscription()}unmount(){}}let Jl=0;class Ql extends Oe{constructor(){super(...arguments),this.id=Jl++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:s,custom:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===i)return;const o=this.node.animationState.setActive("exit",!t,{custom:n??this.node.getProps().custom});s&&!t&&o.then(()=>s(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const ec={animation:{Feature:Zl},exit:{Feature:Ql}},Dn=(e,t)=>Math.abs(e-t);function tc(e,t){const s=Dn(e.x,t.x),n=Dn(e.y,t.y);return Math.sqrt(s**2+n**2)}class Li{constructor(t,s,{transformPagePoint:n,contextWindow:i,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=ys(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,x=tc(h.offset,{x:0,y:0})>=3;if(!p&&!x)return;const{point:C}=h,{timestamp:b}=he;this.history.push({...C,timestamp:b});const{onStart:P,onMove:A}=this.handlers;p||(P&&P(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),A&&A(this.lastMoveEvent,h)},this.handlePointerMove=(h,p)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=xs(p,this.transformPagePoint),ne.update(this.updatePoint,!0)},this.handlePointerUp=(h,p)=>{this.end();const{onEnd:x,onSessionEnd:C,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const P=ys(h.type==="pointercancel"?this.lastMoveEventInfo:xs(p,this.transformPagePoint),this.history);this.startEvent&&x&&x(h,P),C&&C(h,P)},!Jr(t))return;this.dragSnapToOrigin=o,this.handlers=s,this.transformPagePoint=n,this.contextWindow=i||window;const a=os(t),l=xs(a,this.transformPagePoint),{point:c}=l,{timestamp:d}=he;this.history=[{...c,timestamp:d}];const{onSessionStart:u}=s;u&&u(t,ys(l,this.history)),this.removeListeners=Fe(Re(this.contextWindow,"pointermove",this.handlePointerMove),Re(this.contextWindow,"pointerup",this.handlePointerUp),Re(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Ve(this.updatePoint)}}function xs(e,t){return t?{point:t(e.point)}:e}function En(e,t){return{x:e.x-t.x,y:e.y-t.y}}function ys({point:e},t){return{point:e,delta:En(e,Fi(t)),offset:En(e,sc(t)),velocity:nc(t,.1)}}function sc(e){return e[0]}function Fi(e){return e[e.length-1]}function nc(e,t){if(e.length<2)return{x:0,y:0};let s=e.length-1,n=null;const i=Fi(e);for(;s>=0&&(n=e[s],!(i.timestamp-n.timestamp>We(t)));)s--;if(!n)return{x:0,y:0};const o=Ae(i.timestamp-n.timestamp);if(o===0)return{x:0,y:0};const a={x:(i.x-n.x)/o,y:(i.y-n.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function we(e){return e.max-e.min}function Fs(e,t=0,s=.01){return Math.abs(e-t)<=s}function Ln(e,t,s,n=.5){e.origin=n,e.originPoint=ie(t.min,t.max,e.origin),e.scale=we(s)/we(t),(Fs(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=ie(s.min,s.max,e.origin)-e.originPoint,(Fs(e.translate)||isNaN(e.translate))&&(e.translate=0)}function bt(e,t,s,n){Ln(e.x,t.x,s.x,n?n.originX:void 0),Ln(e.y,t.y,s.y,n?n.originY:void 0)}function Fn(e,t,s){e.min=s.min+t.min,e.max=e.min+we(t)}function rc(e,t,s){Fn(e.x,t.x,s.x),Fn(e.y,t.y,s.y)}function In(e,t,s){e.min=t.min-s.min,e.max=e.min+we(t)}function vt(e,t,s){In(e.x,t.x,s.x),In(e.y,t.y,s.y)}function ic(e,{min:t,max:s},n){return t!==void 0&&e<t?e=n?ie(t,e,n.min):Math.max(e,t):s!==void 0&&e>s&&(e=n?ie(s,e,n.max):Math.min(e,s)),e}function Bn(e,t,s){return{min:t!==void 0?e.min+t:void 0,max:s!==void 0?e.max+s-(e.max-e.min):void 0}}function oc(e,{top:t,left:s,bottom:n,right:i}){return{x:Bn(e.x,s,i),y:Bn(e.y,t,n)}}function On(e,t){let s=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([s,n]=[n,s]),{min:s,max:n}}function ac(e,t){return{x:On(e.x,t.x),y:On(e.y,t.y)}}function lc(e,t){let s=.5;const n=we(e),i=we(t);return i>n?s=Nt(t.min,t.max-n,e.min):n>i&&(s=Nt(e.min,e.max-i,t.min)),Ie(0,1,s)}function cc(e,t){const s={};return t.min!==void 0&&(s.min=t.min-e.min),t.max!==void 0&&(s.max=t.max-e.min),s}const Is=.35;function dc(e=Is){return e===!1?e=0:e===!0&&(e=Is),{x:zn(e,"left","right"),y:zn(e,"top","bottom")}}function zn(e,t,s){return{min:$n(e,t),max:$n(e,s)}}function $n(e,t){return typeof e=="number"?e:e[t]||0}const Un=()=>({translate:0,scale:1,origin:0,originPoint:0}),rt=()=>({x:Un(),y:Un()}),Gn=()=>({min:0,max:0}),le=()=>({x:Gn(),y:Gn()});function Se(e){return[e("x"),e("y")]}function Ii({top:e,left:t,right:s,bottom:n}){return{x:{min:t,max:s},y:{min:e,max:n}}}function uc({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function hc(e,t){if(!t)return e;const s=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:s.y,left:s.x,bottom:n.y,right:n.x}}function bs(e){return e===void 0||e===1}function Bs({scale:e,scaleX:t,scaleY:s}){return!bs(e)||!bs(t)||!bs(s)}function Ue(e){return Bs(e)||Bi(e)||e.z||e.rotate||e.rotateX||e.rotateY}function Bi(e){return Hn(e.x)||Hn(e.y)}function Hn(e){return e&&e!=="0%"}function Jt(e,t,s){const n=e-s,i=t*n;return s+i}function _n(e,t,s,n,i){return i!==void 0&&(e=Jt(e,i,n)),Jt(e,s,n)+t}function Os(e,t=0,s=1,n,i){e.min=_n(e.min,t,s,n,i),e.max=_n(e.max,t,s,n,i)}function Oi(e,{x:t,y:s}){Os(e.x,t.translate,t.scale,t.originPoint),Os(e.y,s.translate,s.scale,s.originPoint)}function fc(e,t,s,n=!1){const i=s.length;if(!i)return;t.x=t.y=1;let o,a;for(let l=0;l<i;l++){o=s[l],a=o.projectionDelta;const c=o.instance;c&&c.style&&c.style.display==="contents"||(n&&o.options.layoutScroll&&o.scroll&&o!==o.root&&it(e,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,Oi(e,a)),n&&Ue(o.latestValues)&&it(e,o.latestValues))}t.x=Wn(t.x),t.y=Wn(t.y)}function Wn(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function Le(e,t){e.min=e.min+t,e.max=e.max+t}function qn(e,t,[s,n,i]){const o=t[i]!==void 0?t[i]:.5,a=ie(e.min,e.max,o);Os(e,t[s],t[n],a,t.scale)}const mc=["x","scaleX","originX"],pc=["y","scaleY","originY"];function it(e,t){qn(e.x,t,mc),qn(e.y,t,pc)}function zi(e,t){return Ii(hc(e.getBoundingClientRect(),t))}function gc(e,t,s){const n=zi(e,s),{scroll:i}=t;return i&&(Le(n.x,i.offset.x),Le(n.y,i.offset.y)),n}const $i=({current:e})=>e?e.ownerDocument.defaultView:null,xc=new WeakMap;class yc{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=le(),this.visualElement=t}start(t,{snapToCursor:s=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const i=u=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(os(u,"page").point)},o=(u,h)=>{const{drag:p,dragPropagation:x,onDragStart:C}=this.getProps();if(p&&!x&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=ei(p),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Se(P=>{let A=this.getAxisMotionValue(P).get()||0;if(ke.test(A)){const{projection:S}=this.visualElement;if(S&&S.layout){const w=S.layout.layoutBox[P];w&&(A=we(w)*(parseFloat(A)/100))}}this.originPoint[P]=A}),C&&ne.update(()=>C(u,h),!1,!0);const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},a=(u,h)=>{const{dragPropagation:p,dragDirectionLock:x,onDirectionLock:C,onDrag:b}=this.getProps();if(!p&&!this.openGlobalLock)return;const{offset:P}=h;if(x&&this.currentDirection===null){this.currentDirection=bc(P),this.currentDirection!==null&&C&&C(this.currentDirection);return}this.updateAxis("x",h.point,P),this.updateAxis("y",h.point,P),this.visualElement.render(),b&&b(u,h)},l=(u,h)=>this.stop(u,h),c=()=>Se(u=>{var h;return this.getAnimationState(u)==="paused"&&((h=this.getAxisMotionValue(u).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new Li(t,{onSessionStart:i,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,contextWindow:$i(this.visualElement)})}stop(t,s){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:i}=s;this.startAnimation(i);const{onDragEnd:o}=this.getProps();o&&ne.update(()=>o(t,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:s}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(t,s,n){const{drag:i}=this.getProps();if(!n||!Ot(t,i,this.currentDirection))return;const o=this.getAxisMotionValue(t);let a=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(a=ic(a,this.constraints[t],this.elastic[t])),o.set(a)}resolveConstraints(){var t;const{dragConstraints:s,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,o=this.constraints;s&&st(s)?this.constraints||(this.constraints=this.resolveRefConstraints()):s&&i?this.constraints=oc(i.layoutBox,s):this.constraints=!1,this.elastic=dc(n),o!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Se(a=>{this.getAxisMotionValue(a)&&(this.constraints[a]=cc(i.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:s}=this.getProps();if(!t||!st(t))return!1;const n=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=gc(n,i.root,this.visualElement.getTransformPagePoint());let a=ac(i.layout.layoutBox,o);if(s){const l=s(uc(a));this.hasMutatedConstraints=!!l,l&&(a=Ii(l))}return a}startAnimation(t){const{drag:s,dragMomentum:n,dragElastic:i,dragTransition:o,dragSnapToOrigin:a,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},d=Se(u=>{if(!Ot(u,s,this.currentDirection))return;let h=c&&c[u]||{};a&&(h={min:0,max:0});const p=i?200:1e6,x=i?40:1e7,C={type:"inertia",velocity:n?t[u]:0,bounceStiffness:p,bounceDamping:x,timeConstant:750,restDelta:1,restSpeed:10,...o,...h};return this.startAxisValueAnimation(u,C)});return Promise.all(d).then(l)}startAxisValueAnimation(t,s){const n=this.getAxisMotionValue(t);return n.start(dn(t,n,0,s))}stopAnimation(){Se(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Se(t=>{var s;return(s=this.getAxisMotionValue(t).animation)===null||s===void 0?void 0:s.pause()})}getAnimationState(t){var s;return(s=this.getAxisMotionValue(t).animation)===null||s===void 0?void 0:s.state}getAxisMotionValue(t){const s="_drag"+t.toUpperCase(),n=this.visualElement.getProps(),i=n[s];return i||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){Se(s=>{const{drag:n}=this.getProps();if(!Ot(s,n,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(s);if(i&&i.layout){const{min:a,max:l}=i.layout.layoutBox[s];o.set(t[s]-ie(a,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:s}=this.getProps(),{projection:n}=this.visualElement;if(!st(s)||!n||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Se(a=>{const l=this.getAxisMotionValue(a);if(l){const c=l.get();i[a]=lc({min:c,max:c},this.constraints[a])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Se(a=>{if(!Ot(a,t,null))return;const l=this.getAxisMotionValue(a),{min:c,max:d}=this.constraints[a];l.set(ie(c,d,i[a]))})}addListeners(){if(!this.visualElement.current)return;xc.set(this.visualElement,this);const t=this.visualElement.current,s=Re(t,"pointerdown",c=>{const{drag:d,dragListener:u=!0}=this.getProps();d&&u&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();st(c)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,o=i.addEventListener("measure",n);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),n();const a=Me(window,"resize",()=>this.scalePositionWithinConstraints()),l=i.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(Se(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=c[u].translate,h.set(h.get()+c[u].translate))}),this.visualElement.render())});return()=>{a(),s(),o(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:a=Is,dragMomentum:l=!0}=t;return{...t,drag:s,dragDirectionLock:n,dragPropagation:i,dragConstraints:o,dragElastic:a,dragMomentum:l}}}function Ot(e,t,s){return(t===!0||t===e)&&(s===null||s===e)}function bc(e,t=10){let s=null;return Math.abs(e.y)>t?s="y":Math.abs(e.x)>t&&(s="x"),s}class vc extends Oe{constructor(t){super(t),this.removeGroupControls=oe,this.removeListeners=oe,this.controls=new yc(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||oe}unmount(){this.removeGroupControls(),this.removeListeners()}}const Xn=e=>(t,s)=>{e&&ne.update(()=>e(t,s))};class wc extends Oe{constructor(){super(...arguments),this.removePointerDownListener=oe}onPointerDown(t){this.session=new Li(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:$i(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:s,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:Xn(t),onStart:Xn(s),onMove:n,onEnd:(o,a)=>{delete this.session,i&&ne.update(()=>i(o,a))}}}mount(){this.removePointerDownListener=Re(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function jc(){const e=g.useContext(ts);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:s,register:n}=e,i=g.useId();return g.useEffect(()=>n(i),[]),!t&&s?[!1,()=>s&&s(i)]:[!0]}const Ht={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Kn(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const ht={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(J.test(e))e=parseFloat(e);else return e;const s=Kn(e,t.target.x),n=Kn(e,t.target.y);return`${s}% ${n}%`}},Nc={correct:(e,{treeScale:t,projectionDelta:s})=>{const n=e,i=Be.parse(e);if(i.length>5)return n;const o=Be.createTransformer(e),a=typeof i[0]!="number"?1:0,l=s.x.scale*t.x,c=s.y.scale*t.y;i[0+a]/=l,i[1+a]/=c;const d=ie(l,c,.5);return typeof i[2+a]=="number"&&(i[2+a]/=d),typeof i[3+a]=="number"&&(i[3+a]/=d),o(i)}};class Sc extends Gs.Component{componentDidMount(){const{visualElement:t,layoutGroup:s,switchLayoutGroup:n,layoutId:i}=this.props,{projection:o}=t;Ao(Cc),o&&(s.group&&s.group.add(o),n&&n.register&&i&&n.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Ht.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:s,visualElement:n,drag:i,isPresent:o}=this.props,a=n.projection;return a&&(a.isPresent=o,i||t.layoutDependency!==s||s===void 0?a.willUpdate():this.safeToRemove(),t.isPresent!==o&&(o?a.promote():a.relegate()||ne.postRender(()=>{const l=a.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:s,switchLayoutGroup:n}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Ui(e){const[t,s]=jc(),n=g.useContext(Ks);return Gs.createElement(Sc,{...e,layoutGroup:n,switchLayoutGroup:g.useContext(Ir),isPresent:t,safeToRemove:s})}const Cc={borderRadius:{...ht,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ht,borderTopRightRadius:ht,borderBottomLeftRadius:ht,borderBottomRightRadius:ht,boxShadow:Nc},Gi=["TopLeft","TopRight","BottomLeft","BottomRight"],Tc=Gi.length,Yn=e=>typeof e=="string"?parseFloat(e):e,Zn=e=>typeof e=="number"||J.test(e);function Pc(e,t,s,n,i,o){i?(e.opacity=ie(0,s.opacity!==void 0?s.opacity:1,kc(n)),e.opacityExit=ie(t.opacity!==void 0?t.opacity:1,0,Mc(n))):o&&(e.opacity=ie(t.opacity!==void 0?t.opacity:1,s.opacity!==void 0?s.opacity:1,n));for(let a=0;a<Tc;a++){const l=`border${Gi[a]}Radius`;let c=Jn(t,l),d=Jn(s,l);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||Zn(c)===Zn(d)?(e[l]=Math.max(ie(Yn(c),Yn(d),n),0),(ke.test(d)||ke.test(c))&&(e[l]+="%")):e[l]=d}(t.rotate||s.rotate)&&(e.rotate=ie(t.rotate||0,s.rotate||0,n))}function Jn(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const kc=Hi(0,.5,hi),Mc=Hi(.5,.95,oe);function Hi(e,t,s){return n=>n<e?0:n>t?1:s(Nt(e,t,n))}function Qn(e,t){e.min=t.min,e.max=t.max}function Ne(e,t){Qn(e.x,t.x),Qn(e.y,t.y)}function er(e,t,s,n,i){return e-=t,e=Jt(e,1/s,n),i!==void 0&&(e=Jt(e,1/i,n)),e}function Rc(e,t=0,s=1,n=.5,i,o=e,a=e){if(ke.test(t)&&(t=parseFloat(t),t=ie(a.min,a.max,t/100)-a.min),typeof t!="number")return;let l=ie(o.min,o.max,n);e===o&&(l-=t),e.min=er(e.min,t,s,l,i),e.max=er(e.max,t,s,l,i)}function tr(e,t,[s,n,i],o,a){Rc(e,t[s],t[n],t[i],t.scale,o,a)}const Ac=["x","scaleX","originX"],Vc=["y","scaleY","originY"];function sr(e,t,s,n){tr(e.x,t,Ac,s?s.x:void 0,n?n.x:void 0),tr(e.y,t,Vc,s?s.y:void 0,n?n.y:void 0)}function nr(e){return e.translate===0&&e.scale===1}function _i(e){return nr(e.x)&&nr(e.y)}function Dc(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function Wi(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function rr(e){return we(e.x)/we(e.y)}class Ec{constructor(){this.members=[]}add(t){un(this.members,t),t.scheduleRender()}remove(t){if(hn(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(t){const s=this.members.findIndex(i=>t===i);if(s===0)return!1;let n;for(let i=s;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){n=o;break}}return n?(this.promote(n),!0):!1}promote(t,s){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,s&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:s,resumingFrom:n}=t;s.onExitComplete&&s.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function ir(e,t,s){let n="";const i=e.x.translate/t.x,o=e.y.translate/t.y;if((i||o)&&(n=`translate3d(${i}px, ${o}px, 0) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),s){const{rotate:c,rotateX:d,rotateY:u}=s;c&&(n+=`rotate(${c}deg) `),d&&(n+=`rotateX(${d}deg) `),u&&(n+=`rotateY(${u}deg) `)}const a=e.x.scale*t.x,l=e.y.scale*t.y;return(a!==1||l!==1)&&(n+=`scale(${a}, ${l})`),n||"none"}const Lc=(e,t)=>e.depth-t.depth;class Fc{constructor(){this.children=[],this.isDirty=!1}add(t){un(this.children,t),this.isDirty=!0}remove(t){hn(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Lc),this.isDirty=!1,this.children.forEach(t)}}function Ic(e,t){const s=performance.now(),n=({timestamp:i})=>{const o=i-s;o>=t&&(Ve(n),e(o-t))};return ne.read(n,!0),()=>Ve(n)}function Bc(e){window.MotionDebug&&window.MotionDebug.record(e)}function Oc(e){return e instanceof SVGElement&&e.tagName!=="svg"}function zc(e,t,s){const n=ye(e)?e:ot(e);return n.start(dn("",n,t,s)),n.animation}const or=["","X","Y","Z"],$c={visibility:"hidden"},ar=1e3;let Uc=0;const Ge={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function qi({attachResizeListener:e,defaultParent:t,measureScroll:s,checkIsScrollRoot:n,resetTransform:i}){return class{constructor(a={},l=t==null?void 0:t()){this.id=Uc++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Ge.totalNodes=Ge.resolvedTargetDeltas=Ge.recalculatedProjection=0,this.nodes.forEach(_c),this.nodes.forEach(Yc),this.nodes.forEach(Zc),this.nodes.forEach(Wc),Bc(Ge)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new Fc)}addEventListener(a,l){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new fn),this.eventHandlers.get(a).add(l)}notifyListeners(a,...l){const c=this.eventHandlers.get(a);c&&c.notify(...l)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Oc(a),this.instance=a;const{layoutId:c,layout:d,visualElement:u}=this.options;if(u&&!u.current&&u.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(d||c)&&(this.isLayoutDirty=!0),e){let h;const p=()=>this.root.updateBlockedByResize=!1;e(a,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=Ic(p,250),Ht.hasAnimatedSinceResize&&(Ht.hasAnimatedSinceResize=!1,this.nodes.forEach(cr))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&u&&(c||d)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:p,hasRelativeTargetChanged:x,layout:C})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||u.getDefaultTransition()||sd,{onLayoutAnimationStart:P,onLayoutAnimationComplete:A}=u.getProps(),S=!this.targetLayout||!Wi(this.targetLayout,C)||x,w=!p&&x;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||w||p&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,w);const O={...cn(b,"layout"),onPlay:P,onComplete:A};(u.shouldReduceMotion||this.options.layoutRoot)&&(O.delay=0,O.type=!1),this.startAnimation(O)}else p||cr(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=C})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ve(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Jc),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(lr);return}this.isUpdating||this.nodes.forEach(Xc),this.isUpdating=!1,this.nodes.forEach(Kc),this.nodes.forEach(Gc),this.nodes.forEach(Hc),this.clearAllSnapshots();const l=performance.now();he.delta=Ie(0,1e3/60,l-he.timestamp),he.timestamp=l,he.isProcessing=!0,cs.update.process(he),cs.preRender.process(he),cs.render.process(he),he.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(qc),this.sharedNodes.forEach(Qc)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ne.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ne.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=le(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let l=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(l=!1),l&&(this.scroll={animationId:this.root.animationId,phase:a,isRoot:n(this.instance),offset:s(this.instance)})}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform,l=this.projectionDelta&&!_i(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,u=d!==this.prevTransformTemplateValue;a&&(l||Ue(this.latestValues)||u)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return a&&(c=this.removeTransform(c)),nd(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return le();const l=a.measureViewportBox(),{scroll:c}=this.root;return c&&(Le(l.x,c.offset.x),Le(l.y,c.offset.y)),l}removeElementScroll(a){const l=le();Ne(l,a);for(let c=0;c<this.path.length;c++){const d=this.path[c],{scroll:u,options:h}=d;if(d!==this.root&&u&&h.layoutScroll){if(u.isRoot){Ne(l,a);const{scroll:p}=this.root;p&&(Le(l.x,-p.offset.x),Le(l.y,-p.offset.y))}Le(l.x,u.offset.x),Le(l.y,u.offset.y)}}return l}applyTransform(a,l=!1){const c=le();Ne(c,a);for(let d=0;d<this.path.length;d++){const u=this.path[d];!l&&u.options.layoutScroll&&u.scroll&&u!==u.root&&it(c,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Ue(u.latestValues)&&it(c,u.latestValues)}return Ue(this.latestValues)&&it(c,this.latestValues),c}removeTransform(a){const l=le();Ne(l,a);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!Ue(d.latestValues))continue;Bs(d.latestValues)&&d.updateSnapshot();const u=le(),h=d.measurePageBox();Ne(u,h),sr(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,u)}return Ue(this.latestValues)&&sr(l,this.latestValues),l}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==he.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(a||d&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:h,layoutId:p}=this.options;if(!(!this.layout||!(h||p))){if(this.resolvedRelativeTargetAt=he.timestamp,!this.targetDelta&&!this.relativeTarget){const x=this.getClosestProjectingParent();x&&x.layout&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=le(),this.relativeTargetOrigin=le(),vt(this.relativeTargetOrigin,this.layout.layoutBox,x.layout.layoutBox),Ne(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=le(),this.targetWithTransforms=le()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),rc(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ne(this.target,this.layout.layoutBox),Oi(this.target,this.targetDelta)):Ne(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const x=this.getClosestProjectingParent();x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=le(),this.relativeTargetOrigin=le(),vt(this.relativeTargetOrigin,this.target,x.target),Ne(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Ge.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Bs(this.parent.latestValues)||Bi(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===he.timestamp&&(d=!1),d)return;const{layout:u,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||h))return;Ne(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,x=this.treeScale.y;fc(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox);const{target:C}=l;if(!C){this.projectionTransform&&(this.projectionDelta=rt(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=rt(),this.projectionDeltaWithTransform=rt());const b=this.projectionTransform;bt(this.projectionDelta,this.layoutCorrected,C,this.latestValues),this.projectionTransform=ir(this.projectionDelta,this.treeScale),(this.projectionTransform!==b||this.treeScale.x!==p||this.treeScale.y!==x)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",C)),Ge.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(a,l=!1){const c=this.snapshot,d=c?c.latestValues:{},u={...this.latestValues},h=rt();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const p=le(),x=c?c.source:void 0,C=this.layout?this.layout.source:void 0,b=x!==C,P=this.getStack(),A=!P||P.members.length<=1,S=!!(b&&!A&&this.options.crossfade===!0&&!this.path.some(td));this.animationProgress=0;let w;this.mixTargetDelta=O=>{const B=O/1e3;dr(h.x,a.x,B),dr(h.y,a.y,B),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(vt(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),ed(this.relativeTarget,this.relativeTargetOrigin,p,B),w&&Dc(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=le()),Ne(w,this.relativeTarget)),b&&(this.animationValues=u,Pc(u,d,this.latestValues,B,S,A)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=B},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ve(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ne.update(()=>{Ht.hasAnimatedSinceResize=!0,this.currentAnimation=zc(0,ar,{...a,onUpdate:l=>{this.mixTargetDelta(l),a.onUpdate&&a.onUpdate(l)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(ar),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:l,target:c,layout:d,latestValues:u}=a;if(!(!l||!c||!d)){if(this!==a&&this.layout&&d&&Xi(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||le();const h=we(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+h;const p=we(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+p}Ne(l,c),it(l,u),bt(this.projectionDeltaWithTransform,this.layoutCorrected,l,u)}}registerSharedNode(a,l){this.sharedNodes.has(a)||this.sharedNodes.set(a,new Ec),this.sharedNodes.get(a).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:l}=this.options;return l?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:l}=this.options;return l?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:l,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetRotation(){const{visualElement:a}=this.options;if(!a)return;let l=!1;const{latestValues:c}=a;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(l=!0),!l)return;const d={};for(let u=0;u<or.length;u++){const h="rotate"+or[u];c[h]&&(d[h]=c[h],a.setStaticValue(h,0))}a.render();for(const u in d)a.setStaticValue(u,d[u]);a.scheduleRender()}getProjectionStyles(a){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return $c;const d={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=Gt(a==null?void 0:a.pointerEvents)||"",d.transform=u?u(this.latestValues,""):"none",d;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const b={};return this.options.layoutId&&(b.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,b.pointerEvents=Gt(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Ue(this.latestValues)&&(b.transform=u?u({},""):"none",this.hasProjected=!1),b}const p=h.animationValues||h.latestValues;this.applyTransformsToTarget(),d.transform=ir(this.projectionDeltaWithTransform,this.treeScale,p),u&&(d.transform=u(p,d.transform));const{x,y:C}=this.projectionDelta;d.transformOrigin=`${x.origin*100}% ${C.origin*100}% 0`,h.animationValues?d.opacity=h===this?(c=(l=p.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:d.opacity=h===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const b in _t){if(p[b]===void 0)continue;const{correct:P,applyTo:A}=_t[b],S=d.transform==="none"?p[b]:P(p[b],h);if(A){const w=A.length;for(let O=0;O<w;O++)d[A[O]]=S}else d[b]=S}return this.options.layoutId&&(d.pointerEvents=h===this?Gt(a==null?void 0:a.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var l;return(l=a.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(lr),this.root.sharedNodes.clear()}}}function Gc(e){e.updateLayout()}function Hc(e){var t;const s=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&s&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=e.layout,{animationType:o}=e.options,a=s.source!==e.layout.source;o==="size"?Se(h=>{const p=a?s.measuredBox[h]:s.layoutBox[h],x=we(p);p.min=n[h].min,p.max=p.min+x}):Xi(o,s.layoutBox,n)&&Se(h=>{const p=a?s.measuredBox[h]:s.layoutBox[h],x=we(n[h]);p.max=p.min+x,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+x)});const l=rt();bt(l,n,s.layoutBox);const c=rt();a?bt(c,e.applyTransform(i,!0),s.measuredBox):bt(c,n,s.layoutBox);const d=!_i(l);let u=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:p,layout:x}=h;if(p&&x){const C=le();vt(C,s.layoutBox,p.layoutBox);const b=le();vt(b,n,x.layoutBox),Wi(C,b)||(u=!0),h.options.layoutRoot&&(e.relativeTarget=b,e.relativeTargetOrigin=C,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:s,delta:c,layoutDelta:l,hasLayoutChanged:d,hasRelativeTargetChanged:u})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function _c(e){Ge.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Wc(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function qc(e){e.clearSnapshot()}function lr(e){e.clearMeasurements()}function Xc(e){e.isLayoutDirty=!1}function Kc(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function cr(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Yc(e){e.resolveTargetDelta()}function Zc(e){e.calcProjection()}function Jc(e){e.resetRotation()}function Qc(e){e.removeLeadSnapshot()}function dr(e,t,s){e.translate=ie(t.translate,0,s),e.scale=ie(t.scale,1,s),e.origin=t.origin,e.originPoint=t.originPoint}function ur(e,t,s,n){e.min=ie(t.min,s.min,n),e.max=ie(t.max,s.max,n)}function ed(e,t,s,n){ur(e.x,t.x,s.x,n),ur(e.y,t.y,s.y,n)}function td(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const sd={duration:.45,ease:[.4,0,.1,1]},hr=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),fr=hr("applewebkit/")&&!hr("chrome/")?Math.round:oe;function mr(e){e.min=fr(e.min),e.max=fr(e.max)}function nd(e){mr(e.x),mr(e.y)}function Xi(e,t,s){return e==="position"||e==="preserve-aspect"&&!Fs(rr(t),rr(s),.2)}const rd=qi({attachResizeListener:(e,t)=>Me(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),vs={current:void 0},Ki=qi({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!vs.current){const e=new rd({});e.mount(window),e.setOptions({layoutScroll:!0}),vs.current=e}return vs.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),id={pan:{Feature:wc},drag:{Feature:vc,ProjectionNode:Ki,MeasureLayout:Ui}},od=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function ad(e){const t=od.exec(e);if(!t)return[,];const[,s,n]=t;return[s,n]}function zs(e,t,s=1){const[n,i]=ad(e);if(!n)return;const o=window.getComputedStyle(t).getPropertyValue(n);if(o){const a=o.trim();return Ai(a)?parseFloat(a):a}else return Ms(i)?zs(i,t,s+1):i}function ld(e,{...t},s){const n=e.current;if(!(n instanceof Element))return{target:t,transitionEnd:s};s&&(s={...s}),e.values.forEach(i=>{const o=i.get();if(!Ms(o))return;const a=zs(o,n);a&&i.set(a)});for(const i in t){const o=t[i];if(!Ms(o))continue;const a=zs(o,n);a&&(t[i]=a,s||(s={}),s[i]===void 0&&(s[i]=o))}return{target:t,transitionEnd:s}}const cd=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Yi=e=>cd.has(e),dd=e=>Object.keys(e).some(Yi),pr=e=>e===Ke||e===J,gr=(e,t)=>parseFloat(e.split(", ")[t]),xr=(e,t)=>(s,{transform:n})=>{if(n==="none"||!n)return 0;const i=n.match(/^matrix3d\((.+)\)$/);if(i)return gr(i[1],t);{const o=n.match(/^matrix\((.+)\)$/);return o?gr(o[1],e):0}},ud=new Set(["x","y","z"]),hd=St.filter(e=>!ud.has(e));function fd(e){const t=[];return hd.forEach(s=>{const n=e.getValue(s);n!==void 0&&(t.push([s,n.get()]),n.set(s.startsWith("scale")?1:0))}),t.length&&e.render(),t}const at={width:({x:e},{paddingLeft:t="0",paddingRight:s="0"})=>e.max-e.min-parseFloat(t)-parseFloat(s),height:({y:e},{paddingTop:t="0",paddingBottom:s="0"})=>e.max-e.min-parseFloat(t)-parseFloat(s),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:xr(4,13),y:xr(5,14)};at.translateX=at.x;at.translateY=at.y;const md=(e,t,s)=>{const n=t.measureViewportBox(),i=t.current,o=getComputedStyle(i),{display:a}=o,l={};a==="none"&&t.setStaticValue("display",e.display||"block"),s.forEach(d=>{l[d]=at[d](n,o)}),t.render();const c=t.measureViewportBox();return s.forEach(d=>{const u=t.getValue(d);u&&u.jump(l[d]),e[d]=at[d](c,o)}),e},pd=(e,t,s={},n={})=>{t={...t},n={...n};const i=Object.keys(t).filter(Yi);let o=[],a=!1;const l=[];if(i.forEach(c=>{const d=e.getValue(c);if(!e.hasValue(c))return;let u=s[c],h=ut(u);const p=t[c];let x;if(qt(p)){const C=p.length,b=p[0]===null?1:0;u=p[b],h=ut(u);for(let P=b;P<C&&p[P]!==null;P++)x?nn(ut(p[P])===x):x=ut(p[P])}else x=ut(p);if(h!==x)if(pr(h)&&pr(x)){const C=d.get();typeof C=="string"&&d.set(parseFloat(C)),typeof p=="string"?t[c]=parseFloat(p):Array.isArray(p)&&x===J&&(t[c]=p.map(parseFloat))}else h!=null&&h.transform&&(x!=null&&x.transform)&&(u===0||p===0)?u===0?d.set(x.transform(u)):t[c]=h.transform(p):(a||(o=fd(e),a=!0),l.push(c),n[c]=n[c]!==void 0?n[c]:t[c],d.jump(p))}),l.length){const c=l.indexOf("height")>=0?window.pageYOffset:null,d=md(t,e,l);return o.length&&o.forEach(([u,h])=>{e.getValue(u).set(h)}),e.render(),ss&&c!==null&&window.scrollTo({top:c}),{target:d,transitionEnd:n}}else return{target:t,transitionEnd:n}};function gd(e,t,s,n){return dd(t)?pd(e,t,s,n):{target:t,transitionEnd:n}}const xd=(e,t,s,n)=>{const i=ld(e,t,n);return t=i.target,n=i.transitionEnd,gd(e,t,s,n)},$s={current:null},Zi={current:!1};function yd(){if(Zi.current=!0,!!ss)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>$s.current=e.matches;e.addListener(t),t()}else $s.current=!1}function bd(e,t,s){const{willChange:n}=t;for(const i in t){const o=t[i],a=s[i];if(ye(o))e.addValue(i,o),Zt(n)&&n.add(i);else if(ye(a))e.addValue(i,ot(o,{owner:e})),Zt(n)&&n.remove(i);else if(a!==o)if(e.hasValue(i)){const l=e.getValue(i);!l.hasAnimated&&l.set(o)}else{const l=e.getStaticValue(i);e.addValue(i,ot(l!==void 0?l:o,{owner:e}))}}for(const i in s)t[i]===void 0&&e.removeValue(i);return t}const yr=new WeakMap,Ji=Object.keys(jt),vd=Ji.length,br=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],wd=Xs.length;class jd{constructor({parent:t,props:s,presenceContext:n,reducedMotionConfig:i,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>ne.render(this.render,!1,!0);const{latestValues:l,renderState:c}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=s.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=s,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.isControllingVariants=rs(s),this.isVariantNode=Fr(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...u}=this.scrapeMotionValuesFromProps(s,{});for(const h in u){const p=u[h];l[h]!==void 0&&ye(p)&&(p.set(l[h],!1),Zt(d)&&d.add(h))}}scrapeMotionValuesFromProps(t,s){return{}}mount(t){this.current=t,yr.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,n)=>this.bindToMotionValue(n,s)),Zi.current||yd(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:$s.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){yr.delete(this.current),this.projection&&this.projection.unmount(),Ve(this.notifyUpdate),Ve(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,s){const n=Xe.has(t),i=s.on("change",a=>{this.latestValues[t]=a,this.props.onUpdate&&ne.update(this.notifyUpdate,!1,!0),n&&this.projection&&(this.projection.isTransformDirty=!0)}),o=s.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{i(),o()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...s},n,i,o){let a,l;for(let c=0;c<vd;c++){const d=Ji[c],{isEnabled:u,Feature:h,ProjectionNode:p,MeasureLayout:x}=jt[d];p&&(a=p),u(s)&&(!this.features[d]&&h&&(this.features[d]=new h(this)),x&&(l=x))}if((this.type==="html"||this.type==="svg")&&!this.projection&&a){this.projection=new a(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:d,drag:u,dragConstraints:h,layoutScroll:p,layoutRoot:x}=s;this.projection.setOptions({layoutId:c,layout:d,alwaysMeasureLayout:!!u||h&&st(h),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof d=="string"?d:"both",initialPromotionConfig:o,layoutScroll:p,layoutRoot:x})}return l}updateFeatures(){for(const t in this.features){const s=this.features[t];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):le()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,s){this.latestValues[t]=s}makeTargetAnimatable(t,s=!0){return this.makeTargetAnimatableFromInstance(t,this.props,s)}update(t,s){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let n=0;n<br.length;n++){const i=br[n];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o=t["on"+i];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=bd(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const n=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(n.initial=this.props.initial),n}const s={};for(let n=0;n<wd;n++){const i=Xs[n],o=this.props[i];(wt(o)||o===!1)&&(s[i]=o)}return s}addVariantChild(t){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(t),()=>s.variantChildren.delete(t)}addValue(t,s){s!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,s)),this.values.set(t,s),this.latestValues[t]=s.get()}removeValue(t){this.values.delete(t);const s=this.valueSubscriptions.get(t);s&&(s(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,s){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&s!==void 0&&(n=ot(s,{owner:this}),this.addValue(t,n)),n}readValue(t){var s;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(s=this.getBaseTargetFromProps(this.props,t))!==null&&s!==void 0?s:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,s){this.baseTarget[t]=s}getBaseTarget(t){var s;const{initial:n}=this.props,i=typeof n=="string"||typeof n=="object"?(s=sn(this.props,n))===null||s===void 0?void 0:s[t]:void 0;if(n&&i!==void 0)return i;const o=this.getBaseTargetFromProps(this.props,t);return o!==void 0&&!ye(o)?o:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,s){return this.events[t]||(this.events[t]=new fn),this.events[t].add(s)}notify(t,...s){this.events[t]&&this.events[t].notify(...s)}}class Qi extends jd{sortInstanceNodePosition(t,s){return t.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(t,s){return t.style?t.style[s]:void 0}removeValueFromRenderState(t,{vars:s,style:n}){delete s[t],delete n[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:s,...n},{transformValues:i},o){let a=Ol(n,t||{},this);if(i&&(s&&(s=i(s)),n&&(n=i(n)),a&&(a=i(a))),o){Il(this,n,a);const l=xd(this,n,a,s);s=l.transitionEnd,n=l.target}return{transition:t,transitionEnd:s,...n}}}function Nd(e){return window.getComputedStyle(e)}class Sd extends Qi{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,s){if(Xe.has(s)){const n=ln(s);return n&&n.default||0}else{const n=Nd(t),i=(zr(s)?n.getPropertyValue(s):n[s])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:s}){return zi(t,s)}build(t,s,n,i){Zs(t,s,n,i.transformTemplate)}scrapeMotionValuesFromProps(t,s){return tn(t,s)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;ye(t)&&(this.childSubscription=t.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}renderInstance(t,s,n,i){Wr(t,s,n,i)}}class Cd extends Qi{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,s){return t[s]}readValueFromInstance(t,s){if(Xe.has(s)){const n=ln(s);return n&&n.default||0}return s=qr.has(s)?s:Ws(s),t.getAttribute(s)}measureInstanceViewportBox(){return le()}scrapeMotionValuesFromProps(t,s){return Kr(t,s)}build(t,s,n,i){Qs(t,s,n,this.isSVGTag,i.transformTemplate)}renderInstance(t,s,n,i){Xr(t,s,n,i)}mount(t){this.isSVGTag=en(t.tagName),super.mount(t)}}const Td=(e,t)=>Ys(e)?new Cd(t,{enableHardwareAcceleration:!1}):new Sd(t,{enableHardwareAcceleration:!0}),Pd={layout:{ProjectionNode:Ki,MeasureLayout:Ui}},kd={...ec,...va,...id,...Pd},_=Mo((e,t)=>aa(e,t,kd,Td));function eo(){const e=g.useRef(!1);return _s(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function Md(){const e=eo(),[t,s]=g.useState(0),n=g.useCallback(()=>{e.current&&s(t+1)},[t]);return[g.useCallback(()=>ne.postRender(n),[n]),t]}class Rd extends g.Component{getSnapshotBeforeUpdate(t){const s=this.props.childRef.current;if(s&&t.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=s.offsetHeight||0,n.width=s.offsetWidth||0,n.top=s.offsetTop,n.left=s.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Ad({children:e,isPresent:t}){const s=g.useId(),n=g.useRef(null),i=g.useRef({width:0,height:0,top:0,left:0});return g.useInsertionEffect(()=>{const{width:o,height:a,top:l,left:c}=i.current;if(t||!n.current||!o||!a)return;n.current.dataset.motionPopId=s;const d=document.createElement("style");return document.head.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(d)}},[t]),g.createElement(Rd,{isPresent:t,childRef:n,sizeRef:i},g.cloneElement(e,{ref:n}))}const ws=({children:e,initial:t,isPresent:s,onExitComplete:n,custom:i,presenceAffectsLayout:o,mode:a})=>{const l=Yr(Vd),c=g.useId(),d=g.useMemo(()=>({id:c,initial:t,isPresent:s,custom:i,onExitComplete:u=>{l.set(u,!0);for(const h of l.values())if(!h)return;n&&n()},register:u=>(l.set(u,!1),()=>l.delete(u))}),o?void 0:[s]);return g.useMemo(()=>{l.forEach((u,h)=>l.set(h,!1))},[s]),g.useEffect(()=>{!s&&!l.size&&n&&n()},[s]),a==="popLayout"&&(e=g.createElement(Ad,{isPresent:s},e)),g.createElement(ts.Provider,{value:d},e)};function Vd(){return new Map}function Dd(e){return g.useEffect(()=>()=>e(),[])}const He=e=>e.key||"";function Ed(e,t){e.forEach(s=>{const n=He(s);t.set(n,s)})}function Ld(e){const t=[];return g.Children.forEach(e,s=>{g.isValidElement(s)&&t.push(s)}),t}const je=({children:e,custom:t,initial:s=!0,onExitComplete:n,exitBeforeEnter:i,presenceAffectsLayout:o=!0,mode:a="sync"})=>{const l=g.useContext(Ks).forceRender||Md()[0],c=eo(),d=Ld(e);let u=d;const h=g.useRef(new Map).current,p=g.useRef(u),x=g.useRef(new Map).current,C=g.useRef(!0);if(_s(()=>{C.current=!1,Ed(d,x),p.current=u}),Dd(()=>{C.current=!0,x.clear(),h.clear()}),C.current)return g.createElement(g.Fragment,null,u.map(S=>g.createElement(ws,{key:He(S),isPresent:!0,initial:s?void 0:!1,presenceAffectsLayout:o,mode:a},S)));u=[...u];const b=p.current.map(He),P=d.map(He),A=b.length;for(let S=0;S<A;S++){const w=b[S];P.indexOf(w)===-1&&!h.has(w)&&h.set(w,void 0)}return a==="wait"&&h.size&&(u=[]),h.forEach((S,w)=>{if(P.indexOf(w)!==-1)return;const O=x.get(w);if(!O)return;const B=b.indexOf(w);let V=S;if(!V){const U=()=>{h.delete(w);const D=Array.from(x.keys()).filter(v=>!P.includes(v));if(D.forEach(v=>x.delete(v)),p.current=d.filter(v=>{const N=He(v);return N===w||D.includes(N)}),!h.size){if(c.current===!1)return;l(),n&&n()}};V=g.createElement(ws,{key:He(O),isPresent:!1,onExitComplete:U,custom:t,presenceAffectsLayout:o,mode:a},O),h.set(w,V)}u.splice(B,0,V)}),u=u.map(S=>{const w=S.key;return h.has(w)?S:g.createElement(ws,{key:He(S),isPresent:!0,presenceAffectsLayout:o,mode:a},S)}),g.createElement(g.Fragment,null,h.size?u:u.map(S=>g.cloneElement(S)))};function to(e){var t,s,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(s=to(e[t]))&&(n&&(n+=" "),n+=s)}else for(s in e)e[s]&&(n&&(n+=" "),n+=s);return n}function de(){for(var e,t,s=0,n="",i=arguments.length;s<i;s++)(e=arguments[s])&&(t=to(e))&&(n&&(n+=" "),n+=t);return n}const Fd=({game:e})=>{const t=e.status==="available",s=e.status==="coming-soon",n=e.status==="maintenance",i=r.jsxs(_.div,{whileHover:t?{scale:1.02}:{},whileTap:t?{scale:.98}:{},className:de("relative h-full bg-gray-800 rounded-xl border-2 overflow-hidden transition-all duration-300",{"border-gray-700 hover:border-purple-500 cursor-pointer shadow-lg hover:shadow-purple-500/20":t,"border-gray-700 opacity-75 cursor-not-allowed":s,"border-orange-600 opacity-75 cursor-not-allowed":n}),children:[(s||n)&&r.jsx("div",{className:"absolute top-2 right-2 z-10",children:r.jsx("span",{className:de("px-2 py-1 text-xs sm:px-3 sm:text-xs font-pixel rounded-full",{"bg-blue-600 text-white":s,"bg-orange-600 text-white":n}),children:s?"即将推出":"维护中"})}),r.jsx("div",{className:"h-24 sm:h-32 bg-gradient-to-br from-purple-900/50 to-pink-900/50 flex items-center justify-center",children:r.jsx("span",{className:"text-4xl sm:text-6xl",children:e.image})}),r.jsxs("div",{className:"p-3 sm:p-4 space-y-2 sm:space-y-3",children:[r.jsx("h3",{className:"text-lg sm:text-xl font-game font-bold text-white",children:e.title}),r.jsx("p",{className:"text-xs sm:text-sm text-gray-400 line-clamp-2",children:e.description}),r.jsx("div",{className:"flex flex-wrap gap-1 sm:gap-2",children:e.tags.map(o=>r.jsx("span",{className:"px-1.5 py-0.5 sm:px-2 sm:py-1 text-xs bg-gray-700 text-gray-300 rounded-md",children:o},o))}),r.jsxs("div",{className:"pt-2 sm:pt-3 border-t border-gray-700 grid grid-cols-3 gap-1 sm:gap-2 text-xs text-gray-500",children:[r.jsxs("div",{className:"text-center sm:text-left",children:[r.jsx("div",{className:"font-semibold text-gray-400 text-xs",children:"难度"}),r.jsx("div",{className:de("text-xs",{"text-green-400":e.difficulty==="简单","text-yellow-400":e.difficulty==="中等","text-red-400":e.difficulty==="困难"}),children:e.difficulty})]}),r.jsxs("div",{className:"text-center sm:text-left",children:[r.jsx("div",{className:"font-semibold text-gray-400 text-xs",children:"玩家"}),r.jsx("div",{className:"text-xs",children:e.players})]}),r.jsxs("div",{className:"text-center sm:text-left",children:[r.jsx("div",{className:"font-semibold text-gray-400 text-xs",children:"时长"}),r.jsx("div",{className:"text-xs",children:e.time})]})]}),t&&r.jsx("button",{className:"w-full mt-3 sm:mt-4 px-3 py-2 sm:px-4 bg-gradient-to-r from-purple-600 to-pink-600 text-white font-game text-xs sm:text-sm rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all active:scale-95",children:"开始游戏"})]})]});return t?r.jsx(Ps,{to:e.path,children:i}):i},Id=()=>{const[e,t]=g.useState(0),[s,n]=g.useState(!1),[i,o]=g.useState(null);return g.useEffect(()=>{let a;a="http://socket.qingfengyueying.xyz/stats",console.log("[OnlineStats] 正在连接到:",a);const l=Hs(a,{transports:["websocket","polling"],upgrade:!0,timeout:1e4,reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3,reconnectionDelayMax:5e3});return l.on("connect",()=>{console.log("[OnlineStats] 连接成功, Socket ID:",l.id),n(!0),l.emit("get-online-count")}),l.on("online-count",c=>{console.log("[OnlineStats] 收到在线人数:",c.count),t(c.count||0)}),l.on("user-count-update",c=>{console.log("[OnlineStats] 在线人数更新:",c.count),t(c.count||0)}),l.on("connect_error",c=>{console.error("[OnlineStats] 连接错误:",c.message),n(!1)}),l.on("disconnect",c=>{console.log("[OnlineStats] 连接断开, 原因:",c),n(!1)}),l.on("reconnect",c=>{console.log("[OnlineStats] 重连成功, 尝试次数:",c),n(!0),l.emit("get-online-count")}),l.on("reconnect_failed",()=>{console.error("[OnlineStats] 重连失败"),n(!1),t(Math.floor(Math.random()*30)+5)}),o(l),()=>{console.log("[OnlineStats] 清理Socket连接"),l&&l.disconnect()}},[]),{onlineCount:e,isConnected:s,socket:i}},vr=[{id:"gomoku",title:"五子棋",description:"经典双人对战游戏",image:"♟️",path:"/games/gomoku",tags:["双人","策略","PVP"],difficulty:"简单",players:"2人",time:"10-20分钟",status:"available"},{id:"2048",title:"2048",description:"数字合并益智游戏",image:"🔢",path:"/games/2048",tags:["单人","益智","策略"],difficulty:"中等",players:"1人",time:"10-30分钟",status:"available"},{id:"snake",title:"贪吃蛇",description:"经典贪吃蛇游戏",image:"🐍",path:"/games/snake",tags:["单人","休闲","经典"],difficulty:"简单",players:"1人",time:"5-10分钟",status:"available"},{id:"tetris",title:"俄罗斯方块",description:"经典方块消除游戏",image:"🎮",path:"/games/tetris",tags:["单人","休闲","经典"],difficulty:"中等",players:"1人",time:"无限",status:"available"},{id:"tictactoe",title:"井字棋",description:"简单有趣的对战游戏",image:"❌",path:"/games/tictactoe",tags:["双人","策略","PVP"],difficulty:"简单",players:"1-2人",time:"2-5分钟",status:"available"},{id:"memory",title:"记忆翻牌",description:"考验记忆力的配对游戏",image:"🎴",path:"/games/memory",tags:["单人","益智","记忆"],difficulty:"简单",players:"1人",time:"5-10分钟",status:"available"},{id:"sudoku",title:"数独",description:"经典数字填空游戏",image:"🔢",path:"/games/sudoku",tags:["单人","益智","逻辑"],difficulty:"困难",players:"1人",time:"15-30分钟",status:"available"},{id:"breakout",title:"打砖块",description:"经典弹球消除游戏",image:"🧱",path:"/games/breakout",tags:["单人","休闲","经典"],difficulty:"中等",players:"1人",time:"10-20分钟",status:"available"}],Bd=()=>{const[e,t]=g.useState("全部"),{onlineCount:s,isConnected:n}=Id(),i=["全部","双人","单人","策略","休闲","益智"],o=g.useMemo(()=>e==="全部"?vr:vr.filter(l=>l.tags.includes(e)),[e]),a=g.useMemo(()=>({available:o.filter(l=>l.status==="available").length,comingSoon:o.filter(l=>l.status==="coming-soon").length,onlineUsers:s}),[o,s]);return r.jsxs("div",{className:"space-y-8 sm:space-y-12",children:[r.jsxs(_.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center space-y-4 sm:space-y-6",children:[r.jsx("h1",{className:"text-3xl sm:text-5xl md:text-7xl font-game font-bold",children:r.jsx("span",{className:"bg-gradient-to-r from-purple-400 via-pink-400 to-red-400 bg-clip-text text-transparent",children:"游戏合集"})}),r.jsx("p",{className:"text-base sm:text-xl text-gray-400 font-game px-4",children:"精选经典小游戏，随时随地享受游戏乐趣"}),r.jsxs("div",{className:"flex justify-center gap-3 sm:gap-8 mt-6 sm:mt-8 px-4",children:[r.jsxs(_.div,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-gray-800/50 backdrop-blur px-3 sm:px-6 py-3 sm:py-4 rounded-lg border border-gray-700 flex-1 max-w-[100px] sm:max-w-none",children:[r.jsx("div",{className:"text-xl sm:text-3xl font-bold text-purple-400",children:a.available}),r.jsx("div",{className:"text-xs sm:text-sm text-gray-400",children:"可玩游戏"})]}),r.jsxs(_.div,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-gray-800/50 backdrop-blur px-3 sm:px-6 py-3 sm:py-4 rounded-lg border border-gray-700 flex-1 max-w-[100px] sm:max-w-none",children:[r.jsx("div",{className:"text-xl sm:text-3xl font-bold text-pink-400",children:a.comingSoon}),r.jsx("div",{className:"text-xs sm:text-sm text-gray-400",children:"即将推出"})]}),r.jsxs(_.div,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-gray-800/50 backdrop-blur px-3 sm:px-6 py-3 sm:py-4 rounded-lg border border-gray-700 flex-1 max-w-[100px] sm:max-w-none",children:[r.jsxs("div",{className:"text-xl sm:text-3xl font-bold text-blue-400 flex items-center justify-center gap-1",children:[a.onlineUsers,n&&r.jsx("span",{className:"inline-block w-2 h-2 bg-green-400 rounded-full animate-pulse"})]}),r.jsx("div",{className:"text-xs sm:text-sm text-gray-400",children:"在线玩家"})]})]})]}),r.jsx("div",{className:"flex flex-wrap justify-center gap-2 sm:gap-3 px-4",children:i.map((l,c)=>r.jsx(_.button,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:c*.1},whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(l),className:`px-3 sm:px-4 py-2 rounded-full text-xs sm:text-sm font-medium transition-all
              ${l===e?"bg-gradient-to-r from-purple-500 to-pink-500 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700 hover:text-white border border-gray-700"}`,children:l},l))}),r.jsx(_.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6",children:o.length>0?o.map((l,c)=>r.jsx(_.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{delay:c*.1},children:r.jsx(Fd,{game:l})},l.id)):r.jsxs(_.div,{initial:{opacity:0},animate:{opacity:1},className:"col-span-full text-center py-12",children:[r.jsxs("p",{className:"text-gray-400 text-lg",children:['没有找到"',e,'"类型的游戏']}),r.jsx("button",{onClick:()=>t("全部"),className:"mt-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"查看全部游戏"})]})}),r.jsxs(_.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},className:"mt-12 sm:mt-16 grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6",children:[r.jsxs("div",{className:"text-center space-y-3 p-4 sm:p-6 bg-gray-800/30 backdrop-blur rounded-lg border border-gray-700",children:[r.jsx("div",{className:"text-3xl sm:text-4xl",children:"🎮"}),r.jsx("h3",{className:"text-base sm:text-lg font-game font-semibold text-purple-400",children:"精选游戏"}),r.jsx("p",{className:"text-xs sm:text-sm text-gray-400",children:"精心挑选的经典游戏，保证游戏质量和趣味性"})]}),r.jsxs("div",{className:"text-center space-y-3 p-4 sm:p-6 bg-gray-800/30 backdrop-blur rounded-lg border border-gray-700",children:[r.jsx("div",{className:"text-3xl sm:text-4xl",children:"🌐"}),r.jsx("h3",{className:"text-base sm:text-lg font-game font-semibold text-pink-400",children:"在线对战"}),r.jsx("p",{className:"text-xs sm:text-sm text-gray-400",children:"支持实时在线对战，与好友一起享受游戏乐趣"})]}),r.jsxs("div",{className:"text-center space-y-3 p-4 sm:p-6 bg-gray-800/30 backdrop-blur rounded-lg border border-gray-700",children:[r.jsx("div",{className:"text-3xl sm:text-4xl",children:"📱"}),r.jsx("h3",{className:"text-base sm:text-lg font-game font-semibold text-blue-400",children:"跨平台"}),r.jsx("p",{className:"text-xs sm:text-sm text-gray-400",children:"完美适配手机和电脑，随时随地开始游戏"})]})]})]})},Us=13,wr=["快乐的","聪明的","勇敢的","可爱的","厉害的","机智的","活泼的","霸气的","淡定的","优雅的","神秘的","幸运的","专注的","认真的","潇洒的","冷静的"],jr=["熊猫","狐狸","老虎","狮子","兔子","猫咪","狗狗","猴子","企鹅","海豚","鲸鱼","老鹰","凤凰","龙龙","独角兽","考拉"],ft=()=>Array(Us).fill(null).map(()=>Array(Us).fill(0)),ce=fo((e,t)=>({board:ft(),boardSize:Us,currentPlayer:1,myColor:null,gameState:"waiting",winner:null,lastMove:null,winningLine:null,userRole:null,spectatorCount:0,myNickname:null,opponentNickname:null,history:[],canUndo:!1,score:{black:0,white:0},roundNumber:1,firstPlayer:1,roomId:null,isHost:!1,opponentName:null,notifications:[],initBoard:()=>{const{roundNumber:s}=t(),n=s%2===1?1:2;e({board:ft(),currentPlayer:n,winner:null,lastMove:null,winningLine:null,gameState:"waiting",history:[],canUndo:!1,firstPlayer:n})},makeMove:(s,n)=>{const{board:i,currentPlayer:o,gameState:a,myColor:l,boardSize:c,userRole:d}=t();if(a!=="playing"||d==="spectator"||o!==l||s<0||s>=c||n<0||n>=c||i[s][n]!==0)return!1;const u=i.map(x=>[...x]);u[s][n]=o;const h=t().checkWin(s,n,o),p=h!==null;return t().addHistory(o,{row:s,col:n}),e({board:u,lastMove:{row:s,col:n},currentPlayer:o===1?2:1,winner:p?o:null,winningLine:h,gameState:p?"finished":"playing",canUndo:!0}),p&&t().updateScore(o),!0},setPlayerColor:s=>{e({myColor:s})},setGameState:s=>{e({gameState:s})},setRoomInfo:(s,n)=>{e({roomId:s,isHost:n})},resetGame:()=>{e({board:ft(),currentPlayer:1,myColor:null,gameState:"waiting",winner:null,lastMove:null,winningLine:null,roomId:null,isHost:!1,history:[],canUndo:!1,opponentName:null,notifications:[],score:{black:0,white:0},roundNumber:1,firstPlayer:1,userRole:null,spectatorCount:0,myNickname:null,opponentNickname:null})},checkWin:(s,n,i)=>{const{board:o,boardSize:a}=t(),l=[[[0,1],[0,-1]],[[1,0],[-1,0]],[[1,1],[-1,-1]],[[1,-1],[-1,1]]];for(const c of l){const d=[{row:s,col:n}];for(const[u,h]of c){let p=s+u,x=n+h;for(;p>=0&&p<a&&x>=0&&x<a&&o[p][x]===i;)d.push({row:p,col:x}),p+=u,x+=h}if(d.length>=5)return d}return null},addNotification:(s,n)=>{const i={id:Math.random().toString(36).substr(2,9),type:s,message:n,timestamp:Date.now()};e(o=>({notifications:[...o.notifications,i]})),setTimeout(()=>{t().removeNotification(i.id)},5e3)},removeNotification:s=>{e(n=>({notifications:n.notifications.filter(i=>i.id!==s)}))},updateScore:s=>{e(n=>({score:{...n.score,[s===1?"black":"white"]:n.score[s===1?"black":"white"]+1}}))},nextRound:()=>{e(s=>{const n=s.roundNumber+1,i=n%2===1?1:2;return{board:ft(),currentPlayer:i,winner:null,lastMove:null,winningLine:null,gameState:"playing",history:[],canUndo:!1,roundNumber:n,firstPlayer:i}})},setOpponentName:s=>{e({opponentName:s})},addHistory:(s,n)=>{e(i=>({history:[...i.history,{player:s,position:n,timestamp:Date.now()}]}))},setCanUndo:s=>{e({canUndo:s})},undoMove:()=>{const{history:s}=t();if(s.length<2)return;const n=s.slice(0,-2),i=ft();n.forEach(l=>{i[l.position.row][l.position.col]=l.player});const o=n.length>0?n[n.length-1].player===1?2:1:t().firstPlayer,a=n.length>0?n[n.length-1].position:null;e({board:i,history:n,currentPlayer:o,lastMove:a,canUndo:!1,winningLine:null})},setWinningLine:s=>{e({winningLine:s})},setUserRole:s=>{e({userRole:s})},setSpectatorCount:s=>{e({spectatorCount:s})},canMakeMove:()=>{const{userRole:s,myColor:n,currentPlayer:i,gameState:o}=t();return s==="player"&&n===i&&o==="playing"},setMyNickname:s=>{e({myNickname:s})},setOpponentNickname:s=>{e({opponentNickname:s})},generateRandomNickname:()=>{const s=wr[Math.floor(Math.random()*wr.length)],n=jr[Math.floor(Math.random()*jr.length)],i=Math.floor(Math.random()*100);return`${s}${n}${i}`}}));let Z=null,$e=!1;const mn=()=>{const[e,t]=g.useState($e),{setGameState:s,setPlayerColor:n,initBoard:i,addNotification:o,nextRound:a,undoMove:l,setCanUndo:c,setWinningLine:d,setUserRole:u,userRole:h,setOpponentNickname:p}=ce();return g.useEffect(()=>{if(Z)t($e);else{let D;D="http://socket.qingfengyueying.xyz",console.log("Attempting to connect to:",D),Z=Hs(D,{transports:["websocket","polling"],upgrade:!0,path:"/socket.io/",timeout:1e4,forceNew:!0,reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3}),Z.on("connect",()=>{console.log("Socket connected to:",D),$e=!0,t(!0)}),Z.on("disconnect",()=>{console.log("Socket disconnected"),$e=!1,t(!1),o("warning","与服务器断开连接")}),Z.on("connect_error",v=>{console.error("Socket connection error:",v),$e=!1,t(!1)}),Z.on("reconnect",v=>{console.log("Socket reconnected after",v,"attempts"),$e=!0,t(!0),o("success","重新连接成功")}),Z.on("reconnect_error",v=>{console.error("Socket reconnection error:",v),$e=!1,t(!1)}),Z.on("game-start",v=>{console.log("Game started, my color:",v.playerColor,"opponent:",v.opponentId),console.log("Before state update - gameState:",ce.getState().gameState),v.opponentNickname&&p(v.opponentNickname),n(v.playerColor),i(),s("playing"),o("success","🎯 游戏开始！"),console.log("After state update - gameState:",ce.getState().gameState),console.log("After state update - myColor:",ce.getState().myColor)}),Z.on("game-start-spectator",v=>{console.log("Game started for spectator, black:",v.blackPlayer,"white:",v.whitePlayer),v.blackNickname&&v.whiteNickname,i(),s("playing"),o("info","🎯 游戏已开始，你正在观战")}),Z.on("role-changed",v=>{console.log("Role changed to:",v.role),u(v.role),v.role==="spectator"?(n(null),o("info","👁️ 你现在是观众")):o("success","🎮  你现在是玩家")}),Z.on("user-role-changed",v=>{v.wasSurrender?o("info","🏳️ 一位玩家认输并成为观众"):v.role==="player"?o("info","👥 一位观众成为了玩家"):o("info","👁️ 一位玩家成为了观众")}),Z.on("role-change-error",v=>{console.error("Role change error:",v.message),o("error",`❌ ${v.message}`)}),Z.on("ready-prompt",()=>{console.log("Ready prompt received"),Z&&Z.emit("ready-to-play")}),Z.on("game-move",v=>{console.log("Game move for spectator:",v);const N=ce.getState();if(N.userRole!=="spectator")return;const z=N.board.map(k=>[...k]);z[v.row][v.col]=N.currentPlayer;const M=N.checkWin(v.row,v.col,N.currentPlayer),j=M!==null;N.addHistory(N.currentPlayer,{row:v.row,col:v.col}),ce.setState({board:z,lastMove:{row:v.row,col:v.col},currentPlayer:N.currentPlayer===1?2:1,winner:j?N.currentPlayer:null,winningLine:M,gameState:j?"finished":"playing"}),j&&N.updateScore(N.currentPlayer)}),Z.on("room-created",v=>{console.log("Room created:",v),o("success",`✅ 房间 ${v.roomId} 创建成功`)}),Z.on("room-joined",v=>{console.log("Room joined:",v),o("success",`✅ 已加入房间 ${v.roomId}`),Z&&(console.log("Auto-readying for game start..."),Z.emit("ready-to-play"))}),Z.on("spectator-joined",v=>{console.log("Joined as spectator:",v),o("info",`👁️ 已以观众身份加入房间 ${v.roomId}`)}),Z.on("room-error",v=>{console.error("Room error:",v.message),o("error",`❌ ${v.message}`)}),Z.on("room-list",v=>{console.log("Room list updated:",v)}),Z.on("opponent-move",v=>{console.log("Opponent made move:",v);const N=ce.getState();if(N.userRole!=="player")return;const z=N.board.map(k=>[...k]);z[v.row][v.col]=N.currentPlayer;const M=N.checkWin(v.row,v.col,N.currentPlayer),j=M!==null;N.addHistory(N.currentPlayer,{row:v.row,col:v.col}),ce.setState({board:z,lastMove:{row:v.row,col:v.col},currentPlayer:N.currentPlayer===1?2:1,winner:j?N.currentPlayer:null,winningLine:M,gameState:j?"finished":"playing",canUndo:!0}),j&&N.updateScore(N.currentPlayer)}),Z.on("game-restart",()=>{console.log("Game restart - both players agreed"),a(),s("playing"),o("success","🎮 游戏已重新开始")}),Z.on("undo-move",()=>{console.log("Undo move - both players agreed"),l(),o("info","↩️ 已悔棋")}),Z.on("opponent-nickname",v=>{console.log("Received opponent nickname:",v.nickname),p(v.nickname)})}return()=>{}},[s,n,i,o,a,l,c,d,u,h,p]),{socket:Z,connected:e,sendMove:(D,v,N)=>{Z&&(console.log("Sending move:",{roomId:D,row:v,col:N}),Z.emit("make-move",{roomId:D,row:v,col:N}))},requestRestart:D=>{Z&&(console.log("Requesting restart:",D),Z.emit("request-restart",{roomId:D}))},acceptRestart:D=>{Z&&(console.log("Accepting restart:",D),Z.emit("accept-restart",{roomId:D}))},rejectRestart:D=>{Z&&(console.log("Rejecting restart:",D),Z.emit("reject-restart",{roomId:D}))},requestUndo:D=>{Z&&(console.log("Requesting undo:",D),Z.emit("request-undo",{roomId:D}))},acceptUndo:D=>{Z&&(console.log("Accepting undo:",D),Z.emit("accept-undo",{roomId:D}))},rejectUndo:D=>{Z&&(console.log("Rejecting undo:",D),Z.emit("reject-undo",{roomId:D}))},surrender:(D,v)=>{Z&&(console.log("Surrendering:",D,"myColor:",v),Z.emit("surrender",{roomId:D,surrenderColor:v}))},sendChatMessage:(D,v)=>{Z&&(console.log("Sending chat message:",{roomId:D,message:v}),Z.emit("chat-message",{roomId:D,message:v}))},spectatorToPlayer:()=>{Z&&(console.log("Requesting to become player"),Z.emit("spectator-to-player"))},playerToSpectator:()=>{Z&&(console.log("Requesting to become spectator"),Z.emit("player-to-spectator"))}}},Nr=()=>{const e=g.useRef(null),t=g.useRef(null),s=g.useRef(null),[n,i]=g.useState(40),[o,a]=g.useState(520),[l,c]=g.useState(1),[d,u]=g.useState(null),{board:h,currentPlayer:p,gameState:x,makeMove:C,myColor:b,roomId:P,lastMove:A,winningLine:S}=ce(),{sendMove:w}=mn(),O=h.length;g.useEffect(()=>{const m=()=>{const I=window.innerWidth,H=window.innerHeight,K=window.devicePixelRatio||1;if(I<640){const E=I-15,F=H-15-25-25-15,$=Math.min(E,F),X=Math.min($,E*.95),Y=Math.floor(X/O),te=Y*O;i(Y),a(te),c(K),console.log("Mobile board size:",{viewport:{width:I,height:H},available:{width:E,height:F},target:X,cell:Y,board:te})}else{const R=H-30-35-30,E=Math.min(580,R*.9),F=180*2,$=I-F-60,X=Math.min(E,$,R*.9),Y=Math.floor(X/O),te=Y*O;i(Y),a(te),c(K),console.log("PC board size:",{viewport:{width:I,height:H},availableHeight:R,availableWidth:$,target:X,cell:Y,board:te})}};return m(),window.addEventListener("resize",m),window.addEventListener("orientationchange",m),()=>{window.removeEventListener("resize",m),window.removeEventListener("orientationchange",m)}},[O]);const B=(m,I)=>{const H=e.current,K=s.current;if(!H||!K)return null;const q=K.getBoundingClientRect(),y=window.getComputedStyle(K),f=parseInt(y.paddingLeft)||0,T=parseInt(y.paddingTop)||0,R=m-q.left-f,E=I-q.top-T,F=Math.floor(R/n),$=Math.floor(E/n);return $>=0&&$<O&&F>=0&&F<O?{row:$,col:F}:null},V=m=>{const I=o*l;m.clearRect(0,0,I,I),m.save(),m.scale(l,l);const H=m.createLinearGradient(0,0,o,o);H.addColorStop(0,"#D4A574"),H.addColorStop(.3,"#C19A6B"),H.addColorStop(.6,"#CD9B62"),H.addColorStop(1,"#B8956A"),m.fillStyle=H,m.fillRect(0,0,o,o),m.globalAlpha=.1;for(let q=0;q<50;q++){m.strokeStyle="#8B7355",m.lineWidth=Math.random()*2,m.beginPath();const y=Math.random()*o;m.moveTo(0,y),m.bezierCurveTo(o*.3,y+Math.random()*20-10,o*.7,y+Math.random()*20-10,o,y+Math.random()*10-5),m.stroke()}m.globalAlpha=1,m.shadowColor="rgba(0, 0, 0, 0.3)",m.shadowBlur=2,m.shadowOffsetX=1,m.shadowOffsetY=1,m.strokeStyle="#2C1810",m.lineWidth=1.5;for(let q=0;q<O;q++){const y=q*n+n/2;m.beginPath(),m.moveTo(n/2,y),m.lineTo(o-n/2,y),m.stroke(),m.beginPath(),m.moveTo(y,n/2),m.lineTo(y,o-n/2),m.stroke()}m.shadowColor="transparent",m.shadowBlur=0,m.shadowOffsetX=0,m.shadowOffsetY=0;const K=[{row:3,col:3},{row:3,col:9},{row:9,col:3},{row:9,col:9},{row:6,col:6}];m.fillStyle="#1A0E08",K.forEach(q=>{if(q.row<O&&q.col<O){const y=q.col*n+n/2,f=q.row*n+n/2;m.beginPath(),m.arc(y,f,5,0,Math.PI*2),m.fill(),m.fillStyle="#2C1810",m.beginPath(),m.arc(y,f,3,0,Math.PI*2),m.fill(),m.fillStyle="#1A0E08"}}),m.restore()},U=(m,I,H,K,q=!1)=>{const y=H*n+n/2,f=I*n+n/2,T=n*.42;if(m.save(),m.scale(l,l),K===1){const R=m.createRadialGradient(y-T/3,f-T/3,0,y,f,T);R.addColorStop(0,"#4A4A4A"),R.addColorStop(.5,"#2C2C2C"),R.addColorStop(.8,"#1A1A1A"),R.addColorStop(1,"#000000"),m.shadowColor="rgba(0, 0, 0, 0.5)",m.shadowBlur=5,m.shadowOffsetX=2,m.shadowOffsetY=2,m.fillStyle=R,m.beginPath(),m.arc(y,f,T,0,Math.PI*2),m.fill();const E=m.createRadialGradient(y-T/3,f-T/3,0,y-T/3,f-T/3,T/2);E.addColorStop(0,"rgba(255, 255, 255, 0.3)"),E.addColorStop(1,"rgba(255, 255, 255, 0)"),m.fillStyle=E,m.beginPath(),m.arc(y,f,T,0,Math.PI*2),m.fill()}else{const R=m.createRadialGradient(y-T/3,f-T/3,0,y,f,T);R.addColorStop(0,"#FFFFFF"),R.addColorStop(.3,"#F8F8F8"),R.addColorStop(.7,"#E8E8E8"),R.addColorStop(1,"#D0D0D0"),m.shadowColor="rgba(0, 0, 0, 0.3)",m.shadowBlur=4,m.shadowOffsetX=2,m.shadowOffsetY=2,m.fillStyle=R,m.beginPath(),m.arc(y,f,T,0,Math.PI*2),m.fill(),m.strokeStyle="#B0B0B0",m.lineWidth=1,m.stroke();const E=m.createRadialGradient(y-T/4,f-T/4,0,y-T/4,f-T/4,T/3);E.addColorStop(0,"rgba(255, 255, 255, 0.9)"),E.addColorStop(1,"rgba(255, 255, 255, 0)"),m.fillStyle=E,m.beginPath(),m.arc(y,f,T,0,Math.PI*2),m.fill()}q&&(m.shadowColor="#FFD700",m.shadowBlur=15,m.strokeStyle="#FFD700",m.lineWidth=3,m.beginPath(),m.arc(y,f,T+5,0,Math.PI*2),m.stroke()),m.restore()},D=m=>{if(!A)return;m.save(),m.scale(l,l);const I=A.col*n+n/2,H=A.row*n+n/2,K=n*.2,q=n*.35,y=Date.now()/1e3,f=Math.sin(y*3)*.1+.9;m.strokeStyle="#FF6B6B",m.lineWidth=3,m.lineCap="round",m.globalAlpha=f,[{dx:-1,dy:-1},{dx:1,dy:-1},{dx:1,dy:1},{dx:-1,dy:1}].forEach(R=>{m.beginPath(),m.moveTo(I+R.dx*q,H+R.dy*q),m.lineTo(I+R.dx*(q-K),H+R.dy*q),m.moveTo(I+R.dx*q,H+R.dy*q),m.lineTo(I+R.dx*q,H+R.dy*(q-K)),m.stroke()}),m.restore()},v=m=>{if(!S||S.length<5)return;m.save(),m.scale(l,l);const I=S[0],H=S[S.length-1],K=I.col*n+n/2,q=I.row*n+n/2,y=H.col*n+n/2,f=H.row*n+n/2,T=Date.now()/100,R=T%20;m.strokeStyle="#FFD700",m.lineWidth=4,m.lineCap="round",m.shadowColor="#FFD700",m.shadowBlur=20,m.setLineDash([10,10]),m.lineDashOffset=-R,m.beginPath(),m.moveTo(K,q),m.lineTo(y,f),m.stroke();const E=5;for(let F=0;F<E;F++){const $=(T/10+F*20)%100/100,X=K+(y-K)*$,Y=q+(f-q)*$;m.fillStyle="#FFD700",m.globalAlpha=1-$,m.beginPath(),m.arc(X,Y,3+$*5,0,Math.PI*2),m.fill()}m.restore()},N=m=>{if(!d||x!=="playing"||p!==b||h[d.row][d.col]!==0)return;const I=o*l;m.clearRect(0,0,I,I),m.save(),m.scale(l,l);const H=d.col*n+n/2,K=d.row*n+n/2,q=n*.42,y=Date.now()/1e3,f=Math.sin(y*4)*.1+.9;if(m.globalAlpha=.5,p===1){const T=m.createRadialGradient(H,K,0,H,K,q*f);T.addColorStop(0,"rgba(0, 0, 0, 0.8)"),T.addColorStop(1,"rgba(0, 0, 0, 0.4)"),m.fillStyle=T}else{const T=m.createRadialGradient(H,K,0,H,K,q*f);T.addColorStop(0,"rgba(255, 255, 255, 0.9)"),T.addColorStop(1,"rgba(255, 255, 255, 0.5)"),m.fillStyle=T}m.beginPath(),m.arc(H,K,q*f,0,Math.PI*2),m.fill(),m.strokeStyle=p===1?"rgba(0, 0, 0, 0.3)":"rgba(255, 255, 255, 0.5)",m.lineWidth=2,m.beginPath(),m.arc(H,K,q*f+5,0,Math.PI*2),m.stroke(),m.restore()};g.useEffect(()=>{const m=e.current,I=m==null?void 0:m.getContext("2d");if(!I||!m)return;m.width=o*l,m.height=o*l,V(I),h.forEach((q,y)=>{q.forEach((f,T)=>{if(f!==0){const R=(S==null?void 0:S.some(E=>E.row===y&&E.col===T))||!1;U(I,y,T,f,R)}})}),D(I),v(I);let H;const K=()=>{D(I),v(I),H=requestAnimationFrame(K)};return(A||S)&&K(),()=>{H&&cancelAnimationFrame(H)}},[h,n,o,A,S,l]),g.useEffect(()=>{const m=t.current,I=m==null?void 0:m.getContext("2d");if(!I||!m)return;m.width=o*l,m.height=o*l,N(I);let H;const K=()=>{N(I),H=requestAnimationFrame(K)};return K(),()=>{cancelAnimationFrame(H)}},[d,h,x,p,b,n,o,l]);const z=m=>{if(x!=="playing"||p!==b)return;const I="touches"in m?m.touches[0].clientX:m.clientX,H="touches"in m?m.touches[0].clientY:m.clientY,K=B(I,H);if(!K)return;const{row:q,col:y}=K;h[q][y]===0&&(C(q,y),w&&P&&w(P,q,y),u(null))},M=m=>{const I=B(m.clientX,m.clientY);u(I)},j=()=>{u(null)},k=m=>{z(m)};return r.jsx(_.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3},className:"inline-block",children:r.jsxs("div",{ref:s,className:"relative pixel-container p-1 sm:p-2 bg-gradient-to-br from-amber-900/20 to-amber-800/20",onClick:z,onMouseMove:M,onMouseLeave:j,onTouchStart:k,style:{cursor:x==="playing"&&p===b?"pointer":"not-allowed"},children:[r.jsx("canvas",{ref:e,style:{width:`${o}px`,height:`${o}px`,display:"block",imageRendering:"crisp-edges"}}),r.jsx("canvas",{ref:t,className:"absolute top-1 left-1 sm:top-2 sm:left-2 pointer-events-none",style:{width:`${o}px`,height:`${o}px`,imageRendering:"crisp-edges"}})]})})},Od=({onJoinRoom:e})=>{const[t,s]=g.useState(""),[n,i]=g.useState([]),[o,a]=g.useState(!1),{socket:l,connected:c}=mn(),{setRoomInfo:d,setUserRole:u,generateRandomNickname:h,setMyNickname:p}=ce();console.log("RoomManager - connected:",c,"socket:",l),g.useEffect(()=>{if(l)return l.on("room-list",P=>{i(P)}),l.on("room-created",P=>{const A=h();p(A),l.emit("set-nickname",{roomId:P.roomId,nickname:A}),d(P.roomId,P.isHost),u("player"),e(),a(!1)}),l.on("room-joined",P=>{const A=h();p(A),l.emit("set-nickname",{roomId:P.roomId,nickname:A}),d(P.roomId,P.isHost),u("player"),e(),a(!1)}),l.on("spectator-joined",P=>{const A=h();p(A),l.emit("set-nickname",{roomId:P.roomId,nickname:A}),d(P.roomId,!1),u("spectator"),e(),a(!1)}),l.on("room-error",P=>{alert(P.message),a(!1)}),l.emit("get-rooms"),()=>{l.off("room-list"),l.off("room-created"),l.off("room-joined"),l.off("spectator-joined"),l.off("room-error")}},[l,e,d,u,h,p]);const x=()=>{if(!l||!c){alert("未连接到服务器");return}a(!0),l.emit("create-room")},C=P=>{const A=P||t.trim();if(!A){alert("请输入房间ID");return}if(!l||!c){alert("未连接到服务器");return}a(!0),l.emit("join-room",{roomId:A})},b=P=>{const A=P||t.trim();if(!A){alert("请输入房间ID");return}if(!l||!c){alert("未连接到服务器");return}a(!0),l.emit("join-as-spectator",{roomId:A})};return r.jsxs("div",{className:"space-y-3",children:[r.jsxs(_.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center",children:[r.jsx("h2",{className:"text-lg sm:text-xl font-game font-bold text-white",children:"五子棋房间管理"}),r.jsx("p",{className:"text-gray-400 text-xs sm:text-sm",children:"创建新房间或加入现有房间开始游戏"})]}),r.jsxs(_.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"bg-gray-800 rounded-lg p-3 sm:p-4 space-y-2",children:[r.jsxs("div",{className:"space-y-1.5",children:[r.jsx("h3",{className:"text-sm font-game text-purple-400",children:"创建新房间"}),r.jsx("button",{onClick:x,disabled:o||!c,className:"w-full pixel-btn bg-purple-600 hover:bg-purple-700 py-1.5 text-xs sm:text-sm",children:o?"创建中...":"创建房间"})]}),r.jsx("div",{className:"border-t border-gray-700"}),r.jsxs("div",{className:"space-y-1.5",children:[r.jsx("h3",{className:"text-sm font-game text-pink-400",children:"加入房间"}),r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsx("input",{type:"text",value:t,onChange:P=>s(P.target.value.toUpperCase()),onKeyPress:P=>P.key==="Enter"&&C(),placeholder:"输入房间ID",className:"w-full px-2 py-1 bg-gray-700 text-white rounded-lg border border-gray-600 focus:border-pink-400 focus:outline-none text-xs sm:text-sm",maxLength:6}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>C(),disabled:o||!c,className:"flex-1 pixel-btn bg-pink-600 hover:bg-pink-700 py-1 px-3 text-xs sm:text-sm",children:"加入游戏"}),r.jsx("button",{onClick:()=>b(),disabled:o||!c,className:"flex-1 pixel-btn bg-yellow-600 hover:bg-yellow-700 py-1 px-3 text-xs sm:text-sm",children:"观战"})]})]})]}),r.jsx("div",{className:"border-t border-gray-700"}),r.jsxs("div",{className:"space-y-1.5",children:[r.jsx("h3",{className:"text-sm font-game text-blue-400",children:"可用房间"}),r.jsx("div",{className:"space-y-1 max-h-32 sm:max-h-40 overflow-y-auto custom-scrollbar",children:n.length===0?r.jsx("p",{className:"text-gray-500 text-center py-2 text-xs sm:text-sm",children:"暂无可用房间"}):n.map(P=>r.jsxs(_.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"flex items-center justify-between p-1.5 bg-gray-700 rounded-lg hover:bg-gray-600 transition-colors",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-pixel text-yellow-400 text-xs sm:text-sm",children:P.id}),r.jsxs("span",{className:"ml-2 text-xs text-gray-400",children:[P.playerCount,"/2 玩家"]})]}),r.jsxs("div",{className:"flex gap-1",children:[P.playerCount<2&&r.jsx("button",{onClick:()=>C(P.id),disabled:o,className:"px-2 py-0.5 bg-blue-600 hover:bg-blue-700 text-white text-xs rounded transition-colors",children:"加入"}),r.jsx("button",{onClick:()=>b(P.id),disabled:o,className:"px-2 py-0.5 bg-yellow-600 hover:bg-yellow-700 text-white text-xs rounded transition-colors",children:"观战"})]})]},P.id))})]})]}),r.jsx("div",{className:"text-center",children:r.jsx("span",{className:`text-xs ${c?"text-green-400":"text-red-400"}`,children:c?"✓ 已连接到服务器":"✗ 未连接到服务器"})})]})},gt=({color:e,size:t="medium",isActive:s=!1,className:n=""})=>{const i={small:"w-7 h-7 text-xs",medium:"w-10 h-10 text-sm",large:"w-12 h-12 text-base"},o=l=>l===1?"🐼":l===2?"🦊":"👤",a=l=>l===1?"bg-gradient-to-br from-gray-800 to-black text-white":l===2?"bg-gradient-to-br from-white to-gray-200 text-gray-800 border-2 border-gray-400":"bg-gray-600 text-gray-400";return r.jsxs(_.div,{className:de(i[t],a(e),"rounded-full flex items-center justify-center shadow-lg font-bold relative",n),animate:s?{scale:[1,1.1,1]}:{},transition:s?{repeat:1/0,duration:2}:{},children:[r.jsx("span",{className:t==="small"?"text-sm":"text-lg",children:o(e)}),s&&r.jsx(_.div,{className:"absolute -bottom-1 -right-1 w-2.5 h-2.5 bg-green-400 rounded-full border-2 border-gray-900",animate:{scale:[.8,1.2,.8]},transition:{repeat:1/0,duration:1.5}}),r.jsx("div",{className:de("absolute -top-1 -right-1 rounded-full shadow-md",t==="small"?"w-3 h-3":"w-4 h-4",e===1?"bg-gradient-to-br from-gray-700 to-black":e===2?"bg-gradient-to-br from-white to-gray-300 border border-gray-400":"hidden")})]})},js=({side:e})=>{const{currentPlayer:t,gameState:s,myColor:n,score:i,roundNumber:o,winner:a,userRole:l,myNickname:c,opponentNickname:d}=ce(),u=l==="spectator",h=u?1:n,p=u||n===1?2:n===2?1:null;return e==="left"?r.jsx("div",{className:"pixel-container bg-gradient-to-b from-gray-800/50 to-gray-900/50 p-2 w-44",children:r.jsxs("div",{className:"flex flex-col items-center gap-1",children:[r.jsx("div",{className:`text-xs font-bold text-white px-2 py-0.5 rounded ${u?"bg-gray-600/20":"bg-green-600/20"}`,children:u?"黑方":"你的棋子"}),r.jsx(gt,{color:h,size:"medium",isActive:s==="playing"&&t===h}),!u&&c&&r.jsx("div",{className:"text-xs text-yellow-300 font-game truncate max-w-full px-1",children:c}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("div",{className:`w-4 h-4 rounded-full shadow-lg ${h===1?"bg-gradient-to-br from-gray-800 to-black":h===2?"bg-gradient-to-br from-white to-gray-200 border border-gray-400":"bg-gray-600"}`}),r.jsx("span",{className:"text-sm font-game text-white",children:h===1?"黑棋":h===2?"白棋":"未定"})]}),r.jsxs("div",{className:"text-xs text-gray-300",children:["得分: ",r.jsx("span",{className:"text-yellow-400 font-bold",children:h===1?i.black:h===2?i.white:0})]}),!u&&s==="playing"&&t===n&&r.jsx(_.div,{className:"text-green-400 font-pixel text-xs bg-green-400/10 px-2 py-0.5 rounded animate-pulse",animate:{scale:[1,1.05,1]},transition:{repeat:1/0,duration:1.5},children:"🎯 你的回合"}),u&&s==="playing"&&t===1&&r.jsx(_.div,{className:"text-blue-400 font-pixel text-xs bg-blue-400/10 px-2 py-0.5 rounded animate-pulse",animate:{scale:[1,1.05,1]},transition:{repeat:1/0,duration:1.5},children:"黑棋思考中"}),u&&s==="waiting"&&r.jsx(_.div,{className:"text-yellow-400 font-pixel text-xs bg-yellow-400/10 px-2 py-0.5 rounded animate-pulse",animate:{opacity:[.5,1,.5]},transition:{repeat:1/0,duration:2},children:"等待开局"}),u&&s==="finished"&&a===1&&r.jsx(_.div,{className:"text-yellow-400 font-pixel text-xs bg-yellow-400/10 px-2 py-0.5 rounded",initial:{scale:0},animate:{scale:1},transition:{type:"spring",damping:10},children:"⚫ 黑棋获胜"})]})}):e==="right"?r.jsx("div",{className:"pixel-container bg-gradient-to-b from-gray-800/50 to-gray-900/50 p-2 w-44",children:r.jsxs("div",{className:"flex flex-col items-center gap-1",children:[r.jsx("div",{className:"text-xs text-gray-400",children:u?"白方":"对手棋子"}),r.jsx(gt,{color:p,size:"medium",isActive:s==="playing"&&t===p}),!u&&d&&r.jsx("div",{className:"text-xs text-yellow-300 font-game truncate max-w-full px-1",children:d}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("div",{className:`w-4 h-4 rounded-full shadow-lg ${p===1?"bg-gradient-to-br from-gray-800 to-black":p===2?"bg-gradient-to-br from-white to-gray-200 border border-gray-400":"bg-gray-600"}`}),r.jsx("span",{className:"text-sm font-game text-white",children:p===1?"黑棋":p===2?"白棋":"未定"})]}),r.jsxs("div",{className:"text-xs text-gray-300",children:["得分: ",r.jsx("span",{className:"text-yellow-400 font-bold",children:p===1?i.black:p===2?i.white:0})]}),r.jsxs("div",{className:"text-gray-400 font-game bg-gray-800/50 px-2 py-0.5 rounded text-xs",children:["第 ",o," 回合"]}),s==="waiting"&&!u&&r.jsx(_.span,{className:"text-yellow-400 font-pixel text-xs bg-yellow-400/10 px-2 py-0.5 rounded animate-pulse",animate:{opacity:[.5,1,.5]},transition:{repeat:1/0,duration:2},children:"等待对手..."}),s==="waiting"&&u&&r.jsx(_.span,{className:"text-yellow-400 font-pixel text-xs bg-yellow-400/10 px-2 py-0.5 rounded animate-pulse",animate:{opacity:[.5,1,.5]},transition:{repeat:1/0,duration:2},children:"等待开局..."}),s==="playing"&&!u&&t!==n&&r.jsx("span",{className:"text-blue-400 font-pixel text-xs bg-blue-400/10 px-2 py-0.5 rounded",children:"对手思考中..."}),s==="playing"&&u&&t===2&&r.jsx(_.div,{className:"text-blue-400 font-pixel text-xs bg-blue-400/10 px-2 py-0.5 rounded animate-pulse",animate:{scale:[1,1.05,1]},transition:{repeat:1/0,duration:1.5},children:"白棋思考中"}),s==="finished"&&!u&&r.jsx(_.span,{className:`font-pixel text-xs px-2 py-0.5 rounded ${a===n?"text-yellow-400 bg-yellow-400/10 animate-glow":"text-gray-400 bg-gray-400/10"}`,initial:{scale:0},animate:{scale:1},transition:{type:"spring",damping:10},children:a===n?"🎉 你赢了！":"💪 再接再厉"}),s==="finished"&&u&&r.jsx(_.span,{className:"text-yellow-400 bg-yellow-400/10 font-pixel text-xs px-2 py-0.5 rounded",initial:{scale:0},animate:{scale:1},transition:{type:"spring",damping:10},children:a===1?"⚫ 黑棋获胜":"⚪ 白棋获胜"})]})}):r.jsx(r.Fragment,{children:r.jsx("div",{className:"sm:hidden",children:r.jsxs("div",{className:"flex items-center justify-between px-1 py-0.5",children:[r.jsxs("div",{className:"flex items-center gap-0.5",children:[r.jsx(gt,{color:u?1:n,size:"small",isActive:s==="playing"&&t===(u?1:n)}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-[8px] text-gray-400",children:u?"黑方":"你"}),r.jsxs("div",{className:"flex items-center gap-0.5",children:[r.jsx("span",{className:"font-game text-xs text-white",children:u||n===1?"黑":n===2?"白":"-"}),r.jsxs("span",{className:"text-[10px] text-gray-400",children:["(",u||n===1?i.black:n===2?i.white:0,")"]})]})]})]}),r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsxs("div",{className:"text-[9px] text-gray-400 font-pixel",children:["第",o,"回合"]}),r.jsxs("div",{className:"text-[9px] mt-0",children:[s==="waiting"&&!u&&r.jsx("span",{className:"text-yellow-400 font-pixel animate-pulse",children:"等待对手"}),s==="waiting"&&u&&r.jsx("span",{className:"text-yellow-400 font-pixel animate-pulse",children:"等待开局"}),s==="playing"&&!u&&t===n&&r.jsx("span",{className:"text-green-400 font-pixel animate-pulse",children:"你的回合"}),s==="playing"&&!u&&t!==n&&r.jsx("span",{className:"text-blue-400 font-pixel",children:"对手思考"}),s==="playing"&&u&&r.jsx("span",{className:"text-blue-400 font-pixel",children:t===1?"黑棋思考":"白棋思考"}),s==="finished"&&r.jsx("span",{className:u||a===n?"text-yellow-400":"text-gray-400",children:u?a===1?"黑棋胜":"白棋胜":a===n?"你赢了":"再接再厉"})]})]}),r.jsxs("div",{className:"flex items-center gap-0.5",children:[r.jsxs("div",{className:"flex flex-col items-end",children:[r.jsx("span",{className:"text-[8px] text-gray-400",children:u?"白方":"对手"}),r.jsxs("div",{className:"flex items-center gap-0.5",children:[r.jsxs("span",{className:"text-[10px] text-gray-400",children:["(",u?i.white:p===1?i.black:p===2?i.white:0,")"]}),r.jsx("span",{className:"font-game text-xs text-white",children:u?"白":p===1?"黑":p===2?"白":"-"})]})]}),r.jsx(gt,{color:u?2:p,size:"small",isActive:s==="playing"&&t===(u?2:p)})]})]})})})},zd=()=>{const{notifications:e,removeNotification:t}=ce();return r.jsx("div",{className:"fixed top-20 right-4 z-50 space-y-2 pointer-events-none",children:r.jsx(je,{children:e.map(s=>r.jsx(_.div,{initial:{opacity:0,x:100,scale:.8},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:100,scale:.8},transition:{duration:.3},className:de("pixel-container p-3 min-w-[200px] max-w-[300px] pointer-events-auto cursor-pointer","backdrop-blur-sm shadow-lg",{"bg-blue-600/90 border-blue-400":s.type==="info","bg-green-600/90 border-green-400":s.type==="success","bg-yellow-600/90 border-yellow-400":s.type==="warning","bg-red-600/90 border-red-400":s.type==="error"}),onClick:()=>t(s.id),children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsxs("div",{className:"text-white",children:[s.type==="info"&&"📢",s.type==="success"&&"✅",s.type==="warning"&&"⚠️",s.type==="error"&&"❌"]}),r.jsx("p",{className:"text-white text-sm font-game flex-1",children:s.message})]})},s.id))})})};var kt={};(function e(t,s,n,i){var o=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL),a=typeof Path2D=="function"&&typeof DOMMatrix=="function",l=function(){if(!t.OffscreenCanvas)return!1;var y=new OffscreenCanvas(1,1),f=y.getContext("2d");f.fillRect(0,0,1,1);var T=y.transferToImageBitmap();try{f.createPattern(T,"no-repeat")}catch{return!1}return!0}();function c(){}function d(y){var f=s.exports.Promise,T=f!==void 0?f:t.Promise;return typeof T=="function"?new T(y):(y(c,c),null)}var u=function(y,f){return{transform:function(T){if(y)return T;if(f.has(T))return f.get(T);var R=new OffscreenCanvas(T.width,T.height),E=R.getContext("2d");return E.drawImage(T,0,0),f.set(T,R),R},clear:function(){f.clear()}}}(l,new Map),h=function(){var y=Math.floor(16.666666666666668),f,T,R={},E=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(f=function(F){var $=Math.random();return R[$]=requestAnimationFrame(function X(Y){E===Y||E+y-1<Y?(E=Y,delete R[$],F()):R[$]=requestAnimationFrame(X)}),$},T=function(F){R[F]&&cancelAnimationFrame(R[F])}):(f=function(F){return setTimeout(F,y)},T=function(F){return clearTimeout(F)}),{frame:f,cancel:T}}(),p=function(){var y,f,T={};function R(E){function F($,X){E.postMessage({options:$||{},callback:X})}E.init=function(X){var Y=X.transferControlToOffscreen();E.postMessage({canvas:Y},[Y])},E.fire=function(X,Y,te){if(f)return F(X,null),f;var L=Math.random().toString(36).slice(2);return f=d(function(W){function G(Q){Q.data.callback===L&&(delete T[L],E.removeEventListener("message",G),f=null,u.clear(),te(),W())}E.addEventListener("message",G),F(X,L),T[L]=G.bind(null,{data:{callback:L}})}),f},E.reset=function(){E.postMessage({reset:!0});for(var X in T)T[X](),delete T[X]}}return function(){if(y)return y;if(!n&&o){var E=["var CONFETTI, SIZE = {}, module = {};","("+e.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{y=new Worker(URL.createObjectURL(new Blob([E])))}catch(F){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("🎊 Could not load worker",F),null}R(y)}return y}}(),x={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function C(y,f){return f?f(y):y}function b(y){return y!=null}function P(y,f,T){return C(y&&b(y[f])?y[f]:x[f],T)}function A(y){return y<0?0:Math.floor(y)}function S(y,f){return Math.floor(Math.random()*(f-y))+y}function w(y){return parseInt(y,16)}function O(y){return y.map(B)}function B(y){var f=String(y).replace(/[^0-9a-f]/gi,"");return f.length<6&&(f=f[0]+f[0]+f[1]+f[1]+f[2]+f[2]),{r:w(f.substring(0,2)),g:w(f.substring(2,4)),b:w(f.substring(4,6))}}function V(y){var f=P(y,"origin",Object);return f.x=P(f,"x",Number),f.y=P(f,"y",Number),f}function U(y){y.width=document.documentElement.clientWidth,y.height=document.documentElement.clientHeight}function D(y){var f=y.getBoundingClientRect();y.width=f.width,y.height=f.height}function v(y){var f=document.createElement("canvas");return f.style.position="fixed",f.style.top="0px",f.style.left="0px",f.style.pointerEvents="none",f.style.zIndex=y,f}function N(y,f,T,R,E,F,$,X,Y){y.save(),y.translate(f,T),y.rotate(F),y.scale(R,E),y.arc(0,0,1,$,X,Y),y.restore()}function z(y){var f=y.angle*(Math.PI/180),T=y.spread*(Math.PI/180);return{x:y.x,y:y.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:y.startVelocity*.5+Math.random()*y.startVelocity,angle2D:-f+(.5*T-Math.random()*T),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:y.color,shape:y.shape,tick:0,totalTicks:y.ticks,decay:y.decay,drift:y.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:y.gravity*3,ovalScalar:.6,scalar:y.scalar,flat:y.flat}}function M(y,f){f.x+=Math.cos(f.angle2D)*f.velocity+f.drift,f.y+=Math.sin(f.angle2D)*f.velocity+f.gravity,f.velocity*=f.decay,f.flat?(f.wobble=0,f.wobbleX=f.x+10*f.scalar,f.wobbleY=f.y+10*f.scalar,f.tiltSin=0,f.tiltCos=0,f.random=1):(f.wobble+=f.wobbleSpeed,f.wobbleX=f.x+10*f.scalar*Math.cos(f.wobble),f.wobbleY=f.y+10*f.scalar*Math.sin(f.wobble),f.tiltAngle+=.1,f.tiltSin=Math.sin(f.tiltAngle),f.tiltCos=Math.cos(f.tiltAngle),f.random=Math.random()+2);var T=f.tick++/f.totalTicks,R=f.x+f.random*f.tiltCos,E=f.y+f.random*f.tiltSin,F=f.wobbleX+f.random*f.tiltCos,$=f.wobbleY+f.random*f.tiltSin;if(y.fillStyle="rgba("+f.color.r+", "+f.color.g+", "+f.color.b+", "+(1-T)+")",y.beginPath(),a&&f.shape.type==="path"&&typeof f.shape.path=="string"&&Array.isArray(f.shape.matrix))y.fill(H(f.shape.path,f.shape.matrix,f.x,f.y,Math.abs(F-R)*.1,Math.abs($-E)*.1,Math.PI/10*f.wobble));else if(f.shape.type==="bitmap"){var X=Math.PI/10*f.wobble,Y=Math.abs(F-R)*.1,te=Math.abs($-E)*.1,L=f.shape.bitmap.width*f.scalar,W=f.shape.bitmap.height*f.scalar,G=new DOMMatrix([Math.cos(X)*Y,Math.sin(X)*Y,-Math.sin(X)*te,Math.cos(X)*te,f.x,f.y]);G.multiplySelf(new DOMMatrix(f.shape.matrix));var Q=y.createPattern(u.transform(f.shape.bitmap),"no-repeat");Q.setTransform(G),y.globalAlpha=1-T,y.fillStyle=Q,y.fillRect(f.x-L/2,f.y-W/2,L,W),y.globalAlpha=1}else if(f.shape==="circle")y.ellipse?y.ellipse(f.x,f.y,Math.abs(F-R)*f.ovalScalar,Math.abs($-E)*f.ovalScalar,Math.PI/10*f.wobble,0,2*Math.PI):N(y,f.x,f.y,Math.abs(F-R)*f.ovalScalar,Math.abs($-E)*f.ovalScalar,Math.PI/10*f.wobble,0,2*Math.PI);else if(f.shape==="star")for(var ee=Math.PI/2*3,re=4*f.scalar,ue=8*f.scalar,pe=f.x,ge=f.y,be=5,fe=Math.PI/be;be--;)pe=f.x+Math.cos(ee)*ue,ge=f.y+Math.sin(ee)*ue,y.lineTo(pe,ge),ee+=fe,pe=f.x+Math.cos(ee)*re,ge=f.y+Math.sin(ee)*re,y.lineTo(pe,ge),ee+=fe;else y.moveTo(Math.floor(f.x),Math.floor(f.y)),y.lineTo(Math.floor(f.wobbleX),Math.floor(E)),y.lineTo(Math.floor(F),Math.floor($)),y.lineTo(Math.floor(R),Math.floor(f.wobbleY));return y.closePath(),y.fill(),f.tick<f.totalTicks}function j(y,f,T,R,E){var F=f.slice(),$=y.getContext("2d"),X,Y,te=d(function(L){function W(){X=Y=null,$.clearRect(0,0,R.width,R.height),u.clear(),E(),L()}function G(){n&&!(R.width===i.width&&R.height===i.height)&&(R.width=y.width=i.width,R.height=y.height=i.height),!R.width&&!R.height&&(T(y),R.width=y.width,R.height=y.height),$.clearRect(0,0,R.width,R.height),F=F.filter(function(Q){return M($,Q)}),F.length?X=h.frame(G):W()}X=h.frame(G),Y=W});return{addFettis:function(L){return F=F.concat(L),te},canvas:y,promise:te,reset:function(){X&&h.cancel(X),Y&&Y()}}}function k(y,f){var T=!y,R=!!P(f||{},"resize"),E=!1,F=P(f,"disableForReducedMotion",Boolean),$=o&&!!P(f||{},"useWorker"),X=$?p():null,Y=T?U:D,te=y&&X?!!y.__confetti_initialized:!1,L=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,W;function G(ee,re,ue){for(var pe=P(ee,"particleCount",A),ge=P(ee,"angle",Number),be=P(ee,"spread",Number),fe=P(ee,"startVelocity",Number),Je=P(ee,"decay",Number),Rt=P(ee,"gravity",Number),At=P(ee,"drift",Number),ct=P(ee,"colors",O),Vt=P(ee,"ticks",Number),dt=P(ee,"shapes"),Dt=P(ee,"scalar"),xe=!!P(ee,"flat"),Et=V(ee),Lt=pe,ls=[],ro=y.width*Et.x,io=y.height*Et.y;Lt--;)ls.push(z({x:ro,y:io,angle:ge,spread:be,startVelocity:fe,color:ct[Lt%ct.length],shape:dt[S(0,dt.length)],ticks:Vt,decay:Je,gravity:Rt,drift:At,scalar:Dt,flat:xe}));return W?W.addFettis(ls):(W=j(y,ls,Y,re,ue),W.promise)}function Q(ee){var re=F||P(ee,"disableForReducedMotion",Boolean),ue=P(ee,"zIndex",Number);if(re&&L)return d(function(fe){fe()});T&&W?y=W.canvas:T&&!y&&(y=v(ue),document.body.appendChild(y)),R&&!te&&Y(y);var pe={width:y.width,height:y.height};X&&!te&&X.init(y),te=!0,X&&(y.__confetti_initialized=!0);function ge(){if(X){var fe={getBoundingClientRect:function(){if(!T)return y.getBoundingClientRect()}};Y(fe),X.postMessage({resize:{width:fe.width,height:fe.height}});return}pe.width=pe.height=null}function be(){W=null,R&&(E=!1,t.removeEventListener("resize",ge)),T&&y&&(document.body.contains(y)&&document.body.removeChild(y),y=null,te=!1)}return R&&!E&&(E=!0,t.addEventListener("resize",ge,!1)),X?X.fire(ee,pe,be):G(ee,pe,be)}return Q.reset=function(){X&&X.reset(),W&&W.reset()},Q}var m;function I(){return m||(m=k(null,{useWorker:!0,resize:!0})),m}function H(y,f,T,R,E,F,$){var X=new Path2D(y),Y=new Path2D;Y.addPath(X,new DOMMatrix(f));var te=new Path2D;return te.addPath(Y,new DOMMatrix([Math.cos($)*E,Math.sin($)*E,-Math.sin($)*F,Math.cos($)*F,T,R])),te}function K(y){if(!a)throw new Error("path confetti are not supported in this browser");var f,T;typeof y=="string"?f=y:(f=y.path,T=y.matrix);var R=new Path2D(f),E=document.createElement("canvas"),F=E.getContext("2d");if(!T){for(var $=1e3,X=$,Y=$,te=0,L=0,W,G,Q=0;Q<$;Q+=2)for(var ee=0;ee<$;ee+=2)F.isPointInPath(R,Q,ee,"nonzero")&&(X=Math.min(X,Q),Y=Math.min(Y,ee),te=Math.max(te,Q),L=Math.max(L,ee));W=te-X,G=L-Y;var re=10,ue=Math.min(re/W,re/G);T=[ue,0,0,ue,-Math.round(W/2+X)*ue,-Math.round(G/2+Y)*ue]}return{type:"path",path:f,matrix:T}}function q(y){var f,T=1,R="#000000",E='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof y=="string"?f=y:(f=y.text,T="scalar"in y?y.scalar:T,E="fontFamily"in y?y.fontFamily:E,R="color"in y?y.color:R);var F=10*T,$=""+F+"px "+E,X=new OffscreenCanvas(F,F),Y=X.getContext("2d");Y.font=$;var te=Y.measureText(f),L=Math.ceil(te.actualBoundingBoxRight+te.actualBoundingBoxLeft),W=Math.ceil(te.actualBoundingBoxAscent+te.actualBoundingBoxDescent),G=2,Q=te.actualBoundingBoxLeft+G,ee=te.actualBoundingBoxAscent+G;L+=G+G,W+=G+G,X=new OffscreenCanvas(L,W),Y=X.getContext("2d"),Y.font=$,Y.fillStyle=R,Y.fillText(f,Q,ee);var re=1/T;return{type:"bitmap",bitmap:X.transferToImageBitmap(),matrix:[re,0,0,re,-L*re/2,-W*re/2]}}s.exports=function(){return I().apply(this,arguments)},s.exports.reset=function(){I().reset()},s.exports.create=k,s.exports.shapeFromPath=K,s.exports.shapeFromText=q})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),kt,!1);const $d=kt.exports;kt.exports.create;const Ud=({isOpen:e,onRestart:t,onClose:s,waitingForOpponent:n=!1})=>{const{winner:i,myColor:o,score:a,userRole:l}=ce(),c=i===o,d=l==="spectator";return console.log("GameOverModal - winner:",i,"myColor:",o,"isWinner:",c,"userRole:",l),g.useEffect(()=>{if(e&&c&&!n&&!d){const u=()=>{$d({particleCount:100,spread:70,origin:{y:.6}})};u();const h=setTimeout(u,200),p=setTimeout(u,400);return()=>{clearTimeout(h),clearTimeout(p)}}},[e,c,n,d]),r.jsx(je,{children:e&&r.jsxs(r.Fragment,{children:[r.jsx(_.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40",onClick:n?void 0:s}),r.jsx(_.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{type:"spring",damping:25,stiffness:400},className:"fixed inset-0 flex items-center justify-center z-50 p-4",onClick:u=>u.stopPropagation(),children:r.jsx("div",{className:"pixel-container bg-gray-900 p-6 sm:p-8 max-w-md w-full",children:n?r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"mb-6",children:r.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-yellow-400 mx-auto"})}),r.jsx("h2",{className:"text-2xl font-game font-bold text-yellow-400 mb-4",children:"等待对手..."}),r.jsx("p",{className:"text-gray-300 mb-6",children:"已发送再来一局请求，等待对手同意"})]}):r.jsxs(r.Fragment,{children:[r.jsx(_.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring"},className:"text-center mb-6",children:d?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"text-6xl mb-4",children:"🎮"}),r.jsx("h2",{className:"text-3xl font-game font-bold text-yellow-400 mb-2",children:"游戏结束"}),r.jsx("p",{className:"text-gray-300 text-xl",children:i===1?"黑棋获胜！":i===2?"白棋获胜！":"平局！"})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"text-6xl mb-4",children:c?"🏆":"💪"}),r.jsx("h2",{className:de("text-3xl font-game font-bold mb-2",c?"text-yellow-400 animate-glow":"text-gray-400"),children:c?"恭喜胜利！":"再接再厉！"}),r.jsx("p",{className:"text-gray-300",children:c?"你赢得了这局比赛！":"别灰心，下局再战！"})]})}),r.jsxs(_.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-gray-800/50 rounded-lg p-4 mb-6",children:[r.jsx("div",{className:"text-center text-sm text-gray-400 mb-2",children:"当前比分"}),r.jsxs("div",{className:"flex items-center justify-center gap-6",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-gray-800 to-black rounded-full shadow-lg"}),r.jsx("span",{className:"font-game text-2xl text-white",children:a.black})]}),r.jsx("div",{className:"text-gray-500 text-2xl",children:":"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"font-game text-2xl text-white",children:a.white}),r.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-white to-gray-200 rounded-full border-2 border-gray-400 shadow-lg"})]})]}),r.jsx("div",{className:"text-center text-sm text-gray-400 mt-2",children:i===1?"黑棋获胜":i===2?"白棋获胜":"平局"})]}),r.jsxs("div",{className:"flex gap-3",children:[!d&&r.jsx(_.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:t,className:"flex-1 pixel-btn bg-green-600 hover:bg-green-700 text-white py-3",children:"再来一局"}),r.jsx(_.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:s,className:de("pixel-btn bg-gray-600 hover:bg-gray-700 text-white py-3",d?"w-full":"flex-1"),children:d?"关闭":"查看棋盘"})]})]})})})]})})},Ns=({isOpen:e,title:t,message:s,confirmText:n="同意",cancelText:i="拒绝",onConfirm:o,onCancel:a})=>r.jsx(je,{children:e&&r.jsxs(r.Fragment,{children:[r.jsx(_.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50",onClick:a}),r.jsx(_.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{type:"spring",damping:25,stiffness:400},className:"fixed inset-0 flex items-center justify-center z-50 pointer-events-none px-4",children:r.jsxs("div",{className:"pixel-container bg-gray-900 p-4 sm:p-6 max-w-sm w-full pointer-events-auto",children:[r.jsx("h3",{className:"text-lg sm:text-xl font-game font-bold text-yellow-400 mb-3",children:t}),r.jsx("p",{className:"text-gray-300 mb-6 text-sm sm:text-base",children:s}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:o,className:"flex-1 pixel-btn bg-green-600 hover:bg-green-700 text-white py-2 text-sm sm:text-base",children:n}),r.jsx("button",{onClick:a,className:"flex-1 pixel-btn bg-red-600 hover:bg-red-700 text-white py-2 text-sm sm:text-base",children:i})]})]})})]})}),zt=({onSendMessage:e,userRole:t=null,className:s=""})=>{const[n,i]=g.useState(!1),[o,a]=g.useState("emoji"),l=["😊","😎","🤔","😅","😂","😭","👍","👎","👏","🙏","💪","✌️","🎉","🎯","💯","🔥","⚡","🌟","😤","😮","😲","🤯","😱","🙈"],u=t==="spectator"?["黑棋加油！你是最棒的！","白棋必胜！冲冲冲！","精彩！这局真是太精彩了！","黑棋这步棋下得妙啊！","白棋好厉害，学到了！","这是高手过招啊！","快看快看，要分胜负了！","黑棋稳住，马上就赢了！","白棋反击！还有机会！","太刺激了，我都紧张了！","这局势焦灼啊，谁都有机会","黑棋防守！要小心了！","白棋进攻！就是现在！","神仙打架，我等凡人观战","这棋局值得收藏学习","前排围观，吃瓜看戏🍿","支持黑棋，黑棋YYDS！","白棋粉丝团在此应援！","大家好，我是新来的观众","求解说，看不懂局势了"]:["你好呀！一起来玩吧～","承让承让，侥幸而已！","哇，这步棋真是绝了！","厉害厉害，我要认真了！","再来一局，刚才手滑了～","让你见识见识什么叫高手！","我等到花儿都谢了...","快点啊，我等到天都黑了","容我想想，这步很关键","这一步妙啊，学到了！","你是高手，我甘拜下风","加油加油，你可以的！","哎呀，失误了失误了","看我的绝杀！","友谊第一，比赛第二～","GG，精彩的对局！","别走，决战到天亮！","你这是在针对我吗？","稳住，我们能赢！","今天手感不太好啊..."],h=p=>{e(p),i(!1)};return r.jsxs("div",{className:"relative inline-flex items-center",children:[r.jsxs(_.button,{onClick:()=>i(!n),className:de("pixel-btn bg-purple-600 hover:bg-purple-700 text-white",s||"px-2 sm:px-3 py-1.5 sm:py-2 text-xs sm:text-sm"),whileHover:{scale:1.05},whileTap:{scale:.95},children:[r.jsx("span",{className:"hidden sm:inline",children:"💬 聊天"}),r.jsx("span",{className:"sm:hidden",children:"聊天"})]}),r.jsx(je,{children:n&&r.jsxs(r.Fragment,{children:[r.jsx(_.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 z-40 sm:hidden",onClick:()=>i(!1)}),r.jsxs(_.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{type:"spring",damping:25,stiffness:400},className:de("z-50","sm:absolute sm:bottom-full sm:mb-2 sm:left-1/2 sm:transform sm:-translate-x-1/2 sm:w-80","fixed inset-x-4 top-1/2 -translate-y-1/2 sm:inset-auto sm:translate-y-0","pixel-container bg-gray-900/100 backdrop-blur-sm p-3 sm:p-4","max-h-[300px] max-w-sm mx-auto"),children:[r.jsxs("div",{className:"flex gap-2 mb-3",children:[r.jsx("button",{onClick:()=>a("emoji"),className:de("flex-1 px-3 py-1 rounded text-sm font-pixel transition-all",o==="emoji"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"),children:"表情"}),r.jsx("button",{onClick:()=>a("phrase"),className:de("flex-1 px-3 py-1 rounded text-sm font-pixel transition-all",o==="phrase"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"),children:"短语"})]}),r.jsx("div",{className:"max-h-48 overflow-y-auto custom-scrollbar",children:o==="emoji"?r.jsx("div",{className:"grid grid-cols-6 gap-2",children:l.map((p,x)=>r.jsx(_.button,{onClick:()=>h(p),className:"text-2xl p-2 hover:bg-gray-700 rounded transition-colors",whileHover:{scale:1.2},whileTap:{scale:.9},children:p},x))}):r.jsx("div",{className:"space-y-1",children:u.map((p,x)=>r.jsx(_.button,{onClick:()=>h(p),className:"w-full text-left px-3 py-2 text-sm text-gray-300 hover:bg-gray-700 rounded transition-colors",whileHover:{x:5},whileTap:{scale:.98},children:p},x))})}),r.jsx("div",{className:`hidden sm:block absolute -bottom-2 left-1/2 transform -translate-x-1/2 w-0 h-0 
                border-l-8 border-l-transparent 
                border-r-8 border-r-transparent 
                border-t-8 border-t-gray-900`})]})]})})]})},Gd=({messages:e})=>{const[t,s]=g.useState([]),{myColor:n,gameState:i}=ce();return g.useEffect(()=>{if(e.length>0){const o=e[e.length-1];s(a=>[...a,o]),setTimeout(()=>{s(a=>a.filter(l=>l.id!==o.id))},3e3)}},[e]),i==="waiting"?null:r.jsx(r.Fragment,{children:r.jsx(je,{children:t.map((o,a)=>{const l=o.isOpponent?n===1?2:1:n,c=o.isOpponent;return r.jsx(_.div,{initial:{opacity:0,scale:.3,x:-50,y:0},animate:{opacity:1,scale:1,x:0,y:-a*80},exit:{opacity:0,scale:0,y:-a*80-50},transition:{type:"spring",damping:20,stiffness:300,duration:.5},className:"fixed",style:{top:"50%",left:"20px",transform:"translateY(-50%)",zIndex:40+a},children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(_.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2},children:r.jsx(gt,{color:l,size:"small",className:"pointer-events-auto"})}),r.jsxs(_.div,{className:"relative",initial:{scale:0},animate:{scale:1},transition:{delay:.1},children:[r.jsx("div",{className:`
                      px-4 py-2 rounded-2xl shadow-lg pointer-events-auto
                      max-w-[200px] sm:max-w-[250px] break-words
                      ${c?"bg-gradient-to-r from-blue-500 to-blue-600 text-white":"bg-gradient-to-r from-green-500 to-green-600 text-white"}
                    `,children:o.content.match(/^[\u{1F300}-\u{1FAD6}]$/u)?r.jsx("span",{className:"text-3xl",children:o.content}):r.jsx("span",{className:"text-sm font-medium",children:o.content})}),r.jsx("div",{className:`
                      absolute w-0 h-0 
                      left-0 -ml-2 
                      border-t-8 border-t-transparent 
                      border-b-8 border-b-transparent 
                      border-r-8 
                      ${c?"border-r-blue-500":"border-r-green-500"}
                    `,style:{top:"50%",transform:"translateY(-50%)"}})]})]})},o.id)})})})},Hd=()=>{const[e,t]=g.useState(!1),[s,n]=g.useState(!1),[i,o]=g.useState(!1),[a,l]=g.useState(!1),[c,d]=g.useState(!1),[u,h]=g.useState(!1),[p,x]=g.useState(!1),[C,b]=g.useState(!1),[P,A]=g.useState([]),{gameState:S,roomId:w,resetGame:O,setRoomInfo:B,myColor:V,currentPlayer:U,canUndo:D,winner:v,addNotification:N,history:z,userRole:M}=ce(),{socket:j,connected:k,requestRestart:m,acceptRestart:I,rejectRestart:H,requestUndo:K,acceptUndo:q,rejectUndo:y,surrender:f,sendChatMessage:T,spectatorToPlayer:R,playerToSpectator:E}=mn();console.log("GomokuGame - connected:",k,"isInRoom:",e),g.useEffect(()=>{S==="finished"&&v&&setTimeout(()=>{n(!0)},1e3)},[S,v]),g.useEffect(()=>{if(!j)return;const be=()=>{S==="finished"?(b(!1),n(!1),w&&I(w),N("info","双方同意，游戏即将重新开始")):(o(!0),d(!0))},fe=()=>{b(!1),o(!1),N("warning","❌ 对手拒绝了重新开始请求")},Je=()=>{l(!0),h(!0)},Rt=()=>{l(!1),N("warning","❌ 对手拒绝了悔棋请求")},At=()=>{n(!1),b(!1),o(!1),d(!1),A([])},ct=xe=>{console.log("Player joined room:",xe.playerId),N("success","🎮 对手已加入房间"),j&&(console.log("Auto-readying for game start..."),j.emit("ready-to-play"))},Vt=xe=>{console.log("Player left room:",xe.playerId),ce.setState({gameState:"waiting"}),N("warning","⚠️ 对手已离开房间")},dt=xe=>{console.log("Opponent surrendered, winner:",xe.winner,"myColor:",V),xe.winner!==V&&console.error("Winner color mismatch! Expected:",V,"Got:",xe.winner),ce.setState({gameState:"finished",winner:xe.winner}),ce.getState().updateScore(xe.winner),N("success","🏳️ 对手认输，你赢了！"),setTimeout(()=>{n(!0)},500)},Dt=xe=>{console.log("Received chat message:",xe);const Et={id:Math.random().toString(36).substr(2,9),content:xe.message,isOpponent:!0,timestamp:Date.now()};A(Lt=>[...Lt,Et])};return j.on("restart-request",be),j.on("restart-rejected",fe),j.on("undo-request",Je),j.on("undo-rejected",Rt),j.on("game-restart",At),j.on("player-joined",ct),j.on("player-left",Vt),j.on("opponent-surrender",dt),j.on("chat-message",Dt),()=>{j.off("restart-request",be),j.off("restart-rejected",fe),j.off("undo-request",Je),j.off("undo-rejected",Rt),j.off("game-restart",At),j.off("player-joined",ct),j.off("player-left",Vt),j.off("opponent-surrender",dt),j.off("chat-message",Dt)}},[j,w,I,N,S,V]);const F=be=>{if(!w)return;T(w,be);const fe={id:Math.random().toString(36).substr(2,9),content:be,isOpponent:!1,timestamp:Date.now()};A(Je=>[...Je,fe])},$=()=>{w&&(I(w),o(!1),d(!1),N("success","✅ 已同意重新开始"))},X=()=>{w&&H(w),o(!1),d(!1),N("info","❌ 已拒绝重新开始请求")},Y=()=>{w&&(q(w),l(!1),h(!1),N("success","✅ 已同意悔棋"))},te=()=>{w&&y(w),l(!1),h(!1),N("info","❌ 已拒绝悔棋请求")},L=()=>{j&&w&&j.emit("leave-room",{roomId:w}),t(!1),O(),B(null,!1),b(!1),A([]),N("info","👋 已离开房间")},W=()=>{if(console.log("Restart requested, gameState:",S,"waitingForOpponentRestart:",C),C){N("info","⏳ 正在等待对手同意...");return}j&&w&&(S==="finished"?(b(!0),m(w),N("info","⏳ 等待对手同意再来一局...")):(m(w),N("info","📨 已发送重新开始请求")))},G=()=>{if(!D||U!==V||z.length<2){N("warning","⚠️ 当前不能悔棋");return}j&&w&&(K(w),N("info","📨 已发送悔棋请求，等待对手确认..."))},Q=()=>{if(M!=="player"){N("warning","⚠️ 你已经是观众了");return}x(!0)},ee=()=>{E(),x(!1),N("info","👁️ 你已转为观众")},re=()=>{x(!1)},ue=()=>{if(S!=="playing"||M!=="player"){N("warning","⚠️ 当前不能认输");return}w&&V&&(f(w,V),N("info","🏳️ 你已认输"))},pe=()=>{R()},ge=!D||U!==V||S!=="playing"||a||z.length<2;return r.jsxs("div",{className:"relative",children:[r.jsx(zd,{}),e&&r.jsx(Gd,{messages:P}),r.jsx(Ud,{isOpen:s,onRestart:W,onClose:()=>n(!1),waitingForOpponent:C}),r.jsx(Ns,{isOpen:c,title:"重新开始请求",message:"对手请求重新开始游戏，是否同意？",confirmText:"同意",cancelText:"拒绝",onConfirm:$,onCancel:X}),r.jsx(Ns,{isOpen:u,title:"悔棋请求",message:"对手请求悔棋，是否同意？",confirmText:"同意",cancelText:"拒绝",onConfirm:Y,onCancel:te}),r.jsx(Ns,{isOpen:p,title:"到观众席确认",message:"确定要到观众席吗？你将成为观众。",confirmText:"确认",cancelText:"取消",onConfirm:ee,onCancel:re}),r.jsx(je,{mode:"wait",children:e?r.jsxs(_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"flex flex-col",children:[r.jsxs("div",{className:"hidden sm:flex flex-col",children:[r.jsxs("div",{className:"text-center py-0.5",children:[r.jsxs("h1",{className:"text-base font-game font-bold bg-gradient-to-r from-yellow-400 via-pink-400 to-purple-400 bg-clip-text text-transparent inline-flex items-center gap-2",children:["五子棋对战",M==="spectator"&&r.jsx("span",{className:"text-sm font-normal text-yellow-400",children:"（观战模式）"})]}),r.jsxs("p",{className:"text-gray-300 text-xs",children:["房间: ",r.jsx("span",{className:"text-yellow-400 font-pixel",children:w})]})]}),r.jsxs("div",{className:"flex justify-center px-4 pt-1",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx(js,{side:"left"})}),r.jsxs("div",{className:"mx-3 flex flex-col",children:[r.jsx(Nr,{}),r.jsxs("div",{className:"flex justify-center gap-1.5 mt-1 pb-2",children:[M==="player"?r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:W,disabled:i||C,className:de("pixel-btn text-xs px-2.5 py-1 transition-all",(i||C)&&"opacity-50 cursor-not-allowed"),children:C?"等待对手...":i?"等待确认...":"重新开始"}),r.jsx("button",{onClick:G,disabled:ge,className:de("pixel-btn bg-blue-600 hover:bg-blue-700 text-xs px-2.5 py-1 transition-all",ge&&"opacity-50 cursor-not-allowed hover:bg-blue-600"),children:a?"等待确认...":"悔棋"}),r.jsx(zt,{onSendMessage:F,userRole:M,className:"text-xs px-2.5 py-1"}),r.jsx("button",{onClick:ue,disabled:S!=="playing",className:de("pixel-btn bg-red-500 hover:bg-red-600 text-xs px-2.5 py-1 transition-all",S!=="playing"&&"opacity-50 cursor-not-allowed hover:bg-red-500"),children:"认输"}),r.jsx("button",{onClick:Q,className:"pixel-btn bg-yellow-600 hover:bg-yellow-700 text-xs px-2.5 py-1 transition-all",children:"到观众席"})]}):M==="spectator"?r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:pe,className:"pixel-btn bg-green-600 hover:bg-green-700 text-xs px-2.5 py-1 transition-all",children:"成为玩家"}),r.jsx(zt,{onSendMessage:F,userRole:M,className:"text-xs px-2.5 py-1"}),r.jsx("span",{className:"text-yellow-400 text-xs px-2 py-1",children:"👁️ 观战模式"})]}):null,r.jsx("button",{onClick:L,className:"pixel-btn bg-red-600 hover:bg-red-700 text-xs px-2.5 py-1 transition-all",children:"离开房间"})]})]}),r.jsx("div",{className:"flex-shrink-0",children:r.jsx(js,{side:"right"})})]})]}),r.jsxs("div",{className:"sm:hidden flex flex-col",children:[r.jsx("div",{className:"text-center py-0.5",children:r.jsxs("h1",{className:"text-xs font-game font-bold text-yellow-400",children:["五子棋",M==="spectator"&&"(观战)"," - ",w]})}),r.jsx("div",{className:"px-1",children:r.jsx(js,{})}),r.jsxs("div",{className:"flex flex-col items-center pt-0.5",children:[r.jsx(Nr,{}),r.jsxs("div",{className:"flex flex-wrap justify-center gap-0.5 mt-0.5 px-1 pb-2",children:[M==="player"?r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:W,disabled:i||C,className:de("pixel-btn text-[8px] px-1.5 py-0.5 transition-all",(i||C)&&"opacity-50 cursor-not-allowed"),children:C||i?"等待":"重开"}),r.jsx("button",{onClick:G,disabled:ge,className:de("pixel-btn bg-blue-600 hover:bg-blue-700 text-[8px] px-1.5 py-0.5 transition-all",ge&&"opacity-50 cursor-not-allowed hover:bg-blue-600"),children:a?"等待":"悔棋"}),r.jsx(zt,{onSendMessage:F,userRole:M,className:"text-[8px] px-1.5 py-0.5"}),r.jsx("button",{onClick:ue,disabled:S!=="playing",className:de("pixel-btn bg-red-500 hover:bg-red-600 text-[8px] px-1.5 py-0.5 transition-all",S!=="playing"&&"opacity-50 cursor-not-allowed hover:bg-red-500"),children:"认输"}),r.jsx("button",{onClick:Q,className:"pixel-btn bg-yellow-600 hover:bg-yellow-700 text-[8px] px-1.5 py-0.5 transition-all",children:"观众席"})]}):M==="spectator"?r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:pe,className:"pixel-btn bg-green-600 hover:bg-green-700 text-[8px] px-1.5 py-0.5 transition-all",children:"成玩家"}),r.jsx(zt,{onSendMessage:F,userRole:M,className:"text-[8px] px-1.5 py-0.5"})]}):null,r.jsx("button",{onClick:L,className:"pixel-btn bg-red-600 hover:bg-red-700 text-[8px] px-1.5 py-0.5 transition-all",children:"离开"})]})]})]})]},"game"):r.jsx(_.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.3},className:"flex items-center justify-center px-4 py-2",children:r.jsx("div",{className:"w-full max-w-2xl",children:r.jsx(Od,{onJoinRoom:()=>t(!0)})})},"room-manager")}),!k&&e&&r.jsx(_.div,{initial:{opacity:0},animate:{opacity:1},className:"fixed bottom-2 right-2 bg-orange-600 text-white px-2 py-1 rounded shadow-lg text-xs z-50",children:r.jsx("span",{className:"animate-pulse",children:"连接中..."})})]})};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _d=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Wd=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,s,n)=>n?n.toUpperCase():s.toLowerCase()),Sr=e=>{const t=Wd(e);return t.charAt(0).toUpperCase()+t.slice(1)},so=(...e)=>e.filter((t,s,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===s).join(" ").trim(),qd=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Xd={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kd=g.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:n,className:i="",children:o,iconNode:a,...l},c)=>g.createElement("svg",{ref:c,...Xd,width:t,height:t,stroke:e,strokeWidth:n?Number(s)*24/Number(t):s,className:so("lucide",i),...!o&&!qd(l)&&{"aria-hidden":"true"},...l},[...a.map(([d,u])=>g.createElement(d,u)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=(e,t)=>{const s=g.forwardRef(({className:n,...i},o)=>g.createElement(Kd,{ref:o,iconNode:t,className:so(`lucide-${_d(Sr(e))}`,`lucide-${e}`,n),...i}));return s.displayName=Sr(e),s};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yd=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Ye=ae("arrow-left",Yd);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zd=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Jd=ae("chevron-down",Zd);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qd=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],eu=ae("chevron-left",Qd);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tu=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],su=ae("chevron-right",tu);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nu=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ru=ae("circle-alert",nu);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iu=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],no=ae("circle-check-big",iu);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ou=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Ss=ae("circle",ou);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const au=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],lu=ae("copy",au);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cu=[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]],du=ae("eraser",cu);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uu=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],hu=ae("heart",uu);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fu=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],Cr=ae("lightbulb",fu);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mu=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],pu=ae("monitor",mu);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gu=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],pn=ae("pause",gu);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xu=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],lt=ae("play",xu);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yu=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Ze=ae("rotate-ccw",yu);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bu=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],vu=ae("rotate-cw",bu);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wu=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],ju=ae("target",wu);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nu=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],Su=ae("timer",Nu);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cu=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Mt=ae("trophy",Cu);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tu=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Pu=ae("users",Tu);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ku=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Cs=ae("x",ku),Mu=()=>{const e=qe(),[t,s]=g.useState(()=>x()),[n,i]=g.useState(0),[o,a]=g.useState(()=>{const B=localStorage.getItem("2048-best-score");return B?parseInt(B):0}),[l,c]=g.useState(!1),[d,u]=g.useState(!1),[h,p]=g.useState(null);function x(){const B=Array(4).fill(null).map(()=>Array(4).fill(null));return C(B),C(B),B}function C(B){const V=[];for(let v=0;v<4;v++)for(let N=0;N<4;N++)B[v][N]===null&&V.push([v,N]);if(V.length===0)return!1;const[U,D]=V[Math.floor(Math.random()*V.length)];return B[U][D]=Math.random()<.9?2:4,!0}const b=g.useCallback(B=>{if(l||d)return;const V=t.map(N=>[...N]);let U=!1,D=0;const v=N=>{let z=N.filter(k=>k!==null),M=0,j=!1;for(let k=0;k<z.length-1;k++)z[k]===z[k+1]&&(z[k]=z[k]*2,M+=z[k],z.splice(k+1,1),j=!0);for(;z.length<4;)z.push(null);return JSON.stringify(N)!==JSON.stringify(z)&&(j=!0),[z,M,j]};if(B==="left")for(let N=0;N<4;N++){const[z,M,j]=v(V[N]);V[N]=z,D+=M,j&&(U=!0)}else if(B==="right")for(let N=0;N<4;N++){const z=[...V[N]].reverse(),[M,j,k]=v(z);V[N]=M.reverse(),D+=j,k&&(U=!0)}else if(B==="up")for(let N=0;N<4;N++){const z=[V[0][N],V[1][N],V[2][N],V[3][N]],[M,j,k]=v(z);for(let m=0;m<4;m++)V[m][N]=M[m];D+=j,k&&(U=!0)}else if(B==="down")for(let N=0;N<4;N++){const z=[V[3][N],V[2][N],V[1][N],V[0][N]],[M,j,k]=v(z);V[0][N]=M[3],V[1][N]=M[2],V[2][N]=M[1],V[3][N]=M[0],D+=j,k&&(U=!0)}if(U){C(V),s(V);const N=n+D;i(N),N>o&&(a(N),localStorage.setItem("2048-best-score",N.toString()));for(let z=0;z<4;z++)for(let M=0;M<4;M++)if(V[z][M]===2048){u(!0);return}P(V)||c(!0)}},[t,n,o,l,d]);function P(B){for(let V=0;V<4;V++)for(let U=0;U<4;U++)if(B[V][U]===null)return!0;for(let V=0;V<4;V++)for(let U=0;U<4;U++){const D=B[V][U];if(V<3&&D===B[V+1][U]||U<3&&D===B[V][U+1])return!0}return!1}g.useEffect(()=>{const B=V=>{V.key==="ArrowUp"?(V.preventDefault(),b("up")):V.key==="ArrowDown"?(V.preventDefault(),b("down")):V.key==="ArrowLeft"?(V.preventDefault(),b("left")):V.key==="ArrowRight"&&(V.preventDefault(),b("right"))};return window.addEventListener("keydown",B),()=>window.removeEventListener("keydown",B)},[b]);const A=B=>{const V=B.touches[0];p({x:V.clientX,y:V.clientY})},S=B=>{if(!h)return;const V=B.changedTouches[0],U=V.clientX-h.x,D=V.clientY-h.y,v=50;Math.abs(U)>Math.abs(D)?Math.abs(U)>v&&(U>0?b("right"):b("left")):Math.abs(D)>v&&(D>0?b("down"):b("up")),p(null)},w=()=>{s(x()),i(0),c(!1),u(!1)},O=B=>B===null?"bg-gray-700":{2:"bg-gray-600",4:"bg-gray-500",8:"bg-orange-500",16:"bg-orange-600",32:"bg-red-500",64:"bg-red-600",128:"bg-yellow-500",256:"bg-yellow-600",512:"bg-green-500",1024:"bg-green-600",2048:"bg-purple-600"}[B]||"bg-purple-700";return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900 p-4",children:r.jsxs("div",{className:"max-w-md mx-auto",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("button",{onClick:()=>e("/"),className:"p-2 text-white hover:bg-white/10 rounded-lg transition-colors",children:r.jsx(Ye,{size:24})}),r.jsx("h1",{className:"text-3xl font-bold text-white font-game",children:"2048"}),r.jsx("button",{onClick:w,className:"p-2 text-white hover:bg-white/10 rounded-lg transition-colors",children:r.jsx(Ze,{size:24})})]}),r.jsxs("div",{className:"flex justify-center gap-4 mb-6",children:[r.jsxs("div",{className:"bg-gray-800 px-4 py-2 rounded-lg",children:[r.jsx("div",{className:"text-gray-400 text-sm",children:"得分"}),r.jsx("div",{className:"text-white text-2xl font-bold",children:n})]}),r.jsxs("div",{className:"bg-gray-800 px-4 py-2 rounded-lg",children:[r.jsx("div",{className:"text-gray-400 text-sm",children:"最高分"}),r.jsx("div",{className:"text-white text-2xl font-bold",children:o})]})]}),r.jsx("div",{className:"relative bg-gray-800 p-2 rounded-lg select-none",onTouchStart:A,onTouchEnd:S,children:r.jsx("div",{className:"grid grid-cols-4 gap-2",children:t.map((B,V)=>B.map((U,D)=>r.jsxs("div",{className:"aspect-square relative",children:[r.jsx("div",{className:"absolute inset-0 bg-gray-700 rounded"}),r.jsx(je,{mode:"popLayout",children:U!==null&&r.jsx(_.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},className:`absolute inset-0 ${O(U)} rounded flex items-center justify-center text-white font-bold ${U&&U>=128?"text-2xl":"text-3xl"} ${U&&U>=1024?"text-xl":""}`,children:U},`tile-${V}-${D}-${U}`)})]},`${V}-${D}`)))})}),r.jsxs("div",{className:"mt-6 text-center text-gray-400 text-sm",children:[r.jsx("p",{children:"使用方向键或滑动来移动方块"}),r.jsx("p",{children:"相同数字的方块会合并"})]}),r.jsx(je,{children:(l||d)&&r.jsx(_.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 flex items-center justify-center p-4 z-50",children:r.jsxs(_.div,{initial:{scale:.8},animate:{scale:1},exit:{scale:.8},className:"bg-gray-800 p-8 rounded-xl text-center max-w-sm w-full",children:[d?r.jsxs(r.Fragment,{children:[r.jsx(Mt,{className:"w-16 h-16 text-yellow-500 mx-auto mb-4"}),r.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"恭喜获胜！"}),r.jsx("p",{className:"text-gray-400 mb-6",children:"你达到了2048！"})]}):r.jsxs(r.Fragment,{children:[r.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"游戏结束"}),r.jsxs("p",{className:"text-gray-400 mb-6",children:["最终得分：",n]})]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsx("button",{onClick:w,className:"flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"再玩一次"}),r.jsx("button",{onClick:()=>e("/"),className:"flex-1 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"返回首页"})]})]})})})]})})},De=20,Tr=150,Ru=5,Au=()=>{const e=qe(),t=g.useRef(null),[s,n]=g.useState([{x:10,y:10}]),[i,o]=g.useState({x:15,y:15}),[a,l]=g.useState("RIGHT"),[c,d]=g.useState(!1),[u,h]=g.useState(0),[p,x]=g.useState(()=>{const M=localStorage.getItem("snake-high-score");return M?parseInt(M):0}),[C,b]=g.useState(!1),[P,A]=g.useState(null),S=g.useRef(a),[w,O]=g.useState(Tr),B=g.useCallback(M=>{let j;do j={x:Math.floor(Math.random()*De),y:Math.floor(Math.random()*De)};while(M.some(k=>k.x===j.x&&k.y===j.y));return j},[]),V=g.useCallback((M,j)=>M.x<0||M.x>=De||M.y<0||M.y>=De?!0:j.some(k=>k.x===M.x&&k.y===M.y),[]),U=g.useCallback(()=>{c||!C||n(M=>{const j=[...M],k={...j[0]};switch(S.current){case"UP":k.y-=1;break;case"DOWN":k.y+=1;break;case"LEFT":k.x-=1;break;case"RIGHT":k.x+=1;break}return V(k,j)?(d(!0),b(!1),u>p&&(x(u),localStorage.setItem("snake-high-score",u.toString())),M):(j.unshift(k),k.x===i.x&&k.y===i.y?(h(m=>m+10),o(B(j)),O(m=>Math.max(50,m-Ru))):j.pop(),j)})},[c,C,i,V,B,u,p]);g.useEffect(()=>{const M=setInterval(U,w);return()=>clearInterval(M)},[U,w]),g.useEffect(()=>{const M=j=>{if(c||!C)return;const k=j.key;let m=S.current;switch(k){case"ArrowUp":case"w":case"W":S.current!=="DOWN"&&(m="UP");break;case"ArrowDown":case"s":case"S":S.current!=="UP"&&(m="DOWN");break;case"ArrowLeft":case"a":case"A":S.current!=="RIGHT"&&(m="LEFT");break;case"ArrowRight":case"d":case"D":S.current!=="LEFT"&&(m="RIGHT");break;case" ":j.preventDefault(),b(I=>!I);break}m!==S.current&&(S.current=m,l(m))};return window.addEventListener("keydown",M),()=>window.removeEventListener("keydown",M)},[c,C]);const D=M=>{const j=M.touches[0];A({x:j.clientX,y:j.clientY})},v=M=>{if(!P||c||!C)return;const j=M.changedTouches[0],k=j.clientX-P.x,m=j.clientY-P.y;Math.abs(k)>Math.abs(m)?k>30&&S.current!=="LEFT"?(S.current="RIGHT",l("RIGHT")):k<-30&&S.current!=="RIGHT"&&(S.current="LEFT",l("LEFT")):m>30&&S.current!=="UP"?(S.current="DOWN",l("DOWN")):m<-30&&S.current!=="DOWN"&&(S.current="UP",l("UP")),A(null)},N=()=>{n([{x:10,y:10}]),o({x:15,y:15}),l("RIGHT"),S.current="RIGHT",d(!1),h(0),O(Tr),b(!1)},z=()=>{c?N():b(!0)};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900 flex flex-col items-center justify-center p-4",children:r.jsxs(_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-2xl",children:[r.jsxs("div",{className:"bg-gray-800/50 backdrop-blur rounded-t-xl p-4 border-t border-l border-r border-gray-700",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("button",{onClick:()=>e("/"),className:"flex items-center gap-2 text-gray-400 hover:text-white transition-colors",children:[r.jsx(Ye,{size:20}),r.jsx("span",{className:"font-game",children:"返回"})]}),r.jsx("h1",{className:"text-2xl font-game font-bold text-white",children:"贪吃蛇"}),r.jsxs("button",{onClick:N,className:"flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors",children:[r.jsx(Ze,{size:16}),r.jsx("span",{className:"font-game",children:"重新开始"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-3 text-center",children:[r.jsx("div",{className:"text-gray-400 text-sm font-game",children:"当前分数"}),r.jsx("div",{className:"text-2xl font-bold text-white font-game",children:u})]}),r.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-3 text-center",children:[r.jsxs("div",{className:"text-gray-400 text-sm font-game flex items-center justify-center gap-1",children:[r.jsx(Mt,{size:14}),"最高分数"]}),r.jsx("div",{className:"text-2xl font-bold text-yellow-400 font-game",children:p})]})]})]}),r.jsxs("div",{ref:t,className:"bg-gray-900 border border-gray-700 p-4 rounded-b-xl relative",onTouchStart:D,onTouchEnd:v,children:[r.jsxs("div",{className:"relative bg-gray-800 rounded-lg",style:{width:`${De*16}px`,height:`${De*16}px`,maxWidth:"100%",aspectRatio:"1/1"},children:[r.jsx("div",{className:"absolute inset-0 grid grid-cols-20 grid-rows-20",children:Array.from({length:De*De}).map((M,j)=>r.jsx("div",{className:"border border-gray-700/20"},j))}),r.jsx(je,{children:s.map((M,j)=>r.jsx(_.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},className:`absolute ${j===0?"bg-gradient-to-br from-green-400 to-green-600 z-20":"bg-gradient-to-br from-green-500 to-green-700 z-10"} rounded-sm`,style:{left:`${M.x*16}px`,top:`${M.y*16}px`,width:"14px",height:"14px",margin:"1px"}},`${M.x}-${M.y}-${j}`))}),r.jsx(_.div,{initial:{scale:0},animate:{scale:[1,1.2,1]},transition:{duration:.5,repeat:1/0},className:"absolute bg-gradient-to-br from-red-400 to-red-600 rounded-full z-30",style:{left:`${i.x*16}px`,top:`${i.y*16}px`,width:"14px",height:"14px",margin:"1px"}},`${i.x}-${i.y}`),(!C||c)&&r.jsx(_.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 bg-black/60 backdrop-blur-sm rounded-lg flex items-center justify-center z-40",children:r.jsx("div",{className:"text-center",children:c?r.jsxs(r.Fragment,{children:[r.jsx("h2",{className:"text-3xl font-game font-bold text-red-400 mb-2",children:"游戏结束!"}),r.jsxs("p",{className:"text-xl font-game text-white mb-4",children:["得分: ",u]}),u>p&&r.jsx("p",{className:"text-lg font-game text-yellow-400 mb-4",children:"🎉 新纪录!"}),r.jsx("button",{onClick:N,className:"px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white font-game rounded-lg transition-colors",children:"重新开始"})]}):r.jsxs(r.Fragment,{children:[r.jsx("h2",{className:"text-2xl font-game font-bold text-white mb-4",children:u===0?"准备开始":"游戏暂停"}),r.jsxs("button",{onClick:z,className:"px-6 py-3 bg-green-600 hover:bg-green-700 text-white font-game rounded-lg transition-colors flex items-center gap-2 mx-auto",children:[r.jsx(lt,{size:20}),u===0?"开始游戏":"继续游戏"]}),r.jsxs("div",{className:"mt-4 text-gray-400 text-sm font-game",children:[r.jsx("p",{children:"使用方向键或WASD控制"}),r.jsx("p",{children:"手机上滑动屏幕控制方向"}),r.jsx("p",{children:"空格键暂停/继续"})]})]})})})]}),r.jsx("div",{className:"mt-4 flex justify-center",children:r.jsx("button",{onClick:()=>b(M=>!M),className:`px-6 py-3 ${C?"bg-orange-600 hover:bg-orange-700":"bg-green-600 hover:bg-green-700"} text-white font-game rounded-lg transition-colors flex items-center gap-2`,children:C?r.jsxs(r.Fragment,{children:[r.jsx(pn,{size:20}),"暂停"]}):r.jsxs(r.Fragment,{children:[r.jsx(lt,{size:20}),u===0?"开始":"继续"]})})})]})]})})},Qe=10,mt=20,Vu=800,Du=50,et={I:{shape:[[1,1,1,1]],color:"from-cyan-400 to-cyan-600"},O:{shape:[[1,1],[1,1]],color:"from-yellow-400 to-yellow-600"},T:{shape:[[0,1,0],[1,1,1]],color:"from-purple-400 to-purple-600"},S:{shape:[[0,1,1],[1,1,0]],color:"from-green-400 to-green-600"},Z:{shape:[[1,1,0],[0,1,1]],color:"from-red-400 to-red-600"},J:{shape:[[1,0,0],[1,1,1]],color:"from-blue-400 to-blue-600"},L:{shape:[[0,0,1],[1,1,1]],color:"from-orange-400 to-orange-600"}},Eu=()=>{const e=qe(),t=g.useRef(null),[s,n]=g.useState(()=>Array(mt).fill(null).map(()=>Array(Qe).fill(null))),[i,o]=g.useState(null),[a,l]=g.useState("T"),[c,d]=g.useState(0),[u,h]=g.useState(0),[p,x]=g.useState(1),[C,b]=g.useState(!1),[P,A]=g.useState(!1),[S,w]=g.useState(()=>{const f=localStorage.getItem("tetris-high-score");return f?parseInt(f):0}),[O,B]=g.useState(null),V=g.useRef(0),U=()=>{const f=Object.keys(et);return f[Math.floor(Math.random()*f.length)]},D=f=>{const T=f.length,R=f[0].length,E=Array(R).fill(null).map(()=>Array(T).fill(0));for(let F=0;F<T;F++)for(let $=0;$<R;$++)E[$][T-1-F]=f[F][$];return E},v=(f,T)=>{for(let R=0;R<T.shape.length;R++)for(let E=0;E<T.shape[R].length;E++)if(T.shape[R][E]){const F=T.position.x+E,$=T.position.y+R;if(F<0||F>=Qe||$>=mt||$>=0&&f[$][F])return!0}return!1},N=(f,T)=>{const R=f.map(F=>[...F]),E=et[T.type].color;for(let F=0;F<T.shape.length;F++)for(let $=0;$<T.shape[F].length;$++)if(T.shape[F][$]){const X=T.position.y+F,Y=T.position.x+$;X>=0&&(R[X][Y]=E)}return R},z=f=>{let T=[...f],R=0;for(let E=mt-1;E>=0;E--)T[E].every(F=>F!==null)&&(T.splice(E,1),T.unshift(Array(Qe).fill(null)),R++,E++);return{board:T,linesCleared:R}},M=f=>{const T=et[f].shape;return{type:f,shape:T,position:{x:Math.floor((Qe-T[0].length)/2),y:0}}},j=g.useCallback((f,T)=>{if(!i||!P||C)return!1;const R={x:i.position.x+f,y:i.position.y+T},E={...i,position:R};return v(s,E)?!1:(o(E),!0)},[i,s,P,C]),k=g.useCallback(()=>{if(!i||!P||C)return;const f=D(i.shape),T={...i,shape:f};if(!v(s,T))o(T);else for(const R of[1,-1,2,-2]){const E={...T,position:{...T.position,x:T.position.x+R}};if(!v(s,E)){o(E);break}}},[i,s,P,C]),m=g.useCallback(()=>{if(!i||!P||C)return;let f=0;for(;j(0,1);)f++;d(T=>T+f*2)},[i,P,C,j]);g.useEffect(()=>{if(!P||C||!i)return;const f=Math.max(100,Vu-(p-1)*Du),T=setInterval(()=>{if(!j(0,1)){const R=N(s,i),{board:E,linesCleared:F}=z(R);n(E),F>0&&(h(X=>X+F),d(X=>X+F*100*p),x(Math.floor((u+F)/10)+1));const $=M(a);v(E,$)?(b(!0),A(!1),c>S&&(w(c),localStorage.setItem("tetris-high-score",c.toString()))):(o($),l(U()))}},f);return()=>clearInterval(T)},[i,s,P,C,a,j,p,u,c,S]),g.useEffect(()=>{const f=T=>{if(!P||C){T.key===" "&&(T.preventDefault(),C?q():y());return}const R=Date.now(),E=R-V.current;switch(T.key){case"ArrowLeft":case"a":case"A":E>50&&(j(-1,0),V.current=R);break;case"ArrowRight":case"d":case"D":E>50&&(j(1,0),V.current=R);break;case"ArrowDown":case"s":case"S":j(0,1),d(F=>F+1);break;case"ArrowUp":case"w":case"W":k();break;case" ":T.preventDefault(),m();break;case"p":case"P":A(F=>!F);break}};return window.addEventListener("keydown",f),()=>window.removeEventListener("keydown",f)},[P,C,j,k,m]);const I=f=>{const T=f.touches[0];B({x:T.clientX,y:T.clientY})},H=f=>{if(!O||!P||C)return;const T=f.changedTouches[0],R=T.clientX-O.x,E=T.clientY-O.y;Math.abs(R)>Math.abs(E)?Math.abs(R)>30&&(R>0?j(1,0):j(-1,0)):E>50?(j(0,1),d(F=>F+1)):E<-30&&k(),B(null)},K=()=>{P&&!C&&k()},q=()=>{n(Array(mt).fill(null).map(()=>Array(Qe).fill(null))),o(null),l(U()),d(0),h(0),x(1),b(!1),A(!1)},y=()=>{if(C&&q(),A(!0),!i){const f=M(a);o(f),l(U())}};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-indigo-900 to-gray-900 flex flex-col items-center justify-center p-4",children:r.jsxs(_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-4xl",children:[r.jsx("div",{className:"bg-gray-800/50 backdrop-blur rounded-t-xl p-4 border-t border-l border-r border-gray-700",children:r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("button",{onClick:()=>e("/"),className:"flex items-center gap-2 text-gray-400 hover:text-white transition-colors",children:[r.jsx(Ye,{size:20}),r.jsx("span",{className:"font-game",children:"返回"})]}),r.jsx("h1",{className:"text-2xl font-game font-bold text-white",children:"俄罗斯方块"}),r.jsxs("button",{onClick:q,className:"flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors",children:[r.jsx(Ze,{size:16}),r.jsx("span",{className:"font-game",children:"重置"})]})]})}),r.jsx("div",{className:"bg-gray-900 border border-gray-700 p-4 rounded-b-xl",children:r.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[r.jsxs("div",{ref:t,className:"relative bg-gray-800 rounded-lg p-2",onTouchStart:I,onTouchEnd:H,onClick:K,children:[r.jsxs("div",{className:"grid grid-cols-10 gap-px bg-gray-700",style:{width:"240px"},children:[s.map((f,T)=>f.map((R,E)=>r.jsx("div",{className:`w-6 h-6 ${R?`bg-gradient-to-br ${R}`:"bg-gray-900"} ${R?"border border-gray-600":""}`},`${T}-${E}`))),i&&i.shape.map((f,T)=>f.map((R,E)=>{if(!R)return null;const F=i.position.y+T,$=i.position.x+E;return F<0||F>=mt||$<0||$>=Qe?null:r.jsx(_.div,{initial:{scale:0},animate:{scale:1},className:`absolute w-6 h-6 bg-gradient-to-br ${et[i.type].color} border border-gray-600`,style:{left:`${$*24+$}px`,top:`${F*24+F}px`}},`current-${T}-${E}`)}))]}),(!P||C)&&r.jsx(_.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 bg-black/70 backdrop-blur-sm rounded-lg flex items-center justify-center",children:r.jsx("div",{className:"text-center p-4",children:C?r.jsxs(r.Fragment,{children:[r.jsx("h2",{className:"text-3xl font-game font-bold text-red-400 mb-2",children:"游戏结束!"}),r.jsxs("p",{className:"text-xl font-game text-white mb-2",children:["得分: ",c]}),c>S&&r.jsx("p",{className:"text-lg font-game text-yellow-400 mb-4",children:"🎉 新纪录!"}),r.jsx("button",{onClick:q,className:"px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white font-game rounded-lg transition-colors",children:"重新开始"})]}):r.jsxs(r.Fragment,{children:[r.jsx("h2",{className:"text-2xl font-game font-bold text-white mb-4",children:c===0?"准备开始":"游戏暂停"}),r.jsxs("button",{onClick:y,className:"px-6 py-3 bg-green-600 hover:bg-green-700 text-white font-game rounded-lg transition-colors flex items-center gap-2 mx-auto",children:[r.jsx(lt,{size:20}),c===0?"开始游戏":"继续"]})]})})})]}),r.jsxs("div",{className:"flex-1 space-y-4",children:[r.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[r.jsx("h3",{className:"text-sm font-game text-gray-400 mb-2",children:"下一个"}),r.jsx("div",{className:"flex justify-center",children:r.jsx("div",{className:"grid gap-px bg-gray-700 p-1",children:et[a].shape.map((f,T)=>r.jsx("div",{className:"flex gap-px",children:f.map((R,E)=>r.jsx("div",{className:`w-5 h-5 ${R?`bg-gradient-to-br ${et[a].color} border border-gray-600`:""}`},E))},T))})})]}),r.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 space-y-3",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-gray-400 text-sm font-game",children:"分数"}),r.jsx("div",{className:"text-2xl font-bold text-white font-game",children:c})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-gray-400 text-sm font-game",children:"行数"}),r.jsx("div",{className:"text-xl font-bold text-blue-400 font-game",children:u})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-gray-400 text-sm font-game",children:"等级"}),r.jsx("div",{className:"text-xl font-bold text-green-400 font-game",children:p})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"text-gray-400 text-sm font-game flex items-center gap-1",children:[r.jsx(Mt,{size:14}),"最高分"]}),r.jsx("div",{className:"text-xl font-bold text-yellow-400 font-game",children:S})]})]}),r.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 text-xs text-gray-400 font-game space-y-1",children:[r.jsx("p",{children:"← → 或 A/D: 左右移动"}),r.jsx("p",{children:"↓ 或 S: 加速下落"}),r.jsx("p",{children:"↑ 或 W: 旋转"}),r.jsx("p",{children:"空格: 硬降"}),r.jsx("p",{children:"P: 暂停"}),r.jsx("p",{className:"text-purple-400",children:"手机: 滑动或点击旋转"})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-2 lg:hidden",children:[r.jsx("button",{onClick:()=>j(-1,0),className:"p-3 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors",disabled:!P||C,children:r.jsx(eu,{size:20,className:"mx-auto text-white"})}),r.jsx("button",{onClick:k,className:"p-3 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors",disabled:!P||C,children:r.jsx(vu,{size:20,className:"mx-auto text-white"})}),r.jsx("button",{onClick:()=>j(1,0),className:"p-3 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors",disabled:!P||C,children:r.jsx(su,{size:20,className:"mx-auto text-white"})}),r.jsx("button",{onClick:()=>{j(0,1),d(f=>f+1)},className:"col-span-3 p-3 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors",disabled:!P||C,children:r.jsx(Jd,{size:20,className:"mx-auto text-white"})})]}),r.jsx("button",{onClick:()=>P?A(!1):y(),className:`w-full px-6 py-3 ${P?"bg-orange-600 hover:bg-orange-700":"bg-green-600 hover:bg-green-700"} text-white font-game rounded-lg transition-colors flex items-center justify-center gap-2`,children:P?r.jsxs(r.Fragment,{children:[r.jsx(pn,{size:20}),"暂停"]}):r.jsxs(r.Fragment,{children:[r.jsx(lt,{size:20}),C||c===0?"开始游戏":"继续"]})})]})]})})]})})};let se=null,$t=!1;const Lu=(e,t,s,n,i,o,a,l,c)=>{const[d,u]=g.useState($t);return g.useEffect(()=>{if(se)u($t);else{let S;S="http://socket.qingfengyueying.xyz",console.log("TicTacToe - Connecting to:",S),se=Hs(S,{transports:["websocket","polling"],upgrade:!0,path:"/socket.io/",timeout:1e4,forceNew:!0,reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3}),se.on("connect",()=>{console.log("TicTacToe socket connected"),$t=!0,u(!0)}),se.on("disconnect",()=>{console.log("TicTacToe socket disconnected"),$t=!1,u(!1)}),se.on("ttt-game-start",w=>{console.log("TicTacToe game start:",w),e(w)}),se.on("ttt-opponent-move",w=>{console.log("TicTacToe opponent move:",w),t(w)}),se.on("ttt-game-end",w=>{console.log("TicTacToe game end:",w),s(w)}),se.on("ttt-room-joined",w=>{console.log("TicTacToe room joined:",w),n(w)}),se.on("ttt-room-created",w=>{console.log("TicTacToe room created:",w),n(w)}),se.on("ttt-player-joined",w=>{console.log("TicTacToe player joined:",w),i(w)}),se.on("ttt-player-left",w=>{console.log("TicTacToe player left:",w),o(w)}),se.on("ttt-restart-request",()=>{console.log("TicTacToe restart request"),a()}),se.on("ttt-game-restart",()=>{console.log("TicTacToe game restart"),l()}),se.on("ttt-error",w=>{console.error("TicTacToe error:",w.message),c(w.message)})}return()=>{}},[e,t,s,n,i,o,a,l,c]),{socket:se,connected:d,joinRoom:(S,w)=>{se&&w==="online"&&(console.log("Joining TicTacToe room:",S),se.emit("ttt-join-room",{roomId:S}))},createRoom:S=>{se&&S==="online"&&(console.log("Creating TicTacToe room"),se.emit("ttt-create-room"))},makeMove:(S,w,O)=>{se&&(console.log("Making TicTacToe move:",{roomId:S,row:w,col:O}),se.emit("ttt-make-move",{roomId:S,row:w,col:O}))},requestRestart:S=>{se&&(console.log("Requesting TicTacToe restart:",S),se.emit("ttt-request-restart",{roomId:S}))},acceptRestart:S=>{se&&(console.log("Accepting TicTacToe restart:",S),se.emit("ttt-accept-restart",{roomId:S}))},rejectRestart:S=>{se&&(console.log("Rejecting TicTacToe restart:",S),se.emit("ttt-reject-restart",{roomId:S}))},leaveRoom:S=>{se&&(console.log("Leaving TicTacToe room:",S),se.emit("ttt-leave-room",{roomId:S}))}}},Fu=()=>{const e=qe(),[t,s]=g.useState(()=>Array(3).fill(null).map(()=>Array(3).fill(null))),[n,i]=g.useState("X"),[o,a]=g.useState(null),[l,c]=g.useState(null),[d,u]=g.useState("waiting"),[h,p]=g.useState(null),[x,C]=g.useState([]),[b,P]=g.useState(""),[A,S]=g.useState({X:0,O:0,draws:0}),[w,O]=g.useState(!1),[B,V]=g.useState(!1),[U,D]=g.useState(!1),[v,N]=g.useState(""),{connected:z,joinRoom:M,createRoom:j,makeMove:k,requestRestart:m,acceptRestart:I,rejectRestart:H,leaveRoom:K}=Lu(L=>{a(L.playerSymbol),u("playing"),i("X"),E(),N("游戏开始！你是 "+L.playerSymbol)},L=>{const W=[...t];W[L.row][L.col]=n,s(W);const G=q(W);G.winner?T(G.winner,G.line):i(n==="X"?"O":"X")},L=>{p(L.winner),u("finished"),R(L.winner)},L=>{P(L.roomId),V(!L.isHost),N(L.isHost?"房间创建成功，等待对手加入...":"成功加入房间")},()=>{V(!1),N("对手已加入，游戏即将开始")},()=>{N("对手已离开"),u("waiting"),V(!0)},()=>{O(!0),N("对手请求重新开始")},()=>{F(),N("游戏重新开始")},L=>{N(L)}),q=L=>{for(let G=0;G<3;G++)if(L[G][0]&&L[G][0]===L[G][1]&&L[G][1]===L[G][2])return{winner:L[G][0],line:[[G,0],[G,1],[G,2]]};for(let G=0;G<3;G++)if(L[0][G]&&L[0][G]===L[1][G]&&L[1][G]===L[2][G])return{winner:L[0][G],line:[[0,G],[1,G],[2,G]]};return L[0][0]&&L[0][0]===L[1][1]&&L[1][1]===L[2][2]?{winner:L[0][0],line:[[0,0],[1,1],[2,2]]}:L[0][2]&&L[0][2]===L[1][1]&&L[1][1]===L[2][0]?{winner:L[0][2],line:[[0,2],[1,1],[2,0]]}:L.every(G=>G.every(Q=>Q!==null))?{winner:"draw",line:[]}:{winner:null,line:[]}},y=g.useCallback(()=>{d!=="playing"||n!=="O"||setTimeout(()=>{const L=[];for(let G=0;G<3;G++)for(let Q=0;Q<3;Q++)t[G][Q]||L.push([G,Q]);if(L.length===0)return;let W=null;for(const[G,Q]of L){const ee=t.map(re=>[...re]);if(ee[G][Q]="O",q(ee).winner==="O"){W=[G,Q];break}}if(!W)for(const[G,Q]of L){const ee=t.map(re=>[...re]);if(ee[G][Q]="X",q(ee).winner==="X"){W=[G,Q];break}}if(!W&&!t[1][1]&&(W=[1,1]),!W){const Q=[[0,0],[0,2],[2,0],[2,2]].filter(([ee,re])=>!t[ee][re]);Q.length>0&&(W=Q[Math.floor(Math.random()*Q.length)])}W||(W=L[Math.floor(Math.random()*L.length)]),W&&f(W[0],W[1])},500)},[t,n,d]),f=(L,W)=>{if(d!=="playing"||t[L][W]||h||l==="online"&&n!==o)return;const G=[...t];G[L][W]=n,s(G),l==="online"&&b&&k(b,L,W);const Q=q(G);Q.winner?T(Q.winner,Q.line):i(n==="X"?"O":"X")},T=(L,W=[])=>{p(L),C(W),u("finished"),R(L),N(L==="draw"?"平局！":`${l==="single"?L==="X"?"你":"电脑":L===o?"你":"对手"}获胜！`)},R=L=>{L==="draw"?S(W=>({...W,draws:W.draws+1})):L&&S(W=>({...W,[L]:W[L]+1}))},E=()=>{s(Array(3).fill(null).map(()=>Array(3).fill(null))),p(null),C([])},F=()=>{E(),i("X"),u(l?"playing":"waiting"),O(!1)},$=L=>{c(L),F(),L==="single"?(a("X"),u("playing")):L==="online"&&j("online")},X=()=>{const L=prompt("请输入房间号:");L&&(P(L.toUpperCase()),M(L.toUpperCase(),"online"),c("online"))},Y=()=>{navigator.clipboard.writeText(b),D(!0),setTimeout(()=>D(!1),2e3)},te=()=>{l==="online"&&b&&K(b),c(null),u("waiting"),E(),P(""),a(null)};return g.useEffect(()=>{l==="single"&&d==="playing"&&n==="O"&&!h&&y()},[l,d,n,h,y]),g.useEffect(()=>{if(v){const L=setTimeout(()=>N(""),3e3);return()=>clearTimeout(L)}},[v]),r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-gray-900 flex flex-col items-center justify-center p-4",children:r.jsxs(_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-lg",children:[r.jsxs("div",{className:"bg-gray-800/50 backdrop-blur rounded-t-xl p-4 border-t border-l border-r border-gray-700",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("button",{onClick:()=>l?te():e("/"),className:"flex items-center gap-2 text-gray-400 hover:text-white transition-colors",children:[r.jsx(Ye,{size:20}),r.jsx("span",{className:"font-game",children:l?"菜单":"返回"})]}),r.jsx("h1",{className:"text-2xl font-game font-bold text-white",children:"井字棋"}),d==="playing"&&r.jsxs("button",{onClick:F,className:"flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors",children:[r.jsx(Ze,{size:16}),r.jsx("span",{className:"font-game",children:"重置"})]})]}),l&&r.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[r.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-2",children:[r.jsxs("div",{className:"text-blue-400 font-game flex items-center justify-center gap-1",children:[r.jsx(Cs,{size:16}),l==="single"?"玩家":"X"]}),r.jsx("div",{className:"text-xl font-bold text-white",children:A.X})]}),r.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-2",children:[r.jsx("div",{className:"text-gray-400 font-game",children:"平局"}),r.jsx("div",{className:"text-xl font-bold text-white",children:A.draws})]}),r.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-2",children:[r.jsxs("div",{className:"text-red-400 font-game flex items-center justify-center gap-1",children:[r.jsx(Ss,{size:16}),l==="single"?"电脑":"O"]}),r.jsx("div",{className:"text-xl font-bold text-white",children:A.O})]})]})]}),r.jsxs("div",{className:"bg-gray-900 border border-gray-700 p-6 rounded-b-xl",children:[r.jsx(je,{children:v&&r.jsx(_.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"mb-4 p-3 bg-blue-600/20 border border-blue-600 rounded-lg text-blue-400 text-center font-game",children:v})}),!l&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("h2",{className:"text-xl font-game text-white text-center mb-6",children:"选择游戏模式"}),r.jsxs("button",{onClick:()=>$("single"),className:"w-full p-4 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white rounded-lg transition-all flex items-center justify-center gap-3",children:[r.jsx(pu,{size:24}),r.jsx("span",{className:"font-game text-lg",children:"单机对战"})]}),r.jsxs("button",{onClick:()=>$("online"),disabled:!z,className:`w-full p-4 ${z?"bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800":"bg-gray-700 cursor-not-allowed opacity-50"} text-white rounded-lg transition-all flex items-center justify-center gap-3`,children:[r.jsx(Pu,{size:24}),r.jsx("span",{className:"font-game text-lg",children:"在线对战"}),!z&&r.jsx("span",{className:"text-xs",children:"(未连接)"})]}),r.jsx("button",{onClick:X,disabled:!z,className:`w-full p-4 ${z?"bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800":"bg-gray-700 cursor-not-allowed opacity-50"} text-white rounded-lg transition-all flex items-center justify-center gap-3`,children:r.jsx("span",{className:"font-game text-lg",children:"加入房间"})})]}),l==="online"&&b&&r.jsxs("div",{className:"mb-4 p-3 bg-gray-800 rounded-lg",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-400 font-game",children:"房间号:"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-white font-game font-bold text-lg",children:b}),r.jsx("button",{onClick:Y,className:"p-1 hover:bg-gray-700 rounded transition-colors",children:U?r.jsx(no,{size:16,className:"text-green-400"}):r.jsx(lu,{size:16,className:"text-gray-400"})})]})]}),B&&r.jsx("div",{className:"mt-2 text-yellow-400 text-sm font-game animate-pulse",children:"等待对手加入..."})]}),l&&r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"grid grid-cols-3 gap-2 bg-gray-800 p-4 rounded-lg",children:t.map((L,W)=>L.map((G,Q)=>{const ee=x.some(([re,ue])=>re===W&&ue===Q);return r.jsx(_.button,{whileHover:{scale:G?1:1.05},whileTap:{scale:.95},onClick:()=>f(W,Q),disabled:!!G||d!=="playing"||l==="online"&&n!==o,className:`
                          h-24 sm:h-28 bg-gray-900 rounded-lg border-2 transition-all
                          ${G?"border-gray-600":"border-gray-700 hover:border-gray-500"}
                          ${ee?"bg-green-900/30 border-green-500":""}
                          ${!G&&d==="playing"&&(l==="single"||n===o)?"cursor-pointer":"cursor-not-allowed"}
                          flex items-center justify-center
                        `,children:r.jsx(je,{children:G&&r.jsx(_.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},exit:{scale:0,rotate:180},className:`text-5xl sm:text-6xl font-bold ${G==="X"?"text-blue-400":"text-red-400"}`,children:G==="X"?r.jsx(Cs,{size:48}):r.jsx(Ss,{size:48})})})},`${W}-${Q}`)}))}),d==="playing"&&!h&&r.jsxs("div",{className:"mt-4 text-center",children:[r.jsx("span",{className:"text-gray-400 font-game",children:"当前回合: "}),r.jsx("span",{className:`font-game font-bold text-lg ${n==="X"?"text-blue-400":"text-red-400"}`,children:l==="single"?n==="X"?"你":"电脑":l==="online"&&n===o?"你":n})]}),d==="finished"&&h&&r.jsx(_.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"absolute inset-0 bg-black/60 backdrop-blur-sm rounded-lg flex items-center justify-center",children:r.jsxs("div",{className:"text-center p-6",children:[h==="draw"?r.jsxs(r.Fragment,{children:[r.jsx("h2",{className:"text-3xl font-game font-bold text-yellow-400 mb-4",children:"平局!"}),r.jsx("p",{className:"text-white font-game mb-4",children:"势均力敌"})]}):r.jsxs(r.Fragment,{children:[r.jsx("h2",{className:"text-3xl font-game font-bold text-green-400 mb-4",children:l==="single"?h==="X"?"你赢了!":"电脑赢了!":h===o?"你赢了!":"对手赢了!"}),r.jsx("div",{className:`text-5xl mb-4 ${h==="X"?"text-blue-400":"text-red-400"}`,children:h==="X"?r.jsx(Cs,{size:60}):r.jsx(Ss,{size:60})})]}),r.jsx("button",{onClick:l==="online"?()=>m(b):F,className:"px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white font-game rounded-lg transition-colors",children:"再来一局"})]})})]}),w&&r.jsx(_.div,{initial:{opacity:0},animate:{opacity:1},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg border border-gray-700 max-w-sm",children:[r.jsx("h3",{className:"text-xl font-game text-white mb-4",children:"对手请求重新开始"}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>{I(b),O(!1)},className:"flex-1 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors",children:"同意"}),r.jsx("button",{onClick:()=>{H(b),O(!1)},className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors",children:"拒绝"})]})]})})]})]})})},Iu=["🎮","🎯","🎲","🎨","🎪","🎭","🎰","🎸","🏀","⚽","🏈","🎾","🎱","🏆","🎪","🎨"],Bu=()=>{const e=qe(),[t,s]=g.useState([]),[n,i]=g.useState([]),[o,a]=g.useState(0),[l,c]=g.useState(0),[d,u]=g.useState(!1),[h,p]=g.useState(!1),[x,C]=g.useState("medium"),[b,P]=g.useState(0),[A,S]=g.useState(0),[w,O]=g.useState(()=>{const k=localStorage.getItem("memory-best-scores");return k?JSON.parse(k):{easy:{moves:1/0,time:1/0},medium:{moves:1/0,time:1/0},hard:{moves:1/0,time:1/0}}}),B=k=>{switch(k){case"easy":return 8;case"medium":return 12;case"hard":return 16;default:return 12}},V=g.useCallback(()=>{const k=B(x),m=Iu.slice(0,k/2),I=[];m.forEach((H,K)=>{I.push({id:K*2,emoji:H,isFlipped:!1,isMatched:!1},{id:K*2+1,emoji:H,isFlipped:!1,isMatched:!1})});for(let H=I.length-1;H>0;H--){const K=Math.floor(Math.random()*(H+1));[I[H],I[K]]=[I[K],I[H]]}s(I),i([]),a(0),c(0),p(!1),u(!1),S(0)},[x]),U=k=>{d||(u(!0),P(Date.now()));const m=t.find(K=>K.id===k);if(!m||m.isFlipped||m.isMatched||n.length>=2)return;const I=t.map(K=>K.id===k?{...K,isFlipped:!0}:K);s(I);const H=[...n,k];i(H),H.length===2&&(a(o+1),D(H))},D=k=>{const[m,I]=k,H=t.find(q=>q.id===m),K=t.find(q=>q.id===I);H&&K&&H.emoji===K.emoji?setTimeout(()=>{s(y=>y.map(f=>f.id===m||f.id===I?{...f,isMatched:!0}:f)),c(l+1),i([]);const q=B(x);l+1===q/2&&v()},500):setTimeout(()=>{s(q=>q.map(y=>y.id===m||y.id===I?{...y,isFlipped:!1}:y)),i([])},1e3)},v=()=>{const k=Date.now(),m=Math.floor((k-b)/1e3);S(m),p(!0);const I=w[x];if(o<I.moves||m<I.time){const H={...w,[x]:{moves:Math.min(o,I.moves),time:Math.min(m,I.time)}};O(H),localStorage.setItem("memory-best-scores",JSON.stringify(H))}},N=()=>{V()},z=k=>{C(k),u(!1),p(!1)};g.useEffect(()=>{let k;return d&&!h&&(k=setInterval(()=>{S(Math.floor((Date.now()-b)/1e3))},1e3)),()=>clearInterval(k)},[d,h,b]),g.useEffect(()=>{V()},[V]);const M=k=>{const m=Math.floor(k/60),I=k%60;return`${m}:${I.toString().padStart(2,"0")}`},j=()=>{switch(x){case"easy":return"grid-cols-4";case"medium":return"grid-cols-4";case"hard":return"grid-cols-4";default:return"grid-cols-4"}};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900 flex flex-col items-center justify-center p-4",children:r.jsxs(_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-4xl",children:[r.jsxs("div",{className:"bg-gray-800/50 backdrop-blur rounded-t-xl p-4 border-t border-l border-r border-gray-700",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("button",{onClick:()=>e("/"),className:"flex items-center gap-2 text-gray-400 hover:text-white transition-colors",children:[r.jsx(Ye,{size:20}),r.jsx("span",{className:"font-game",children:"返回"})]}),r.jsx("h1",{className:"text-2xl font-game font-bold text-white",children:"记忆翻牌"}),r.jsxs("button",{onClick:N,className:"flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors",children:[r.jsx(Ze,{size:16}),r.jsx("span",{className:"font-game",children:"重新开始"})]})]}),r.jsx("div",{className:"flex justify-center gap-2 mb-4",children:["easy","medium","hard"].map(k=>r.jsx("button",{onClick:()=>z(k),className:`px-4 py-2 rounded-lg font-game transition-all ${x===k?"bg-purple-600 text-white":"bg-gray-700 text-gray-400 hover:bg-gray-600 hover:text-white"}`,children:k==="easy"?"简单":k==="medium"?"中等":"困难"},k))}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-3 text-center",children:[r.jsxs("div",{className:"text-gray-400 text-sm font-game flex items-center justify-center gap-1",children:[r.jsx(ju,{size:14}),"步数"]}),r.jsx("div",{className:"text-2xl font-bold text-white font-game",children:o})]}),r.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-3 text-center",children:[r.jsxs("div",{className:"text-gray-400 text-sm font-game flex items-center justify-center gap-1",children:[r.jsx(Su,{size:14}),"时间"]}),r.jsx("div",{className:"text-2xl font-bold text-white font-game",children:M(A)})]}),r.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-3 text-center",children:[r.jsx("div",{className:"text-gray-400 text-sm font-game",children:"匹配"}),r.jsxs("div",{className:"text-2xl font-bold text-green-400 font-game",children:[l,"/",B(x)/2]})]})]}),w[x].moves!==1/0&&r.jsxs("div",{className:"mt-4 p-3 bg-gray-700/30 rounded-lg flex justify-center gap-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-gray-400 text-xs font-game",children:"最少步数"}),r.jsx("div",{className:"text-yellow-400 font-game font-bold",children:w[x].moves})]}),r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"text-gray-400 text-xs font-game flex items-center gap-1",children:[r.jsx(Mt,{size:12}),"最快时间"]}),r.jsx("div",{className:"text-yellow-400 font-game font-bold",children:M(w[x].time)})]})]})]}),r.jsxs("div",{className:"bg-gray-900 border border-gray-700 p-6 rounded-b-xl",children:[r.jsx("div",{className:`grid ${j()} gap-3 max-w-2xl mx-auto`,children:t.map(k=>r.jsx(_.div,{whileHover:{scale:k.isFlipped||k.isMatched?1:1.05},whileTap:{scale:.95},className:"aspect-square",children:r.jsxs("button",{onClick:()=>U(k.id),disabled:k.isFlipped||k.isMatched,className:"w-full h-full relative preserve-3d",style:{transformStyle:"preserve-3d",transform:k.isFlipped||k.isMatched?"rotateY(180deg)":"rotateY(0deg)",transition:"transform 0.6s"},children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-600 to-purple-800 rounded-lg border-2 border-purple-500 flex items-center justify-center backface-hidden",style:{backfaceVisibility:"hidden"},children:r.jsx("span",{className:"text-3xl sm:text-4xl",children:"❓"})}),r.jsx("div",{className:`absolute inset-0 ${k.isMatched?"bg-gradient-to-br from-green-600 to-green-800 border-green-500":"bg-gradient-to-br from-blue-600 to-blue-800 border-blue-500"} rounded-lg border-2 flex items-center justify-center`,style:{backfaceVisibility:"hidden",transform:"rotateY(180deg)"},children:r.jsx(_.span,{className:"text-4xl sm:text-5xl",initial:{scale:0},animate:{scale:1},transition:{delay:.2},children:k.emoji})})]})},k.id))}),r.jsx(je,{children:h&&r.jsx(_.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50",children:r.jsxs(_.div,{initial:{y:50},animate:{y:0},className:"bg-gray-800 p-8 rounded-xl border border-gray-700 text-center max-w-md",children:[r.jsx("h2",{className:"text-3xl font-game font-bold text-green-400 mb-4",children:"🎉 完成!"}),r.jsxs("div",{className:"space-y-2 mb-6",children:[r.jsxs("p",{className:"text-white font-game",children:["用时: ",r.jsx("span",{className:"text-yellow-400",children:M(A)})]}),r.jsxs("p",{className:"text-white font-game",children:["步数: ",r.jsx("span",{className:"text-yellow-400",children:o})]}),o<=w[x].moves&&r.jsx("p",{className:"text-green-400 font-game",children:"🏆 新记录!"})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:N,className:"flex-1 px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white font-game rounded-lg transition-colors",children:"再玩一次"}),r.jsx("button",{onClick:()=>e("/"),className:"flex-1 px-6 py-3 bg-gray-700 hover:bg-gray-600 text-white font-game rounded-lg transition-colors",children:"返回主页"})]})]})})})]})]})})},Pr=e=>{const t=[[5,3,4,6,7,8,9,1,2],[6,7,2,1,9,5,3,4,8],[1,9,8,3,4,2,5,6,7],[8,5,9,7,6,1,4,2,3],[4,2,6,8,5,3,7,9,1],[7,1,3,9,2,4,8,5,6],[9,6,1,5,3,7,2,8,4],[2,8,7,4,1,9,6,3,5],[3,4,5,2,8,6,1,7,9]],s=e==="easy"?30:e==="medium"?40:50,n=t.map(o=>o.map(a=>({value:a,isFixed:!0,isError:!1,notes:[]})));let i=0;for(;i<s;){const o=Math.floor(Math.random()*9),a=Math.floor(Math.random()*9);n[o][a].value!==null&&(n[o][a]={value:null,isFixed:!1,isError:!1,notes:[]},i++)}return n},Ou=()=>{const e=qe(),[t,s]=g.useState(()=>Pr("easy")),[n,i]=g.useState(null),[o,a]=g.useState("easy"),[l,c]=g.useState(0),[d,u]=g.useState(3),[h,p]=g.useState(!1),[x,C]=g.useState(!1),[b]=g.useState(Date.now()),[P,A]=g.useState(0),S=(v,N,z,M)=>{for(let m=0;m<9;m++)if(m!==z&&v[N][m].value===M)return!1;for(let m=0;m<9;m++)if(m!==N&&v[m][z].value===M)return!1;const j=Math.floor(N/3)*3,k=Math.floor(z/3)*3;for(let m=0;m<3;m++)for(let I=0;I<3;I++)if((j+m!==N||k+I!==z)&&v[j+m][k+I].value===M)return!1;return!0},w=v=>{if(!n||t[n.row][n.col].isFixed)return;const N=t.map(M=>M.map(j=>({...j}))),z=N[n.row][n.col];if(h)z.notes.includes(v)?z.notes=z.notes.filter(M=>M!==v):z.notes.push(v),z.value=null;else{const M=S(N,n.row,n.col,v);z.value=v,z.notes=[],z.isError=!M,M||c(l+1)}s(N),V(N)},O=()=>{if(!n||t[n.row][n.col].isFixed)return;const v=t.map(N=>N.map(z=>({...z})));v[n.row][n.col]={value:null,isFixed:!1,isError:!1,notes:[]},s(v)},B=()=>{if(d<=0||!n||t[n.row][n.col].isFixed)return;const v=[[5,3,4,6,7,8,9,1,2],[6,7,2,1,9,5,3,4,8],[1,9,8,3,4,2,5,6,7],[8,5,9,7,6,1,4,2,3],[4,2,6,8,5,3,7,9,1],[7,1,3,9,2,4,8,5,6],[9,6,1,5,3,7,2,8,4],[2,8,7,4,1,9,6,3,5],[3,4,5,2,8,6,1,7,9]],N=t.map(z=>z.map(M=>({...M})));N[n.row][n.col]={value:v[n.row][n.col],isFixed:!1,isError:!1,notes:[]},s(N),u(d-1),V(N)},V=v=>{v.every((z,M)=>z.every((j,k)=>j.value!==null&&!j.isError&&S(v,M,k,j.value)))&&C(!0)},U=v=>{s(Pr(v||o)),i(null),c(0),u(3),p(!1),C(!1),v&&a(v)};g.useEffect(()=>{const v=setInterval(()=>{A(Math.floor((Date.now()-b)/1e3))},1e3);return()=>clearInterval(v)},[b]),g.useEffect(()=>{const v=N=>{N.key>="1"&&N.key<="9"?w(parseInt(N.key)):N.key==="Delete"||N.key==="Backspace"?O():(N.key==="n"||N.key==="N")&&p(!h)};return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[n,h]);const D=v=>{const N=Math.floor(v/60),z=v%60;return`${N}:${z.toString().padStart(2,"0")}`};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-indigo-900 to-gray-900 flex flex-col items-center justify-center p-4",children:r.jsxs(_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-4xl",children:[r.jsxs("div",{className:"bg-gray-800/50 backdrop-blur rounded-t-xl p-4 border-t border-l border-r border-gray-700",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("button",{onClick:()=>e("/"),className:"flex items-center gap-2 text-gray-400 hover:text-white transition-colors",children:[r.jsx(Ye,{size:20}),r.jsx("span",{className:"font-game",children:"返回"})]}),r.jsx("h1",{className:"text-2xl font-game font-bold text-white",children:"数独"}),r.jsxs("button",{onClick:()=>U(),className:"flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors",children:[r.jsx(Ze,{size:16}),r.jsx("span",{className:"font-game",children:"新游戏"})]})]}),r.jsx("div",{className:"flex justify-center gap-2 mb-4",children:["easy","medium","hard"].map(v=>r.jsx("button",{onClick:()=>U(v),className:`px-4 py-2 rounded-lg font-game transition-all ${o===v?"bg-purple-600 text-white":"bg-gray-700 text-gray-400 hover:bg-gray-600 hover:text-white"}`,children:v==="easy"?"简单":v==="medium"?"中等":"困难"},v))}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-3 text-center",children:[r.jsx("div",{className:"text-gray-400 text-sm font-game",children:"时间"}),r.jsx("div",{className:"text-xl font-bold text-white font-game",children:D(P)})]}),r.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-3 text-center",children:[r.jsxs("div",{className:"text-gray-400 text-sm font-game flex items-center justify-center gap-1",children:[r.jsx(ru,{size:14}),"错误"]}),r.jsx("div",{className:"text-xl font-bold text-red-400 font-game",children:l})]}),r.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-3 text-center",children:[r.jsxs("div",{className:"text-gray-400 text-sm font-game flex items-center justify-center gap-1",children:[r.jsx(Cr,{size:14}),"提示"]}),r.jsx("div",{className:"text-xl font-bold text-yellow-400 font-game",children:d})]})]})]}),r.jsxs("div",{className:"bg-gray-900 border border-gray-700 p-6 rounded-b-xl",children:[r.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 items-center justify-center",children:[r.jsx("div",{className:"bg-gray-800 p-2 rounded-lg",children:r.jsx("div",{className:"grid grid-cols-9 gap-0",children:t.map((v,N)=>v.map((z,M)=>r.jsx("button",{onClick:()=>i({row:N,col:M}),className:`
                        w-10 h-10 sm:w-12 sm:h-12 flex items-center justify-center relative
                        ${z.isFixed?"bg-gray-700":"bg-gray-900 hover:bg-gray-800"}
                        ${(n==null?void 0:n.row)===N&&(n==null?void 0:n.col)===M?"bg-blue-900":""}
                        ${z.isError?"bg-red-900/50":""}
                        ${M%3===2&&M<8?"border-r-2 border-gray-600":"border-r border-gray-700"}
                        ${N%3===2&&N<8?"border-b-2 border-gray-600":"border-b border-gray-700"}
                        transition-colors
                      `,disabled:x,children:z.value?r.jsx("span",{className:`
                          text-lg sm:text-xl font-bold
                          ${z.isFixed?"text-gray-400":z.isError?"text-red-400":"text-white"}
                        `,children:z.value}):r.jsx("div",{className:"grid grid-cols-3 gap-0 text-xs text-blue-400",children:[1,2,3,4,5,6,7,8,9].map(j=>r.jsx("span",{className:"text-[8px]",children:z.notes.includes(j)?j:""},j))})},`${N}-${M}`)))})}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"grid grid-cols-3 gap-2",children:[1,2,3,4,5,6,7,8,9].map(v=>r.jsx("button",{onClick:()=>w(v),className:"w-14 h-14 bg-gray-700 hover:bg-gray-600 text-white text-xl font-bold rounded-lg transition-colors",disabled:x,children:v},v))}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("button",{onClick:()=>p(!h),className:`w-full p-3 ${h?"bg-blue-600 hover:bg-blue-700":"bg-gray-700 hover:bg-gray-600"} text-white rounded-lg transition-colors flex items-center justify-center gap-2`,disabled:x,children:[r.jsx("span",{className:"font-game",children:"笔记模式"}),h&&r.jsx(no,{size:16})]}),r.jsxs("button",{onClick:O,className:"w-full p-3 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors flex items-center justify-center gap-2",disabled:x,children:[r.jsx(du,{size:16}),r.jsx("span",{className:"font-game",children:"清除"})]}),r.jsxs("button",{onClick:B,className:"w-full p-3 bg-yellow-600 hover:bg-yellow-700 text-white rounded-lg transition-colors flex items-center justify-center gap-2",disabled:x||d<=0,children:[r.jsx(Cr,{size:16}),r.jsxs("span",{className:"font-game",children:["提示 (",d,")"]})]})]})]})]}),x&&r.jsx(_.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-gray-800 p-8 rounded-xl border border-gray-700 text-center",children:[r.jsx("h2",{className:"text-3xl font-game font-bold text-green-400 mb-4",children:"🎉 完成!"}),r.jsxs("div",{className:"space-y-2 mb-6",children:[r.jsxs("p",{className:"text-white font-game",children:["用时: ",r.jsx("span",{className:"text-yellow-400",children:D(P)})]}),r.jsxs("p",{className:"text-white font-game",children:["错误: ",r.jsx("span",{className:"text-yellow-400",children:l})]})]}),r.jsx("button",{onClick:()=>U(),className:"px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white font-game rounded-lg transition-colors",children:"新游戏"})]})})]})]})})},ve=600,Pe=400,Ce=100,tt=10,Ut=8,kr=75,Mr=20,Rr=10,zu=60,$u=35,Uu=5,Gu=6,Ts=[{color:"#ef4444",points:50,hits:3},{color:"#f97316",points:40,hits:2},{color:"#eab308",points:30,hits:2},{color:"#22c55e",points:20,hits:1},{color:"#06b6d4",points:10,hits:1}],Hu=()=>{const e=qe(),t=g.useRef(null),s=g.useRef(),[n,i]=g.useState(!1),[o,a]=g.useState(!1),[l,c]=g.useState(0),[d,u]=g.useState(3),[h,p]=g.useState(1),[x,C]=g.useState(()=>{const M=localStorage.getItem("breakout-high-score");return M?parseInt(M):0}),[b,P]=g.useState({x:ve/2,y:Pe-30,dx:3,dy:-3,radius:Ut}),[A,S]=g.useState({x:(ve-Ce)/2,y:Pe-tt-10,width:Ce,height:tt}),[w,O]=g.useState([]),B=g.useCallback(()=>{const M=[];for(let j=0;j<Uu;j++)for(let k=0;k<Gu;k++){const m=Ts[Math.min(j,Ts.length-1)];M.push({x:k*(kr+Rr)+$u,y:j*(Mr+Rr)+zu,width:kr,height:Mr,color:m.color,points:m.points,hits:m.hits,destroyed:!1})}O(M)},[]),V=()=>{P({x:ve/2,y:Pe-30,dx:3+h*.5,dy:-(3+h*.5),radius:Ut}),S({x:(ve-Ce)/2,y:Pe-tt-10,width:Ce,height:tt}),B(),c(0),u(3),p(1),a(!1),i(!1)},U=()=>{P({x:ve/2,y:Pe-30,dx:3+h*.5,dy:-(3+h*.5),radius:Ut}),S({x:(ve-Ce)/2,y:Pe-tt-10,width:Ce,height:tt})},D=()=>{p(M=>M+1),P({x:ve/2,y:Pe-30,dx:3+(h+1)*.5,dy:-(3+(h+1)*.5),radius:Ut}),B()},v=g.useCallback(()=>{if((b.x+b.radius>ve||b.x-b.radius<0)&&(b.dx=-b.dx),b.y-b.radius<0&&(b.dy=-b.dy),b.y+b.radius>Pe&&u(j=>{const k=j-1;return k<=0?(a(!0),i(!1),l>x&&(C(l),localStorage.setItem("breakout-high-score",l.toString()))):U(),k}),b.x>A.x&&b.x<A.x+A.width&&b.y+b.radius>A.y&&b.y-b.radius<A.y+A.height){const j=(b.x-A.x)/A.width;b.dx=8*(j-.5),b.dy=-b.dy}let M=!0;w.forEach(j=>{if(!j.destroyed&&(M=!1,b.x>j.x&&b.x<j.x+j.width&&b.y>j.y&&b.y<j.y+j.height))if(b.dy=-b.dy,j.hits--,j.hits<=0)j.destroyed=!0,c(k=>k+j.points);else{const k=j.hits/Ts.find(m=>m.color===j.color).hits;j.color=j.color+Math.floor(k*255).toString(16).padStart(2,"0")}}),M&&D()},[b,A,w,l,x]),N=g.useCallback(()=>{if(!n||o)return;const M=t.current;if(!M)return;const j=M.getContext("2d");if(!j)return;j.clearRect(0,0,ve,Pe),w.forEach(m=>{m.destroyed||(j.fillStyle=m.color,j.fillRect(m.x,m.y,m.width,m.height),j.strokeStyle="#1f2937",j.strokeRect(m.x,m.y,m.width,m.height))});const k=j.createLinearGradient(A.x,A.y,A.x,A.y+A.height);k.addColorStop(0,"#8b5cf6"),k.addColorStop(1,"#7c3aed"),j.fillStyle=k,j.fillRect(A.x,A.y,A.width,A.height),j.beginPath(),j.arc(b.x,b.y,b.radius,0,Math.PI*2),j.fillStyle="#ffffff",j.fill(),j.closePath(),b.x+=b.dx,b.y+=b.dy,v(),s.current=requestAnimationFrame(N)},[n,o,b,A,w,v]);g.useEffect(()=>{const M=j=>{if(!t.current||!n)return;const k=t.current.getBoundingClientRect(),m=j.clientX-k.left;S(I=>({...I,x:Math.max(0,Math.min(ve-Ce,m-Ce/2))}))};return window.addEventListener("mousemove",M),()=>window.removeEventListener("mousemove",M)},[n]);const z=M=>{if(!t.current||!n)return;const j=t.current.getBoundingClientRect(),k=M.touches[0].clientX-j.left;S(m=>({...m,x:Math.max(0,Math.min(ve-Ce,k-Ce/2))}))};return g.useEffect(()=>{const M=j=>{if(!n){j.key===" "&&(j.preventDefault(),i(!0));return}switch(j.key){case"ArrowLeft":case"a":case"A":S(k=>({...k,x:Math.max(0,k.x-20)}));break;case"ArrowRight":case"d":case"D":S(k=>({...k,x:Math.min(ve-Ce,k.x+20)}));break;case" ":case"p":case"P":j.preventDefault(),i(k=>!k);break}};return window.addEventListener("keydown",M),()=>window.removeEventListener("keydown",M)},[n]),g.useEffect(()=>(n&&!o&&(s.current=requestAnimationFrame(N)),()=>{s.current&&cancelAnimationFrame(s.current)}),[n,o,N]),g.useEffect(()=>{B()},[B]),r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900 flex flex-col items-center justify-center p-4",children:r.jsxs(_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-4xl",children:[r.jsxs("div",{className:"bg-gray-800/50 backdrop-blur rounded-t-xl p-4 border-t border-l border-r border-gray-700",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("button",{onClick:()=>e("/"),className:"flex items-center gap-2 text-gray-400 hover:text-white transition-colors",children:[r.jsx(Ye,{size:20}),r.jsx("span",{className:"font-game",children:"返回"})]}),r.jsx("h1",{className:"text-2xl font-game font-bold text-white",children:"打砖块"}),r.jsxs("button",{onClick:V,className:"flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors",children:[r.jsx(Ze,{size:16}),r.jsx("span",{className:"font-game",children:"重置"})]})]}),r.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[r.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-3 text-center",children:[r.jsx("div",{className:"text-gray-400 text-sm font-game",children:"分数"}),r.jsx("div",{className:"text-xl font-bold text-white font-game",children:l})]}),r.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-3 text-center",children:[r.jsxs("div",{className:"text-gray-400 text-sm font-game flex items-center justify-center gap-1",children:[r.jsx(hu,{size:14}),"生命"]}),r.jsx("div",{className:"text-xl font-bold text-red-400 font-game",children:d})]}),r.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-3 text-center",children:[r.jsx("div",{className:"text-gray-400 text-sm font-game",children:"关卡"}),r.jsx("div",{className:"text-xl font-bold text-green-400 font-game",children:h})]}),r.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-3 text-center",children:[r.jsxs("div",{className:"text-gray-400 text-sm font-game flex items-center justify-center gap-1",children:[r.jsx(Mt,{size:14}),"最高分"]}),r.jsx("div",{className:"text-xl font-bold text-yellow-400 font-game",children:x})]})]})]}),r.jsxs("div",{className:"bg-gray-900 border border-gray-700 p-6 rounded-b-xl",children:[r.jsxs("div",{className:"relative flex justify-center",children:[r.jsx("canvas",{ref:t,width:ve,height:Pe,className:"bg-gray-800 rounded-lg border-2 border-gray-700",onTouchMove:z,style:{maxWidth:"100%",height:"auto"}}),(!n||o)&&r.jsx(_.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 bg-black/60 backdrop-blur-sm rounded-lg flex items-center justify-center",children:r.jsx("div",{className:"text-center p-6",children:o?r.jsxs(r.Fragment,{children:[r.jsx("h2",{className:"text-3xl font-game font-bold text-red-400 mb-2",children:"游戏结束!"}),r.jsxs("p",{className:"text-xl font-game text-white mb-2",children:["得分: ",l]}),l>x&&r.jsx("p",{className:"text-lg font-game text-yellow-400 mb-4",children:"🎉 新记录!"}),r.jsx("button",{onClick:V,className:"px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white font-game rounded-lg transition-colors",children:"重新开始"})]}):r.jsxs(r.Fragment,{children:[r.jsx("h2",{className:"text-2xl font-game font-bold text-white mb-4",children:l===0?"准备开始":"游戏暂停"}),r.jsxs("button",{onClick:()=>i(!0),className:"px-6 py-3 bg-green-600 hover:bg-green-700 text-white font-game rounded-lg transition-colors flex items-center gap-2 mx-auto",children:[r.jsx(lt,{size:20}),l===0?"开始游戏":"继续"]}),r.jsxs("div",{className:"mt-4 text-gray-400 text-sm font-game",children:[r.jsx("p",{children:"使用鼠标或触摸控制挡板"}),r.jsx("p",{children:"← → 或 A/D 键盘控制"}),r.jsx("p",{children:"空格键暂停/继续"})]})]})})})]}),r.jsx("div",{className:"mt-4 flex justify-center",children:r.jsx("button",{onClick:()=>i(M=>!M),className:`px-6 py-3 ${n?"bg-orange-600 hover:bg-orange-700":"bg-green-600 hover:bg-green-700"} text-white font-game rounded-lg transition-colors flex items-center gap-2`,children:n?r.jsxs(r.Fragment,{children:[r.jsx(pn,{size:20}),"暂停"]}):r.jsxs(r.Fragment,{children:[r.jsx(lt,{size:20}),l===0?"开始":"继续"]})})})]})]})})},_u=()=>{const e=lo(),[t,s]=g.useState(new Date);g.useEffect(()=>{const i=setInterval(()=>s(new Date),1e3);return()=>clearInterval(i)},[]);const n=e.pathname==="/";return r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900",children:[r.jsx("div",{className:"fixed inset-0 overflow-hidden pointer-events-none -z-10",children:[...Array(window.innerWidth<768?20:50)].map((i,o)=>r.jsx(_.div,{className:"absolute w-1 h-1 bg-white opacity-30",initial:{x:Math.random()*window.innerWidth,y:Math.random()*window.innerHeight},animate:{y:[null,-window.innerHeight]},transition:{duration:Math.random()*20+10,repeat:1/0,ease:"linear",delay:Math.random()*10}},o))}),r.jsx("header",{className:"relative z-1",children:r.jsx("nav",{className:"container mx-auto px-3 sm:px-4 py-2 sm:py-3",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs(Ps,{to:"/",className:"flex items-center space-x-2 sm:space-x-3",children:[r.jsx(_.div,{whileHover:{rotate:360},whileTap:{scale:.95},transition:{duration:.5},className:"w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-br from-purple-500 to-pink-500 rounded-lg flex items-center justify-center",children:r.jsx("span",{className:"text-white font-bold text-lg sm:text-xl",children:"G"})}),r.jsxs("h1",{className:"text-base sm:text-xl font-game font-bold bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent",children:[r.jsx("span",{className:"hidden sm:inline",children:"Game Collection"}),r.jsx("span",{className:"sm:hidden",children:"游戏合集"})]})]}),r.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-6",children:[!n&&r.jsx(_.div,{whileTap:{scale:.95},transition:{duration:.1},children:r.jsxs(Ps,{to:"/",className:"pixel-btn text-xs px-2 py-1 sm:px-3 sm:py-2 flex items-center justify-center",children:[r.jsx("span",{className:"hidden sm:inline",children:"返回首页"}),r.jsx("span",{className:"sm:hidden",children:"首页"})]})}),r.jsx("div",{className:"text-xs sm:text-sm font-pixel text-gray-400 hidden sm:block",children:t.toLocaleTimeString("zh-CN")})]})]})})}),r.jsx("main",{className:"relative z-1 container mx-auto px-3 sm:px-4 py-1 sm:py-2",children:r.jsx(_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:r.jsx(co,{})},e.pathname)}),r.jsx("footer",{className:"relative z-1",children:r.jsx("div",{className:"container mx-auto px-3 sm:px-4 py-2 sm:py-3",children:r.jsx("div",{className:"text-center text-xs sm:text-sm text-gray-500 font-pixel",children:"© 2024 Game Collection"})})})]})};function Wu(){return r.jsx(uo,{children:r.jsx(je,{mode:"wait",children:r.jsx(ho,{children:r.jsxs(Te,{path:"/",element:r.jsx(_u,{}),children:[r.jsx(Te,{index:!0,element:r.jsx(Bd,{})}),r.jsx(Te,{path:"games/gomoku",element:r.jsx(Hd,{})}),r.jsx(Te,{path:"games/2048",element:r.jsx(Mu,{})}),r.jsx(Te,{path:"games/snake",element:r.jsx(Au,{})}),r.jsx(Te,{path:"games/tetris",element:r.jsx(Eu,{})}),r.jsx(Te,{path:"games/tictactoe",element:r.jsx(Fu,{})}),r.jsx(Te,{path:"games/memory",element:r.jsx(Bu,{})}),r.jsx(Te,{path:"games/sudoku",element:r.jsx(Ou,{})}),r.jsx(Te,{path:"games/breakout",element:r.jsx(Hu,{})})]})})})})}ks.createRoot(document.getElementById("root")).render(r.jsx(Gs.StrictMode,{children:r.jsx(Wu,{})}))});export default qu();
//# sourceMappingURL=index-eer5Y6Cx.js.map
